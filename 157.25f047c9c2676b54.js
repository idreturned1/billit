"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[157],{1157:(w,h,r)=>{r.r(h),r.d(h,{AuthModule:()=>R});var C=r(9808),c=r(1787),u=r(655),o=r(3075),m=r(9067),t=r(5e3),p=r(773),F=r(9670),f=r(4464),U=r(520),b=r(7048),y=r(7261);let T=(()=>{class e{constructor(n,i,s){this.http=n,this.dialogService=i,this._snackBar=s}login(n){return(0,u.mG)(this,void 0,void 0,function*(){const i=m.ap.loginUrl,s=this.dialogService.openDialog(p.Ou,{disableClose:!0});s.componentInstance.mode="indeterminate",s.componentInstance.color="accent";try{const a=yield(0,f.n)(this.http.post(i,n));return s.close(),a}catch(a){s.close(),this._snackBar.open("Username or Password incorrect. Try Again.",null,F.R$.error)}})}register(n){return(0,u.mG)(this,void 0,void 0,function*(){const i=m.ap.registrationUrl,s=this.dialogService.openDialog(p.Ou,{disableClose:!0});s.componentInstance.mode="indeterminate",s.componentInstance.color="accent";const a=yield(0,f.n)(this.http.post(i,n));return s.close(),a})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(U.eN),t.LFG(b.x),t.LFG(y.ux))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=r(9224),d=r(3251),g=r(7322),A=r(7531),Z=r(7423);const N=[{path:"",component:(()=>{class e{constructor(n,i){this.authService=n,this.router=i}ngOnInit(){this.loginForm=new o.cw({username:new o.NI("",o.kI.required.bind(this)),password:new o.NI("",[o.kI.required.bind(this),o.kI.minLength(4)])}),this.registrationForm=new o.cw({username:new o.NI("",o.kI.required.bind(this)),email:new o.NI("",[o.kI.required.bind(this),o.kI.email.bind(this)]),password:new o.NI("",[o.kI.required.bind(this),o.kI.minLength(4)])})}login(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.loginForm.invalid)return;const s={username:this.loginForm.controls.username.value.trim(),password:this.loginForm.controls.password.value.trim()},a=yield this.authService.login(s);a?(m.cQ.storageHelper.userInfo=a,this.router.navigate(["dashboard"])):(this.loginForm.get("username").setValue(""),this.loginForm.get("password").setValue(""))})}register(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.registrationForm.invalid)return;const n=this.registrationForm.controls.username.value.trim(),i=this.registrationForm.controls.email.value.trim(),a={username:n,email:i,password:this.registrationForm.controls.password.value.trim()};i||delete a.email;const I=yield this.authService.register(a);I&&(m.cQ.storageHelper.userInfo=I,this.router.navigate(["dashboard"]))})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(T),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],decls:53,vars:2,consts:[[1,"auth-container","flex-centered-con"],[1,"flex-col","full-height"],[1,"spacer"],[1,"flex-col","content-container"],[1,"flex","pad-left-16"],["src","assets/images/common/logo.png","alt","",1,"home-logo","mar-32"],[1,"flex-col","mar-top-32","pad-top-32","org-title-position"],[1,"title","font-32","font-weight-500"],["mat-align-tabs","center"],["label","Login"],[1,"login-container","flex-col-centered-con","mar-top-16"],[1,"login-form"],[3,"formGroup","keyup.enter"],["appearance","outline",1,"full-width"],["matInput","","placeholder","username","formControlName","username","required",""],["matInput","","placeholder","password","type","password","formControlName","password","required",""],[1,"login-submit"],["mat-raised-button","","color","primary",3,"click"],["label","Register"],[1,"registration-container","flex-col-centered-con","mar-top-16"],[1,"registration-form"],["matInput","","placeholder","email","formControlName","email","required",""],[1,"registration-submit"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.TgZ(6,"div",6)(7,"div",7),t._uU(8,"Bill.it"),t.qZA(),t.TgZ(9,"div"),t._uU(10,"Simplified Billing."),t.qZA()()(),t.TgZ(11,"mat-card")(12,"mat-tab-group",8)(13,"mat-tab",9)(14,"div",10)(15,"div",11)(16,"form",12),t.NdJ("keyup.enter",function(){return i.login()}),t.TgZ(17,"div")(18,"mat-form-field",13)(19,"mat-label"),t._uU(20,"Username"),t.qZA(),t._UZ(21,"input",14),t.qZA()(),t.TgZ(22,"div")(23,"mat-form-field",13)(24,"mat-label"),t._uU(25,"Password"),t.qZA(),t._UZ(26,"input",15),t.qZA()()()(),t.TgZ(27,"div",16)(28,"button",17),t.NdJ("click",function(){return i.login()}),t._uU(29," Login "),t.qZA()()()(),t.TgZ(30,"mat-tab",18)(31,"div",19)(32,"div",20)(33,"form",12),t.NdJ("keyup.enter",function(){return i.register()}),t.TgZ(34,"div")(35,"mat-form-field",13)(36,"mat-label"),t._uU(37,"Username"),t.qZA(),t._UZ(38,"input",14),t.qZA()(),t.TgZ(39,"div")(40,"mat-form-field",13)(41,"mat-label"),t._uU(42,"Email"),t.qZA(),t._UZ(43,"input",21),t.qZA()(),t.TgZ(44,"div")(45,"mat-form-field",13)(46,"mat-label"),t._uU(47,"Password"),t.qZA(),t._UZ(48,"input",15),t.qZA()()()(),t.TgZ(49,"div",22)(50,"button",17),t.NdJ("click",function(){return i.register()}),t._uU(51," Register "),t.qZA()()()()()()(),t._UZ(52,"div",2),t.qZA()()),2&n&&(t.xp6(16),t.Q6J("formGroup",i.loginForm),t.xp6(17),t.Q6J("formGroup",i.registrationForm))},directives:[v.a8,d.SP,d.uX,o._Y,o.JL,o.sg,g.KE,g.hX,A.Nt,o.Fj,o.JJ,o.u,o.Q7,Z.lW],styles:[".home-logo[_ngcontent-%COMP%]{height:150px;flex:0}.auth-container[_ngcontent-%COMP%]{height:100vh;background-image:url(login-background.6bc53d902279c64e.jpg);background-size:100% 100%}.org-title-position[_ngcontent-%COMP%]{position:relative;top:30px}.content-container[_ngcontent-%COMP%]{min-height:585px}.login-form[_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]{width:90%}"]}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(N)],c.Bz]}),e})(),R=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[C.ez,M,o.u5,o.UX,g.lN,Z.ot,A.c,v.QW,d.Nh]]}),e})()}}]);