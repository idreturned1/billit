"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[12],{12:(it,C,r)=>{r.r(C),r.d(C,{CustomersModule:()=>ot});var T=r(8583),n=r(3679),c=r(8295),m=r(2789),v=r(6627),h=r(9692),f=r(9983),g=r(1095),p=r(1494),u=r(2238),y=r(7441),A=r(4655),Z=r(4762),_=r(7165),d=r(9670),t=r(7716),b=r(4416),x=r(3208),D=r(2458);function q(e,i){if(1&e&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.name," ")}}function U(e,i){if(1&e&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.name," ")}}let N=(()=>{class e{constructor(o,a,s,l){this.dialogRef=o,this.helperService=a,this.customerService=s,this.customerData=l,this.MONTHS=d.zC}ngOnInit(){this.formType=this.customerData?"Update":"Add",this.initForm()}initForm(){this.customerForm=new n.cw("Add"===this.formType?{name:new n.NI(null,[n.kI.required.bind(this),_.F]),mobile:new n.NI(null,n.kI.required.bind(this)),address:new n.NI(null),email:new n.NI(null,n.kI.email.bind(this)),birthday:new n.cw({day:new n.NI(null,[n.kI.min(1),n.kI.max(31)]),month:new n.NI(null,[n.kI.min(1),n.kI.max(12)])}),anniversary:new n.cw({day:new n.NI(null,[n.kI.min(1),n.kI.max(31)]),month:new n.NI(null,[n.kI.min(1),n.kI.max(12)])})}:{name:new n.NI(this.customerData.name,[n.kI.required.bind(this),_.F]),mobile:new n.NI(this.customerData.mobile,n.kI.required.bind(this)),address:new n.NI(this.customerData.address),email:new n.NI(this.customerData.email,n.kI.email.bind(this)),birthday:new n.cw({day:new n.NI(this.customerData.birthday?this.customerData.birthday.day:null,[n.kI.min(1),n.kI.max(31)]),month:new n.NI(this.customerData.birthday?this.customerData.birthday.month:null,[n.kI.min(1),n.kI.max(12)])}),anniversary:new n.cw({day:new n.NI(this.customerData.anniversary?this.customerData.anniversary.day:null,[n.kI.min(1),n.kI.max(31)]),month:new n.NI(this.customerData.anniversary?this.customerData.anniversary.month:null,[n.kI.min(1),n.kI.max(12)])})})}executeAction(){"Add"===this.formType?this.addNewCustomer():this.updateCustomer()}addNewCustomer(){return(0,Z.mG)(this,void 0,void 0,function*(){const o=this.getFormData();this.helperService._removeEmptyKeys(o),yield this.customerService.addCustomer(o),this.closeDialog()})}updateCustomer(){return(0,Z.mG)(this,void 0,void 0,function*(){const o=this.helperService._removeNonUpdatedData(this.customerData,this.getFormData());this.helperService._removeEmptyKeys(o),Object.keys(o).length&&(yield this.customerService.updateCustomer(this.customerData._id,o)),this.closeDialog()})}getFormData(){return this.helperService._clone(this.customerForm.value)}enableAction(){return this.customerForm.valid&&this.customerForm.dirty}closeDialog(){this.dialogRef.close()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.so),t.Y36(b.W),t.Y36(x.v),t.Y36(u.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-customer-form"]],decls:56,vars:6,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"mar-vr-16"],["appearance","fill",1,"full-width"],["matInput","","placeholder","Ex: Nikola Tesla","formControlName","name","required",""],["appearance","fill"],["matInput","","type","number","formControlName","mobile","required",""],["matInput","","formControlName","address","placeholder","Ex: #1 Tesla Road, Nikola City"],["matInput","","type","email","placeholder","Ex. nikola@tesla.com","formControlName","email"],[1,"flex"],["formGroupName","birthday",1,"occasion-container","mar-right-16"],["appearance","fill",1,"occasion-input"],["matInput","","type","number","formControlName","day"],[1,"input-separator"],["appearance","fill",1,"occasion-input","pixel-correction"],["formControlName","month"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","anniversary",1,"occasion-container"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(o,a){1&o&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"form",1),t.TgZ(4,"div",2),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"mat-label"),t._uU(7,"Name"),t.qZA(),t._UZ(8,"input",4),t.qZA(),t.qZA(),t.TgZ(9,"div",2),t.TgZ(10,"mat-form-field",5),t.TgZ(11,"mat-label"),t._uU(12,"Mobile"),t.qZA(),t._UZ(13,"input",6),t.qZA(),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"mat-form-field",3),t.TgZ(16,"mat-label"),t._uU(17,"Address"),t.qZA(),t._UZ(18,"textarea",7),t.qZA(),t.qZA(),t.TgZ(19,"div",2),t.TgZ(20,"mat-form-field",3),t.TgZ(21,"mat-label"),t._uU(22,"Email"),t.qZA(),t._UZ(23,"input",8),t.qZA(),t.qZA(),t.TgZ(24,"div",9),t.TgZ(25,"div",10),t.TgZ(26,"h4"),t._uU(27,"Birthday"),t.qZA(),t.TgZ(28,"mat-form-field",11),t.TgZ(29,"mat-label"),t._uU(30,"Day"),t.qZA(),t._UZ(31,"input",12),t.qZA(),t._UZ(32,"div",13),t.TgZ(33,"mat-form-field",14),t.TgZ(34,"mat-label"),t._uU(35,"Month"),t.qZA(),t.TgZ(36,"mat-select",15),t.YNc(37,q,2,2,"mat-option",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",17),t.TgZ(39,"h4"),t._uU(40,"Anniversary"),t.qZA(),t.TgZ(41,"mat-form-field",11),t.TgZ(42,"mat-label"),t._uU(43,"Day"),t.qZA(),t._UZ(44,"input",12),t.qZA(),t._UZ(45,"div",13),t.TgZ(46,"mat-form-field",14),t.TgZ(47,"mat-label"),t._uU(48,"Month"),t.qZA(),t.TgZ(49,"mat-select",15),t.YNc(50,U,2,2,"mat-option",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"mat-dialog-actions",18),t.TgZ(52,"button",19),t._uU(53,"Cancel"),t.qZA(),t.TgZ(54,"button",20),t.NdJ("click",function(){return a.executeAction()}),t._uU(55),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.hij("",a.formType," Customer"),t.xp6(2),t.Q6J("formGroup",a.customerForm),t.xp6(34),t.Q6J("ngForOf",a.MONTHS),t.xp6(13),t.Q6J("ngForOf",a.MONTHS),t.xp6(4),t.Q6J("disabled",!a.enableAction()),t.xp6(1),t.hij(" ",a.formType," "))},directives:[u.uh,u.xY,n._Y,n.JL,n.sg,c.KE,c.hX,f.Nt,n.Fj,n.JJ,n.u,n.Q7,n.wV,n.x0,y.gD,T.sg,u.H8,g.lW,u.ZT,D.ey],styles:[".occasion-input[_ngcontent-%COMP%]{width:100px}.pixel-correction[_ngcontent-%COMP%]{position:relative;bottom:1px}.occasion-container[_ngcontent-%COMP%]{position:relative}.input-separator[_ngcontent-%COMP%]{width:0px;border-right:1px solid rgba(0,0,0,.26);display:inline-block;height:35px;position:absolute;margin-top:8px}"]}),e})();var I=r(7176),w=r(5319),S=r(7048);function k(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1,"No."),t.qZA())}function F(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.index,a=t.oxw();t.xp6(1),t.hij(" ",o+1+(null==a.paginator?null:a.paginator.pageIndex)*(null==a.paginator?null:a.paginator.pageSize)," ")}}function Y(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Name"),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.name)}}function M(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Mobile"),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.mobile)}}function J(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Address"),t.qZA())}function j(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.address)}}function R(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Email"),t.qZA())}function B(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Oqu(o.email)}}function E(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Birthday"),t.qZA())}function H(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.getDateString(o.birthday)," ")}}function $(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Anniversary"),t.qZA())}function z(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=i.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",a.getDateString(o.anniversary)," ")}}function G(e,i){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Actions"),t.qZA())}function P(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"td",25),t.TgZ(1,"div",27),t.TgZ(2,"button",28),t.NdJ("click",function(){const l=t.CHM(o).$implicit;return t.oxw().updateCustomer(l)}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA(),t.qZA(),t.TgZ(5,"button",29),t.NdJ("click",function(){const l=t.CHM(o).$implicit;return t.oxw().removeCustomer(l)}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function X(e,i){1&e&&t._UZ(0,"tr",30)}function W(e,i){1&e&&t._UZ(0,"tr",31),2&e&&t.ekj("grey",i.even)}function K(e,i){1&e&&(t.TgZ(0,"tr",32),t.TgZ(1,"td",33),t._uU(2,"No data found."),t.qZA(),t.qZA())}const V=function(){return[5,10,25,100]},L=[{path:"",component:(()=>{class e{constructor(o,a){this.customerService=o,this.dialogService=a,this.displayedColumns=["id","name","mobile","address","email","birthday","anniversary","actions"],this.dataSource=new m.by([]),this.subscriptions=new w.w}ngOnInit(){const o=this.customerService.getAllCustomers().subscribe(a=>{a&&a.length&&(this.dataSource.data=a)});this.subscriptions.add(o)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}addCustomer(){this.dialogService.openDialog(N,d.ib.customer)}updateCustomer(o){this.dialogService.openDialog(N,Object.assign(Object.assign({},d.ib.customer),{data:o}))}removeCustomer(o){return(0,Z.mG)(this,void 0,void 0,function*(){(yield this.dialogService.openDialog(I.z,Object.assign(Object.assign({},d.ib.confirmationDialog),{data:{type:"warning",action:"remove",entity:"customer"}})).afterClosed().toPromise())&&(yield this.customerService.removeCustomer(o._id))})}getDateString(o){if(o)return`${d.zC.find(a=>a.value===o.month).name}, ${o.day}`}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(x.v),t.Y36(S.x))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-customers"]],viewQuery:function(o,a){if(1&o&&(t.Gf(h.NW,5),t.Gf(p.YE,5)),2&o){let s;t.iGM(s=t.CRH())&&(a.paginator=s.first),t.iGM(s=t.CRH())&&(a.sort=s.first)}},decls:40,vars:6,consts:[[1,"customer-container","mar-top-16"],[1,"customers"],["appearance","outline"],["matInput","","placeholder","Ex. Nikola Tesla",3,"keyup"],["input",""],[1,"customers-table"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","mobile"],["matColumnDef","address"],["matColumnDef","email"],["matColumnDef","birthday"],["matColumnDef","anniversary"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["mat-fab","","color","primary",1,"menu-button",3,"click"],["matTooltip","Add New"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"flex"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-label"),t._uU(4,"Search"),t.qZA(),t.TgZ(5,"input",3,4),t.NdJ("keyup",function(l){return a.applyFilter(l)}),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"table",6),t.ynx(9,7),t.YNc(10,k,2,0,"th",8),t.YNc(11,F,2,1,"td",9),t.BQk(),t.ynx(12,10),t.YNc(13,Y,2,0,"th",11),t.YNc(14,O,2,1,"td",9),t.BQk(),t.ynx(15,12),t.YNc(16,M,2,0,"th",11),t.YNc(17,Q,2,1,"td",9),t.BQk(),t.ynx(18,13),t.YNc(19,J,2,0,"th",8),t.YNc(20,j,2,1,"td",9),t.BQk(),t.ynx(21,14),t.YNc(22,R,2,0,"th",11),t.YNc(23,B,2,1,"td",9),t.BQk(),t.ynx(24,15),t.YNc(25,E,2,0,"th",11),t.YNc(26,H,2,1,"td",9),t.BQk(),t.ynx(27,16),t.YNc(28,$,2,0,"th",11),t.YNc(29,z,2,1,"td",9),t.BQk(),t.ynx(30,17),t.YNc(31,G,2,0,"th",11),t.YNc(32,P,8,0,"td",9),t.BQk(),t.YNc(33,X,1,0,"tr",18),t.YNc(34,W,1,2,"tr",19),t.YNc(35,K,3,0,"tr",20),t.qZA(),t._UZ(36,"mat-paginator",21),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"button",22),t.NdJ("click",function(){return a.addCustomer()}),t.TgZ(38,"mat-icon",23),t._uU(39,"person_add"),t.qZA(),t.qZA()),2&o&&(t.xp6(8),t.Q6J("dataSource",a.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(5,V)))},directives:[c.KE,c.hX,f.Nt,m.BZ,p.YE,m.w1,m.fO,m.Dz,m.as,m.nj,m.Ee,h.NW,g.lW,v.Hw,m.ge,m.ev,p.nU,m.XQ,m.Gk],styles:[""]}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}];let tt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[A.Bz.forChild(L)],A.Bz]}),e})();var et=r(4992);let ot=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[T.ez,tt,et.m,n.UX,c.lN,m.p0,v.Ps,h.TU,f.c,g.ot,p.JX,u.Is,y.LD]]}),e})()}}]);