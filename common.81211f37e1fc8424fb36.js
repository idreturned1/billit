"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[592],{3208:(E,d,r)=>{r.d(d,{v:()=>I});var l=r(4762),u=r(8312),p=r(6215),o=r(9067),c=r(9670),h=r(7716),_=r(1841),L=r(4416),v=r(7001);let I=(()=>{class a{constructor(s,e,t){this.http=s,this.helperService=e,this._snackBar=t,this.customerList$=new p.X(null),this.customerUrl=u.a.customerUrl,this.isDataLoaded=!1}addCustomer(s){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.http.post(this.customerUrl,s,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise(),t=this.getCustomerListValue();return t.length?(t.splice(this.helperService._alphebaticallocationOf(e,t),0,e),this.customerList$.next(t)):this.customerList$.next([e]),this._snackBar.open("Customer added successfully!",null,c.R$.success),e})}getAllCustomers(){return this.isDataLoaded||this.loadCustomers(),this.customerList$.asObservable()}getCustomer(s){return(0,l.mG)(this,void 0,void 0,function*(){const e=this.getCustomerListValue();for(const t of e)if(t._id===s)return t;return yield this.http.get(`${this.customerUrl}/${s}`,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise()})}updateCustomer(s,e){return(0,l.mG)(this,void 0,void 0,function*(){const t=yield this.http.patch(`${this.customerUrl}/${s}`,e,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise(),i=this.getCustomerListValue(),n=i.findIndex(m=>m._id===s);-1!==n&&(i.splice(n,1)[0].name.toLocaleLowerCase()===t.name.toLocaleLowerCase()?i.splice(n,0,t):i.length?i.splice(this.helperService._alphebaticallocationOf(t,i),0,t):i.push(t),this.customerList$.next(i),this._snackBar.open("Customer updated successfully!",null,c.R$.success))})}removeCustomer(s){return(0,l.mG)(this,void 0,void 0,function*(){const e=u.a.removeCustomerUrl;yield this.http.patch(`${e}/${s}`,null,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise();const t=this.customerList$.getValue(),i=t.findIndex(n=>n._id===s);-1!==i&&(t.splice(i,1),this.customerList$.next(t)),this._snackBar.open("Customer removed successfully!",null,c.R$.success)})}deleteCustomer(s){return(0,l.mG)(this,void 0,void 0,function*(){yield this.http.delete(`${this.customerUrl}/${s}`,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise();const e=this.customerList$.getValue(),t=e.findIndex(i=>i._id===s);-1!==t&&(e.splice(t,1),this.customerList$.next(e)),this._snackBar.open("Customer deleted successfully!",null,c.R$.success)})}loadCustomers(){this.http.get(u.a.allCustomersUrl,{params:{shopId:o.cQ.storageHelper.shopId}}).subscribe(s=>{this.customerList$.next(s),this.isDataLoaded=!0})}getCustomerListValue(){return this.customerList$.getValue()}}return a.\u0275fac=function(s){return new(s||a)(h.LFG(_.eN),h.LFG(L.W),h.LFG(v.ux))},a.\u0275prov=h.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},7672:(E,d,r)=>{r.d(d,{e:()=>I});var l=r(4762),u=r(8312),p=r(6215),o=r(9067),c=r(9670),h=r(7716),_=r(1841),L=r(4416),v=r(7001);let I=(()=>{class a{constructor(s,e,t){this.http=s,this.helperService=e,this._snackBar=t,this.itemList$=new p.X(null),this.itemUrl=u.a.itemUrl,this.isDataLoaded=!1}addItem(s){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.http.post(this.itemUrl,s,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise(),t=this.getItemListValue();return t.length?(t.splice(this.helperService._alphebaticallocationOf(e,t),0,e),this.itemList$.next(t)):this.itemList$.next([e]),this._snackBar.open("Item added successfully!",null,c.R$.success),e})}getAllItems(){return this.isDataLoaded||this.loadItems(),this.itemList$.asObservable()}getItem(s){return(0,l.mG)(this,void 0,void 0,function*(){const e=this.getItemListValue();for(const t of e)if(t._id===s)return t;return yield this.http.get(`${this.itemUrl}/${s}`,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise()})}updateItem(s,e){return(0,l.mG)(this,void 0,void 0,function*(){const t=yield this.http.patch(`${this.itemUrl}/${s}`,e,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise(),i=this.getItemListValue(),n=i.findIndex(m=>m._id===s);-1!==n&&(i.splice(n,1)[0].name.toLocaleLowerCase()===t.name.toLocaleLowerCase()?i.splice(n,0,t):i.splice(this.helperService._alphebaticallocationOf(t,i),0,t),this.itemList$.next(i),this._snackBar.open("Item updated successfully!",null,c.R$.success))})}removeItem(s){return(0,l.mG)(this,void 0,void 0,function*(){const e=u.a.removeItemUrl;yield this.http.patch(`${e}/${s}`,null,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise();const t=this.itemList$.getValue(),i=t.findIndex(n=>n._id===s);-1!==i&&(t.splice(i,1),this.itemList$.next(t)),this._snackBar.open("Item removed successfully!",null,c.R$.success)})}deleteItem(s){return(0,l.mG)(this,void 0,void 0,function*(){yield this.http.delete(`${this.itemUrl}/${s}`,{params:{shopId:o.cQ.storageHelper.shopId}}).toPromise();const e=this.itemList$.getValue(),t=e.findIndex(i=>i._id===s);-1!==t&&(e.splice(t,1),this.itemList$.next(e)),this._snackBar.open("Item deleted successfully!",null,c.R$.success)})}loadItems(){this.http.get(u.a.allItemsUrl,{params:{shopId:o.cQ.storageHelper.shopId}}).subscribe(s=>{this.itemList$.next(s),this.isDataLoaded=!0})}getItemListValue(){return this.itemList$.getValue()}}return a.\u0275fac=function(s){return new(s||a)(h.LFG(_.eN),h.LFG(L.W),h.LFG(v.ux))},a.\u0275prov=h.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);