"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[546],{9546:(Ao,M,s)=>{s.r(M),s.d(M,{OrdersModule:()=>xo});var f=s(8583),a=s(3679),h=s(8295),d=s(2789),y=s(6627),A=s(9692),O=s(9983),D=s(1095),b=s(1494),w=s(5781),p=s(3220),Z=s(3738),F=s(7441),R=s(8553),t=s(7716),g=s(2458),Q=s(9490),H=s(6237),z=s(9238);const V=["thumbContainer"],X=["toggleBar"],W=["input"],K=function(o){return{enterDuration:o}},tt=["*"],et=new t.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let ot=0;const it={provide:a.JU,useExisting:(0,t.Gpc)(()=>Y),multi:!0};class rt{constructor(r,e){this.source=r,this.checked=e}}const nt=(0,g.sb)((0,g.pj)((0,g.Kr)((0,g.Id)(class{constructor(o){this._elementRef=o}}))));let Y=(()=>{class o extends nt{constructor(e,i,n,l,m,c){super(e),this._focusMonitor=i,this._changeDetectorRef=n,this.defaults=m,this._onChange=v=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++ot,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new t.vpe,this.toggleChange=new t.vpe,this.tabIndex=parseInt(l)||0,this.color=this.defaultColor=m.color||"accent",this._noopAnimations="NoopAnimations"===c}get required(){return this._required}set required(e){this._required=(0,Q.Ig)(e)}get checked(){return this._checked}set checked(e){this._checked=(0,Q.Ig)(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._inputElement.nativeElement.focus():e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new rt(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(z.tE),t.Y36(t.sBO),t.$8M("tabindex"),t.Y36(et),t.Y36(H.Qb,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-slide-toggle"]],viewQuery:function(e,i){if(1&e&&(t.Gf(V,5),t.Gf(X,5),t.Gf(W,5)),2&e){let n;t.iGM(n=t.CRH())&&(i._thumbEl=n.first),t.iGM(n=t.CRH())&&(i._thumbBarEl=n.first),t.iGM(n=t.CRH())&&(i._inputElement=n.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,i){2&e&&(t.Ikx("id",i.id),t.uIk("tabindex",i.disabled?null:-1)("aria-label",null)("aria-labelledby",null),t.ekj("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[t._Bn([it]),t.qOj],ngContentSelectors:tt,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,i){if(1&e&&(t.F$t(),t.TgZ(0,"label",0,1),t.TgZ(2,"div",2,3),t.TgZ(4,"input",4,5),t.NdJ("change",function(l){return i._onChangeEvent(l)})("click",function(l){return i._onInputClick(l)}),t.qZA(),t.TgZ(6,"div",6,7),t._UZ(8,"div",8),t.TgZ(9,"div",9),t._UZ(10,"div",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"span",11,12),t.NdJ("cdkObserveContent",function(){return i._onLabelTextChange()}),t.TgZ(13,"span",13),t._uU(14,"\xa0"),t.qZA(),t.Hsn(15),t.qZA(),t.qZA()),2&e){const n=t.MAs(1),l=t.MAs(12);t.uIk("for",i.inputId),t.xp6(2),t.ekj("mat-slide-toggle-bar-no-side-margin",!l.textContent||!l.textContent.trim()),t.xp6(2),t.Q6J("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),t.uIk("name",i.name)("aria-checked",i.checked.toString())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),t.xp6(5),t.Q6J("matRippleTrigger",n)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",t.VKq(18,K,i._noopAnimations?0:150))}},directives:[g.wG,R.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),o})(),B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})(),st=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[B,g.si,g.BQ,R.Q8],B,g.BQ]}),o})();var I=s(1436),T=s(2238),J=s(4655),u=s(4762),C=s(7238),dt=s(9765),q=s(5319),$=s(739),P=s(9761),L=s(8002),mt=s(3342),S=s(7165),_=s(9670),N=s(4416),ct=s(3208),ut=s(7672),U=s(8312),x=s(9067),pt=s(6215),j=s(1841);let gt=(()=>{class o{constructor(e){this.http=e}generateReceiptForOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){yield this.http.post(`${U.a.receiptForOrderUrl}/${e}`,null,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise()})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(j.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ht=s(2266),_t=s(7001);let k=(()=>{class o{constructor(e,i,n,l,m){this.http=e,this.receiptService=i,this.helperService=n,this.reportService=l,this._snackBar=m,this.orderList$=new pt.X(null),this.orderUrl=U.a.orderUrl,this.startDate=new Date,this.isDataLoaded=!1}getOrders(){return this.isDataLoaded||this.loadOrders(),this.orderList$.asObservable()}getCurrentDateRange(){return{startDate:this.startDate,endDate:this.endDate}}updateOrderDateRange(e,i){this.startDate=e,i&&(this.endDate=i),this.loadOrders()}addOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){const i=yield this.http.post(this.orderUrl,e,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise();if(this.isOrderInRange(i.deliveryDate)){const n=this.getOrderListValue();n.length?(n.splice(this.helperService._deliveryDateLocationOf(i,n),0,i),this.orderList$.next(n)):this.orderList$.next([i])}return this._snackBar.open("Order added successfully!",null,_.R$.success),i})}updateOrder(e,i){return(0,u.mG)(this,void 0,void 0,function*(){const n=yield this.http.patch(`${this.orderUrl}/${e}`,i,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise(),l=this.getOrderListValue(),m=l.findIndex(c=>c._id===e);-1!==m&&(l.splice(m,1)[0].deliveryDate===n.deliveryDate?l.splice(m,0,n):this.isOrderInRange(n.deliveryDate)&&(l.length?l.splice(this.helperService._deliveryDateLocationOf(n,l),0,n):l.push(n)),this.orderList$.next(l),this._snackBar.open("Order updated successfully!",null,_.R$.success)),yield this.receiptService.generateReceiptForOrder(e),this.reportService.refreshData()})}deleteOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){yield this.http.delete(`${this.orderUrl}/${e}`,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise();const i=this.orderList$.getValue(),n=i.findIndex(l=>l._id===e);-1!==n&&(i.splice(n,1),this.orderList$.next(i)),this._snackBar.open("Order deleted successfully!",null,_.R$.success),this.reportService.refreshData()})}loadOrders(){const e={shopId:x.cQ.storageHelper.shopId,startDate:this.startDate.toISOString()};this.endDate&&(e.endDate=this.endDate.toISOString()),this.http.get(U.a.allOrdersUrl,{params:e}).subscribe(i=>{this.orderList$.next(i),this.isDataLoaded=!0})}getOrderListValue(){return this.orderList$.getValue()}isOrderInRange(e){let i=e;"string"==typeof e&&(i=new Date(e));const n=new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());let l;return l=this.endDate?new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate()+1):new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate()+1),i>=n&&i<l}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(j.eN),t.LFG(gt),t.LFG(N.W),t.LFG(ht.r),t.LFG(_t.ux))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function ft(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().autoFillCustomerForm(l)}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._uU(3," | "),t.TgZ(4,"small"),t._uU(5),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.Q6J("value",e.name),t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij("Mob. No: ",e.mobile,"")}}function Zt(o,r){if(1&o&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Tt(o,r){if(1&o&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Ct(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().selectItem(l)}),t._uU(1),t.qZA()}if(2&o){const e=r.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function bt(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"No."),t.qZA())}function xt(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=r.index;t.xp6(1),t.hij(" ",e+1," ")}}function At(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Name"),t.qZA())}function Ot(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.item.name)}}function vt(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Price"),t.qZA())}function yt(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.itemPrice,"USD")," ")}}function Dt(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Quantity"),t.qZA())}function wt(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.quantity)}}function It(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Total Cost"),t.qZA())}function qt(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.quantity*e.itemPrice,"USD")," ")}}function St(o,r){1&o&&t._UZ(0,"th",56)}function Nt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",57),t.TgZ(1,"button",58),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().removeItemFromBill(l)}),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA(),t.qZA(),t.qZA()}}function Ut(o,r){1&o&&t._UZ(0,"tr",59)}function kt(o,r){1&o&&t._UZ(0,"tr",60),2&o&&t.ekj("grey",r.even)}function Mt(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Total Amount"),t.qZA())}function Ft(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.totalAmount,"USD")," ")}}function Rt(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Discount"),t.qZA())}function Qt(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.discount)}}function Yt(o,r){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Net Bill Amount"),t.qZA())}function Bt(o,r){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount,"USD")," ")}}function Jt(o,r){1&o&&t._UZ(0,"tr",59)}function $t(o,r){1&o&&t._UZ(0,"tr",60)}let E=(()=>{class o{constructor(e,i,n,l,m,c){this.dialogRef=e,this.helperService=i,this.customerService=n,this.itemService=l,this.orderService=m,this.orderData=c,this.MONTHS=_.zC,this.viewBillItems=[],this.enableItemAddButton=!1,this.iemRemovedFromBill$=new dt.xQ,this.displayedColumns=["id","name","price","quantity","total","actions"],this.billDisplayedColumns=["totalAmount","discount","billAmount"],this.subscriptions=new q.w}ngOnInit(){this.orderData?(this.formType="Update",this.selectedCustomerId=this.orderData.customer._id):this.formType="Add",this.initCustomerForm(),this.initItemForm(),this.initBillItemTable(),this.calculateBillData(),this.customerList$=(0,$.aj)([this.customerService.getAllCustomers(),this.orderCustomerForm.get("name").valueChanges.pipe((0,P.O)(""))]).pipe((0,L.U)(([i,n])=>{if(i)return this._customerListFilter(i,n)})),this.itemList$=(0,$.aj)([this.itemService.getAllItems(),this.orderItemForm.get("name").valueChanges.pipe((0,P.O)(""))]).pipe((0,mt.b)(()=>{this.enableItemAddButton=!1,this.selectedItem=null}),(0,L.U)(([i,n])=>{if(i)return this._itemListFilter(i,n)}));const e=this.orderItemForm.get("discount").valueChanges.subscribe(()=>{this.calculateBillData()});this.subscriptions.add(e)}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}executeAction(){"Add"===this.formType?this.addNewOrder():this.updateOrder()}calculateBillData(){if(this.billData=[],this.viewBillItems.length){const e=this.viewBillItems.map(l=>l.itemPrice*l.quantity).reduce((l,m)=>l+m,0);let i=this.orderItemForm.get("discount").value;i=i||0,this.billData.push({totalAmount:e,discount:`-$${i/100*e} (${i}%)`,billAmount:e-i/100*e})}}updateBillTable(){this.calculateBillData(),this.billTable.renderRows()}addNewOrder(){return(0,u.mG)(this,void 0,void 0,function*(){const e=yield this.generateNewOrderObject();yield this.orderService.addOrder(e),this.closeDialog()})}updateOrder(){return(0,u.mG)(this,void 0,void 0,function*(){const e=yield this.generateNewOrderObject();yield this.orderService.updateOrder(this.orderData._id,e),this.closeDialog()})}autoFillCustomerForm(e){this.orderCustomerForm.patchValue({name:e.name,mobile:e.mobile,address:e.address,email:e.email}),this.selectedCustomerId=e._id,this.orderCustomerForm.disable(),this.orderCustomerForm.get("name").enable()}addNewCustomer(){return(0,u.mG)(this,void 0,void 0,function*(){const e=this.getOrderCustomerFormData(),i=yield this.customerService.addCustomer(e);this.selectedCustomerId=i._id})}resetCustomerForm(){this.orderCustomerForm.enable(),this.orderCustomerForm.reset(),this.selectedCustomerId=null}selectItem(e){this.selectedItem=this.helperService._clone(e),this.enableItemAddButton=!0}addItemToBill(){const e={item:this.selectedItem,itemPrice:this.selectedItem.price,quantity:this.getItemQuantityFromForm()};this.viewBillItems.push(e),this.updateBillTable(),this.enableItemAddButton=!1,this.selectedItem=null,this.orderItemForm.get("name").reset(),this.orderItemForm.get("quantity").reset(),this.itemTable.renderRows()}removeItemFromBill(e){this.viewBillItems=this.viewBillItems.filter(i=>i.item._id!==e.item._id),this.itemTable.renderRows(),this.updateBillTable(),this.orderItemForm.get("name").updateValueAndValidity()}resetItemForm(){this.orderItemForm.reset({discount:0,deliveryDate:this._getBrowserDateTimeString()}),this.selectedItem=null,this.enableItemAddButton=!1,this.viewBillItems=[],this.billData=[]}clearItemSelection(){this.orderItemForm.get("name").reset(),this.orderItemForm.get("quantity").reset(),this.enableItemAddButton=!1}closeDialog(){this.dialogRef.close()}enableAction(){return this.orderCustomerForm.valid&&(this.orderCustomerForm.dirty||this.orderItemForm.dirty||this.viewBillItems.length!==this.orderData.billItems.length)&&this.viewBillItems.length&&this.billData.length&&!this.enableItemAddButton}generateNewOrderObject(){return(0,u.mG)(this,void 0,void 0,function*(){const e=this.viewBillItems.map(n=>({item:n.item._id,itemPrice:n.itemPrice,quantity:n.quantity}));return this.selectedCustomerId||(yield this.addNewCustomer()),{customer:this.selectedCustomerId,billItems:e,billAmount:this.billData[0].billAmount,discount:this.orderItemForm.get("discount").value,deliveryDate:new Date(this.orderItemForm.get("deliveryDate").value).toISOString()}})}initCustomerForm(){"Add"===this.formType?this.orderCustomerForm=new a.cw({name:new a.NI(null,[a.kI.required.bind(this),S.F]),mobile:new a.NI(null,a.kI.required.bind(this)),address:new a.NI(null),email:new a.NI(null,a.kI.email.bind(this)),birthday:new a.cw({day:new a.NI(null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(null,[a.kI.min(1),a.kI.max(12)])}),anniversary:new a.cw({day:new a.NI(null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(null,[a.kI.min(1),a.kI.max(12)])})}):(this.orderCustomerForm=new a.cw({name:new a.NI(this.orderData.customer.name,[a.kI.required.bind(this),S.F]),mobile:new a.NI(this.orderData.customer.mobile,a.kI.required.bind(this)),address:new a.NI(this.orderData.customer.address),email:new a.NI(this.orderData.customer.email,a.kI.email.bind(this)),birthday:new a.cw({day:new a.NI(this.orderData.customer.birthday?this.orderData.customer.birthday.day:null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(this.orderData.customer.birthday?this.orderData.customer.birthday.month:null,[a.kI.min(1),a.kI.max(12)])}),anniversary:new a.cw({day:new a.NI(this.orderData.customer.anniversary?this.orderData.customer.anniversary.day:null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(this.orderData.customer.anniversary?this.orderData.customer.anniversary.month:null,[a.kI.min(1),a.kI.max(12)])})}),this.orderCustomerForm.disable(),this.orderCustomerForm.get("name").enable())}getOrderCustomerFormData(){return this.helperService._clone(this.orderCustomerForm.value)}_customerListFilter(e,i){return i=i||"",e.filter(n=>n.name.toLowerCase().includes(i.toLowerCase()))}initItemForm(){this.orderItemForm=new a.cw({name:new a.NI(null,[a.kI.required.bind(this),S.F]),quantity:new a.NI(null,a.kI.required.bind(this))}),this.orderItemForm.addControl("discount",new a.NI(this.orderData?this.orderData.discount:0));const i=this.orderData?this._getBrowserDateTimeString(this.orderData.deliveryDate):this._getBrowserDateTimeString();this.orderItemForm.addControl("deliveryDate",new a.NI(i,a.kI.required.bind(this)))}initBillItemTable(){this.orderData&&this.orderData.billItems.forEach(e=>{this.viewBillItems.push({item:e.item,itemPrice:e.itemPrice,quantity:e.quantity})})}getItemQuantityFromForm(){return this.orderItemForm.get("quantity").value}_itemListFilter(e,i){return i=i||"",e.filter(n=>n.name.toLowerCase().includes(i.toLowerCase())&&-1===this.viewBillItems.findIndex(l=>l.item._id===n._id))}_getBrowserDateTimeString(e){let i=new Date;return"string"==typeof e&&(i=new Date(e)),`${i.getFullYear()}-${i.getMonth()+1<10?`0${i.getMonth()+1}`:`${i.getMonth()+1}`}-${i.getDate()<10?`0${i.getDate()}`:`${i.getDate()}`}T${i.getHours()<10?`0${i.getHours()}`:`${i.getHours()}`}:${i.getMinutes()<10?`0${i.getMinutes()}`:`${i.getMinutes()}`}`}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.so),t.Y36(N.W),t.Y36(ct.v),t.Y36(ut.e),t.Y36(k),t.Y36(T.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order-form"]],viewQuery:function(e,i){if(1&e&&(t.Gf(d.BZ,5),t.Gf(d.BZ,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.itemTable=n.first),t.iGM(n=t.CRH())&&(i.billTable=n.first)}},decls:138,vars:24,consts:[["mat-dialog-title",""],[1,"flex","order-form-container"],[1,"customer-form-container"],[1,"sub-form-heading"],["mat-icon-button","","color","warn",1,"reset-button",3,"click"],["matTooltip","Reset Customer Form"],[3,"formGroup"],[1,"mar-vr-16"],["appearance","fill",1,"full-width"],["type","text","matInput","","placeholder","Ex: Nikola Tesla","formControlName","name","required","",3,"matAutocomplete"],["autoSuggestCustomers","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","type","number","formControlName","mobile","required",""],["matInput","","formControlName","address","placeholder","Ex: #1 Tesla Road, Nikola City"],["matInput","","type","email","placeholder","Ex. nikola@tesla.com","formControlName","email"],[1,"flex-col"],["formGroupName","birthday",1,"occasion-container","mar-right-16"],["appearance","fill",1,"occasion-input"],["matInput","","type","number","formControlName","day"],[1,"input-separator"],["formControlName","month"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","anniversary",1,"occasion-container"],[1,"separator"],[1,"items-form-container"],["matTooltip","Reset Item Form"],[1,"mar-right-8"],["mat-button","","color","warn","matTooltip","Clear Selected Item",3,"disabled","click"],["appearance","fill",1,"mar-right-16"],["autoSuggestItems","matAutocomplete"],["type","number","matInput","","placeholder","Ex: 1","formControlName","quantity","required",""],["mat-raised-button","","color","primary","matTooltip","Add Item To Order",3,"disabled","click"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","quantity"],["matColumnDef","total"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],[1,"mar-top-32"],["type","number","matInput","","placeholder","Ex: 1","formControlName","discount"],["type","datetime-local","matInput","","formControlName","deliveryDate"],["matColumnDef","totalAmount"],["matColumnDef","discount"],["matColumnDef","billAmount"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value","click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"h4",3),t._uU(6,"Customer Details"),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.resetCustomerForm()}),t.TgZ(8,"mat-icon",5),t._uU(9,"restart_alt"),t.qZA(),t.qZA(),t.TgZ(10,"form",6),t.TgZ(11,"div",7),t.TgZ(12,"mat-form-field",8),t.TgZ(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",9),t.TgZ(16,"mat-autocomplete",null,10),t.YNc(18,ft,6,3,"mat-option",11),t.ALo(19,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"mat-form-field",12),t.TgZ(22,"mat-label"),t._uU(23,"Mobile"),t.qZA(),t._UZ(24,"input",13),t.qZA(),t.qZA(),t.TgZ(25,"div",7),t.TgZ(26,"mat-form-field",8),t.TgZ(27,"mat-label"),t._uU(28,"Address"),t.qZA(),t._UZ(29,"textarea",14),t.qZA(),t.qZA(),t.TgZ(30,"div",7),t.TgZ(31,"mat-form-field",8),t.TgZ(32,"mat-label"),t._uU(33,"Email"),t.qZA(),t._UZ(34,"input",15),t.qZA(),t.qZA(),t.TgZ(35,"div",16),t.TgZ(36,"div",17),t.TgZ(37,"h4"),t._uU(38,"Birthday"),t.qZA(),t.TgZ(39,"mat-form-field",18),t.TgZ(40,"mat-label"),t._uU(41,"Day"),t.qZA(),t._UZ(42,"input",19),t.qZA(),t._UZ(43,"div",20),t.TgZ(44,"mat-form-field",18),t.TgZ(45,"mat-label"),t._uU(46,"Month"),t.qZA(),t.TgZ(47,"mat-select",21),t.YNc(48,Zt,2,2,"mat-option",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",23),t.TgZ(50,"h4"),t._uU(51,"Anniversary"),t.qZA(),t.TgZ(52,"mat-form-field",18),t.TgZ(53,"mat-label"),t._uU(54,"Day"),t.qZA(),t._UZ(55,"input",19),t.qZA(),t._UZ(56,"div",20),t.TgZ(57,"mat-form-field",18),t.TgZ(58,"mat-label"),t._uU(59,"Month"),t.qZA(),t.TgZ(60,"mat-select",21),t.YNc(61,Tt,2,2,"mat-option",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(62,"div",24),t.TgZ(63,"div",25),t.TgZ(64,"h4",3),t._uU(65,"Items Details"),t.qZA(),t.TgZ(66,"button",4),t.NdJ("click",function(){return i.resetItemForm()}),t.TgZ(67,"mat-icon",26),t._uU(68,"restart_alt"),t.qZA(),t.qZA(),t.TgZ(69,"div"),t.TgZ(70,"span",27),t._uU(71,"Choose Item"),t.qZA(),t.TgZ(72,"button",28),t.NdJ("click",function(){return i.clearItemSelection()}),t._uU(73," Clear "),t.qZA(),t.qZA(),t.TgZ(74,"form",6),t.TgZ(75,"div",7),t.TgZ(76,"mat-form-field",29),t.TgZ(77,"mat-label"),t._uU(78,"Item Name"),t.qZA(),t._UZ(79,"input",9),t.TgZ(80,"mat-autocomplete",null,30),t.YNc(82,Ct,2,2,"mat-option",11),t.ALo(83,"async"),t.qZA(),t.qZA(),t.TgZ(84,"mat-form-field",29),t.TgZ(85,"mat-label"),t._uU(86,"Quantity"),t.qZA(),t._UZ(87,"input",31),t.qZA(),t.TgZ(88,"button",32),t.NdJ("click",function(){return i.addItemToBill()}),t._uU(89," Add "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(90,"table",33),t.ynx(91,34),t.YNc(92,bt,2,0,"th",35),t.YNc(93,xt,2,1,"td",36),t.BQk(),t.ynx(94,37),t.YNc(95,At,2,0,"th",35),t.YNc(96,Ot,2,1,"td",36),t.BQk(),t.ynx(97,38),t.YNc(98,vt,2,0,"th",35),t.YNc(99,yt,3,4,"td",36),t.BQk(),t.ynx(100,39),t.YNc(101,Dt,2,0,"th",35),t.YNc(102,wt,2,1,"td",36),t.BQk(),t.ynx(103,40),t.YNc(104,It,2,0,"th",35),t.YNc(105,qt,3,4,"td",36),t.BQk(),t.ynx(106,41),t.YNc(107,St,1,0,"th",35),t.YNc(108,Nt,4,0,"td",36),t.BQk(),t.YNc(109,Ut,1,0,"tr",42),t.YNc(110,kt,1,2,"tr",43),t.qZA(),t.TgZ(111,"form",6),t.TgZ(112,"div",44),t.TgZ(113,"mat-form-field",29),t.TgZ(114,"mat-label"),t._uU(115,"Discount %"),t.qZA(),t._UZ(116,"input",45),t.qZA(),t.TgZ(117,"mat-form-field",12),t.TgZ(118,"mat-label"),t._uU(119,"Delivery Date & Time"),t.qZA(),t._UZ(120,"input",46),t.qZA(),t.qZA(),t.qZA(),t.TgZ(121,"table",33),t.ynx(122,47),t.YNc(123,Mt,2,0,"th",35),t.YNc(124,Ft,3,4,"td",36),t.BQk(),t.ynx(125,48),t.YNc(126,Rt,2,0,"th",35),t.YNc(127,Qt,2,1,"td",36),t.BQk(),t.ynx(128,49),t.YNc(129,Yt,2,0,"th",35),t.YNc(130,Bt,3,4,"td",36),t.BQk(),t.YNc(131,Jt,1,0,"tr",42),t.YNc(132,$t,1,0,"tr",50),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(133,"mat-dialog-actions",51),t.TgZ(134,"button",52),t._uU(135,"Cancel"),t.qZA(),t.TgZ(136,"button",53),t.NdJ("click",function(){return i.executeAction()}),t._uU(137),t.qZA(),t.qZA()),2&e){const n=t.MAs(17),l=t.MAs(81);t.xp6(1),t.hij("",i.formType," Order"),t.xp6(9),t.Q6J("formGroup",i.orderCustomerForm),t.xp6(5),t.Q6J("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",t.lcZ(19,20,i.customerList$)),t.xp6(30),t.Q6J("ngForOf",i.MONTHS),t.xp6(13),t.Q6J("ngForOf",i.MONTHS),t.xp6(11),t.Q6J("disabled",!i.enableItemAddButton||!(null!=i.orderItemForm&&i.orderItemForm.valid)),t.xp6(2),t.Q6J("formGroup",i.orderItemForm),t.xp6(5),t.Q6J("matAutocomplete",l),t.xp6(3),t.Q6J("ngForOf",t.lcZ(83,22,i.itemList$)),t.xp6(6),t.Q6J("disabled",!i.enableItemAddButton||!(null!=i.orderItemForm&&i.orderItemForm.valid)),t.xp6(2),t.Q6J("dataSource",i.viewBillItems),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("formGroup",i.orderItemForm),t.xp6(10),t.Q6J("dataSource",i.billData),t.xp6(10),t.Q6J("matHeaderRowDef",i.billDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.billDisplayedColumns),t.xp6(4),t.Q6J("disabled",!i.enableAction()),t.xp6(1),t.hij(" ",i.formType," ")}},directives:[T.uh,T.xY,D.lW,y.Hw,I.gM,a._Y,a.JL,a.sg,h.KE,h.hX,O.Nt,a.Fj,w.ZL,a.JJ,a.u,a.Q7,w.XC,f.sg,a.wV,a.x0,F.gD,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,T.H8,T.ZT,g.ey,d.ge,d.ev,d.XQ,d.Gk],pipes:[f.Ov,f.H9],styles:[".order-form-container[_ngcontent-%COMP%]   .customer-form-container[_ngcontent-%COMP%]{flex:.25 1 auto}.order-form-container[_ngcontent-%COMP%]   .items-form-container[_ngcontent-%COMP%]{flex:1}.order-form-container[_ngcontent-%COMP%]   .sub-form-heading[_ngcontent-%COMP%]{display:inline-block}.order-form-container[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{float:right}.order-form-container[_ngcontent-%COMP%]   .occasion-input[_ngcontent-%COMP%]{width:100px}.order-form-container[_ngcontent-%COMP%]   .occasion-container[_ngcontent-%COMP%]{position:relative}.order-form-container[_ngcontent-%COMP%]   .input-separator[_ngcontent-%COMP%]{width:0px;border-right:1px solid rgba(0,0,0,.26);display:inline-block;height:35px;position:absolute;margin-top:8px}.order-form-container[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{font-size:10px;color:#f5f5f5}"]}),o})();var Pt=s(7176),Lt=s(7048);const jt=["pendingPaginator"],Et=["pendingSort"],Gt=["soldPaginator"],Ht=["soldSort"];function zt(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1,"No."),t.qZA())}function Vt(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const e=r.index;t.oxw();const i=t.MAs(25);t.xp6(1),t.hij(" ",e+1+(null==i?null:i.pageIndex)*(null==i?null:i.pageSize)," ")}}function Xt(o,r){1&o&&(t.TgZ(0,"th",27),t._uU(1,"Name"),t.qZA())}function Wt(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Kt(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1,"Total Quantity"),t.qZA())}function te(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function ee(o,r){1&o&&t._UZ(0,"tr",28)}function oe(o,r){1&o&&t._UZ(0,"tr",29),2&o&&t.ekj("grey",r.even)}function ie(o,r){1&o&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",31),t._uU(2,"No data found."),t.qZA(),t.qZA())}function re(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1,"No."),t.qZA())}function ne(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const e=r.index;t.oxw();const i=t.MAs(51);t.xp6(1),t.hij(" ",e+1+(null==i?null:i.pageIndex)*(null==i?null:i.pageSize)," ")}}function ae(o,r){1&o&&(t.TgZ(0,"th",27),t._uU(1,"Name"),t.qZA())}function le(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function se(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1,"Total Quantity"),t.qZA())}function de(o,r){if(1&o&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function me(o,r){1&o&&t._UZ(0,"tr",28)}function ce(o,r){1&o&&t._UZ(0,"tr",29),2&o&&t.ekj("grey",r.even)}function ue(o,r){1&o&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",31),t._uU(2,"No data found."),t.qZA(),t.qZA())}const G=function(){return[5,10,25,100]};let pe=(()=>{class o{constructor(e){this.orderService=e,this.displayedColumns=["id","name","quantity"],this.pendingDataSource=new d.by([]),this.soldDataSource=new d.by([]),this.subscriptions=new q.w}ngOnInit(){const e=this.orderService.getOrders().subscribe(i=>{i&&i&&(this.pendingDataSource.data=this.setTableDataSource(i.filter(n=>!n.completed)),this.soldDataSource.data=this.setTableDataSource(i.filter(n=>n.completed)))});this.subscriptions.add(e)}ngAfterViewInit(){this.pendingDataSource.paginator=this.pendingPaginator,this.pendingDataSource.sort=this.pendingSort,this.soldDataSource.paginator=this.soldPaginator,this.soldDataSource.sort=this.soldSort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilterPending(e){this.pendingDataSource.filter=e.target.value.trim().toLowerCase(),this.pendingDataSource.paginator&&this.pendingDataSource.paginator.firstPage()}applyFilterSold(e){this.soldDataSource.filter=e.target.value.trim().toLowerCase(),this.soldDataSource.paginator&&this.soldDataSource.paginator.firstPage()}setTableDataSource(e){const i=new Map,n=[];for(const l of e)for(const m of l.billItems){const c=i.get(m.item.name);c?(c.quantity+=m.quantity,i.set(m.item.name,c)):i.set(m.item.name,{name:m.item.name,quantity:m.quantity})}return i.forEach(l=>{n.push(l)}),n}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order-total-items"]],viewQuery:function(e,i){if(1&e&&(t.Gf(jt,5),t.Gf(Et,5),t.Gf(Gt,5),t.Gf(Ht,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.pendingPaginator=n.first),t.iGM(n=t.CRH())&&(i.pendingSort=n.first),t.iGM(n=t.CRH())&&(i.soldPaginator=n.first),t.iGM(n=t.CRH())&&(i.soldSort=n.first)}},decls:52,vars:12,consts:[[1,"total-items","flex"],[1,"items-table-container"],[1,"title","mar-vr-16"],["appearance","outline","color","accent",1,"mar-right-16"],["matInput","","placeholder","Ex. Samosa",3,"keyup"],["inputPending",""],[1,"pending-items-table"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["pendingSort","matSort"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","quantity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["pendingPaginator",""],[1,"separator"],["inputSold",""],[1,"sold-items-table"],["soldSort","matSort"],["soldPaginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3,"Pending Items"),t.qZA(),t.TgZ(4,"mat-form-field",3),t.TgZ(5,"mat-label"),t._uU(6,"Search"),t.qZA(),t.TgZ(7,"input",4,5),t.NdJ("keyup",function(l){return i.applyFilterPending(l)}),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"table",7,8),t.ynx(12,9),t.YNc(13,zt,2,0,"th",10),t.YNc(14,Vt,2,1,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,Xt,2,0,"th",13),t.YNc(17,Wt,2,1,"td",11),t.BQk(),t.ynx(18,14),t.YNc(19,Kt,2,0,"th",10),t.YNc(20,te,2,1,"td",11),t.BQk(),t.YNc(21,ee,1,0,"tr",15),t.YNc(22,oe,1,2,"tr",16),t.YNc(23,ie,3,0,"tr",17),t.qZA(),t._UZ(24,"mat-paginator",18,19),t.qZA(),t.qZA(),t._UZ(26,"div",20),t.TgZ(27,"div",1),t.TgZ(28,"div",2),t._uU(29,"Sold Items"),t.qZA(),t.TgZ(30,"mat-form-field",3),t.TgZ(31,"mat-label"),t._uU(32,"Search"),t.qZA(),t.TgZ(33,"input",4,21),t.NdJ("keyup",function(l){return i.applyFilterSold(l)}),t.qZA(),t.qZA(),t.TgZ(35,"div",22),t.TgZ(36,"table",7,23),t.ynx(38,9),t.YNc(39,re,2,0,"th",10),t.YNc(40,ne,2,1,"td",11),t.BQk(),t.ynx(41,12),t.YNc(42,ae,2,0,"th",13),t.YNc(43,le,2,1,"td",11),t.BQk(),t.ynx(44,14),t.YNc(45,se,2,0,"th",10),t.YNc(46,de,2,1,"td",11),t.BQk(),t.YNc(47,me,1,0,"tr",15),t.YNc(48,ce,1,2,"tr",16),t.YNc(49,ue,3,0,"tr",17),t.qZA(),t._UZ(50,"mat-paginator",18,24),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(10),t.Q6J("dataSource",i.pendingDataSource),t.xp6(11),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(10,G)),t.xp6(12),t.Q6J("dataSource",i.soldDataSource),t.xp6(11),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(11,G)))},directives:[h.KE,h.hX,O.Nt,d.BZ,b.YE,d.w1,d.fO,d.Dz,d.as,d.nj,d.Ee,A.NW,d.ge,d.ev,b.nU,d.XQ,d.Gk],styles:[".title[_ngcontent-%COMP%]{font-weight:500}.items-table-container[_ngcontent-%COMP%]{flex:1}"]}),o})();function ge(o,r){1&o&&(t.TgZ(0,"mat-icon",41),t._uU(1,"unfold_more"),t.qZA())}function he(o,r){1&o&&(t.TgZ(0,"mat-icon",42),t._uU(1,"unfold_less"),t.qZA())}function _e(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"No."),t.qZA())}function fe(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&o){const e=r.dataIndex,i=t.oxw();t.xp6(1),t.hij(" ",e+1+(null==i.paginator?null:i.paginator.pageIndex)*(null==i.paginator?null:i.paginator.pageSize)," ")}}function Ze(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Customer Name"),t.qZA())}function Te(o,r){1&o&&(t.TgZ(0,"mat-icon",47),t._uU(1,"label_important"),t.qZA())}function Ce(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.YNc(2,Te,2,0,"mat-icon",46),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.xp6(1),t.hij(" ",e.customer.name," "),t.xp6(1),t.Q6J("ngIf",i.isCustomerOccasion(e.customer.birthday)||i.isCustomerOccasion(e.customer.anniversary))}}function be(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Items"),t.qZA())}function xe(o,r){1&o&&(t.TgZ(0,"span"),t._uU(1,"+ 1 other"),t.qZA())}function Ae(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("+ ",e.billItems.length-1," others")}}function Oe(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.YNc(2,xe,2,0,"span",48),t.YNc(3,Ae,2,1,"span",48),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.billItems[0].item.name," "),t.xp6(1),t.Q6J("ngIf",2===e.billItems.length),t.xp6(1),t.Q6J("ngIf",e.billItems.length>2)}}function ve(o,r){1&o&&(t.TgZ(0,"th",49),t._uU(1,"Net Amount"),t.qZA())}function ye(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount,"USD")," ")}}function De(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Created At"),t.qZA())}function we(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMM d, hh:mm a")," ")}}function Ie(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"shortTime")," ")}}function qe(o,r){if(1&o&&(t.TgZ(0,"td",44),t.YNc(1,we,3,4,"span",48),t.YNc(2,Ie,3,4,"span",48),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderDateRange.value.end),t.xp6(1),t.Q6J("ngIf",!e.orderDateRange.value.end)}}function Se(o,r){1&o&&(t.TgZ(0,"th",49),t._uU(1," Delivery Date "),t.qZA())}function Ne(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.deliveryDate,"MMM d, hh:mm a")," ")}}function Ue(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.deliveryDate,"shortTime")," ")}}function ke(o,r){if(1&o&&(t.TgZ(0,"td",44),t.YNc(1,Ne,3,4,"span",48),t.YNc(2,Ue,3,4,"span",48),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderDateRange.value.end),t.xp6(1),t.Q6J("ngIf",!e.orderDateRange.value.end)}}function Me(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Status"),t.qZA())}function Fe(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.completed?"Done":"Pending"," ")}}function Re(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Actions"),t.qZA())}function Qe(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(n){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().completeOrder(l),n.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA(),t.qZA()}}function Ye(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",44),t.TgZ(1,"div",50),t.YNc(2,Qe,3,0,"button",51),t.TgZ(3,"button",52),t.NdJ("click",function(n){const m=t.CHM(e).$implicit;return t.oxw().updateOrder(m),n.stopPropagation()}),t.TgZ(4,"mat-icon"),t._uU(5,"edit"),t.qZA(),t.qZA(),t.TgZ(6,"button",53),t.NdJ("click",function(n){const m=t.CHM(e).$implicit;return t.oxw().deleteOrder(m),n.stopPropagation()}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Q6J("ngIf",!e.completed)}}function Be(o,r){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",57),t.TgZ(2,"a",71),t.TgZ(3,"mat-icon"),t._uU(4,"location_on"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"mat-card-title",58),t._uU(6),t.qZA(),t.TgZ(7,"mat-card-subtitle",59),t._uU(8,"Address"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("href","https://www.google.com/maps/place/"+e.customer.address,t.LSH),t.xp6(4),t.hij("",e.customer.address," ")}}function Je(o,r){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",57),t.TgZ(2,"mat-icon"),t._uU(3,"alternate_email"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",58),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",59),t._uU(7,"Email"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(5),t.hij("",e.customer.email," ")}}function $e(o,r){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",57),t.TgZ(2,"mat-icon"),t._uU(3,"cake"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",58),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",59),t._uU(7,"Birthday"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(5),t.hij("",i.getDateString(e.customer.birthday)," ")}}function Pe(o,r){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",57),t.TgZ(2,"mat-icon"),t._uU(3,"celebration"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",58),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",59),t._uU(7,"Anniversary"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw();t.xp6(5),t.hij("",i.getDateString(e.customer.anniversary)," ")}}function Le(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"No."),t.qZA())}function je(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&o){const e=r.index;t.xp6(1),t.hij(" ",e+1," ")}}function Ee(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Name"),t.qZA())}function Ge(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.item.name," ")}}function He(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Price"),t.qZA())}function ze(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.itemPrice,"USD")," ")}}function Ve(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Quantity"),t.qZA())}function Xe(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function We(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Total Cost"),t.qZA())}function Ke(o,r){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.quantity*e.itemPrice,"USD")," ")}}function to(o,r){1&o&&t._UZ(0,"tr",72)}function eo(o,r){1&o&&t._UZ(0,"tr",73),2&o&&t.ekj("grey",r.even)}function oo(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Total Amount"),t.qZA())}function io(o,r){if(1&o&&(t.TgZ(0,"td",74),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,100*e.billAmount/(100-e.discount),"USD")," ")}}function ro(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Discount"),t.qZA())}function no(o,r){if(1&o&&(t.TgZ(0,"td",74),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.discount,"USD")," ")}}function ao(o,r){1&o&&(t.TgZ(0,"th",43),t._uU(1,"Net Bill Amount"),t.qZA())}function lo(o,r){if(1&o&&(t.TgZ(0,"td",74),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount,"USD")," ")}}function so(o,r){1&o&&t._UZ(0,"tr",72)}function mo(o,r){1&o&&t._UZ(0,"tr",73)}const co=function(o){return[o]};function uo(o,r){if(1&o&&(t.TgZ(0,"td",44),t.TgZ(1,"div",55),t.TgZ(2,"mat-card",56),t.TgZ(3,"mat-card-header"),t.TgZ(4,"div",57),t.TgZ(5,"mat-icon"),t._uU(6,"face"),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-title",58),t._uU(8),t.qZA(),t.TgZ(9,"mat-card-subtitle",59),t._uU(10,"Name"),t.qZA(),t.qZA(),t.YNc(11,Be,9,2,"mat-card-header",48),t.TgZ(12,"mat-card-header"),t.TgZ(13,"div",57),t.TgZ(14,"mat-icon"),t._uU(15,"smartphone"),t.qZA(),t.qZA(),t.TgZ(16,"mat-card-title",58),t._uU(17),t.qZA(),t.TgZ(18,"mat-card-subtitle",59),t._uU(19,"Mobile"),t.qZA(),t.qZA(),t.YNc(20,Je,8,1,"mat-card-header",48),t.YNc(21,$e,8,1,"mat-card-header",48),t.YNc(22,Pe,8,1,"mat-card-header",48),t.qZA(),t.TgZ(23,"mat-card",60),t.TgZ(24,"mat-card-content"),t.TgZ(25,"table",61),t.ynx(26,21),t.YNc(27,Le,2,0,"th",22),t.YNc(28,je,2,1,"td",23),t.BQk(),t.ynx(29,62),t.YNc(30,Ee,2,0,"th",22),t.YNc(31,Ge,2,1,"td",23),t.BQk(),t.ynx(32,63),t.YNc(33,He,2,0,"th",22),t.YNc(34,ze,3,4,"td",23),t.BQk(),t.ynx(35,64),t.YNc(36,Ve,2,0,"th",22),t.YNc(37,Xe,2,1,"td",23),t.BQk(),t.ynx(38,65),t.YNc(39,We,2,0,"th",22),t.YNc(40,Ke,3,4,"td",23),t.BQk(),t.YNc(41,to,1,0,"tr",34),t.YNc(42,eo,1,2,"tr",66),t.qZA(),t.TgZ(43,"table",61),t.ynx(44,67),t.YNc(45,oo,2,0,"th",22),t.YNc(46,io,3,4,"td",68),t.BQk(),t.ynx(47,69),t.YNc(48,ro,2,0,"th",22),t.YNc(49,no,3,4,"td",68),t.BQk(),t.ynx(50,27),t.YNc(51,ao,2,0,"th",22),t.YNc(52,lo,3,4,"td",68),t.BQk(),t.YNc(53,so,1,0,"tr",34),t.YNc(54,mo,1,0,"tr",70),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=r.$implicit,i=t.oxw();t.uIk("colspan",i.displayedColumns.length),t.xp6(1),t.Q6J("@detailExpand",i.checkExpanded(e._id)?"expanded":"collapsed"),t.xp6(7),t.hij("",e.customer.name," "),t.xp6(3),t.Q6J("ngIf",e.customer.address),t.xp6(6),t.hij("",e.customer.mobile," "),t.xp6(3),t.Q6J("ngIf",e.customer.email),t.xp6(1),t.Q6J("ngIf",e.customer.birthday),t.xp6(1),t.Q6J("ngIf",e.customer.anniversary),t.xp6(3),t.Q6J("dataSource",e.billItems),t.xp6(16),t.Q6J("matHeaderRowDef",i.itemDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.itemDisplayedColumns),t.xp6(1),t.Q6J("dataSource",t.VKq(14,co,e)),t.xp6(10),t.Q6J("matHeaderRowDef",i.billDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.billDisplayedColumns)}}function po(o,r){1&o&&t._UZ(0,"tr",72)}function go(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",75),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().toggleRowExpand(l._id)}),t.qZA()}if(2&o){const e=r.$implicit,i=t.oxw();t.ekj("order-expanded-row",i.checkExpanded(e._id))("order-completed-row",e.completed)("order-time-warning-row",!e.completed&&i.isOrderTimeWarning(e.deliveryDate))("order-overdue-warning-row",!e.completed&&i.isOrderOverdue(e.deliveryDate))}}function ho(o,r){1&o&&t._UZ(0,"tr",76)}function _o(o,r){1&o&&(t.TgZ(0,"tr",77),t.TgZ(1,"td",78),t._uU(2,"No data found."),t.qZA(),t.qZA())}const fo=function(){return["expandedDetail"]},Zo=function(){return[5,10,25,100]},To=[{path:"",component:(()=>{class o{constructor(e,i,n){this.orderService=e,this.dialogService=i,this.helperService=n,this.displayedColumns=["id","customerName","items","billAmount","timeCreated","deliveryDate","status","actions"],this.itemDisplayedColumns=["id","name","price","quantity","total"],this.billDisplayedColumns=["totalAmount","discount","billAmount"],this.dataSource=new d.by([]),this.expandedOrderRows=[],this.allOrdersList=[],this.isShowCompletedOrders=!0,this.totalRevenue=0,this.totalItemsSold=0,this.subscriptions=new q.w}ngOnInit(){const e=this.orderService.getOrders().subscribe(n=>{n&&n.length&&(this.allOrdersList=this.helperService._clone(n),this.updateDataSource(),this.updateOrderSummary())});this.initDateRange();const i=this.orderDateRange.valueChanges.subscribe(n=>{this.orderService.updateOrderDateRange(n.start,n.end)});this.subscriptions.add(e),this.subscriptions.add(i)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}checkExpanded(e){return this.expandedOrderRows.includes(e)}toggleRowExpand(e){const i=this.expandedOrderRows.indexOf(e);-1===i?this.expandedOrderRows.push(e):this.expandedOrderRows.splice(i,1)}toggleAllRowsExpand(){this.expandedOrderRows=this.expandedOrderRows.length?[]:this.allOrdersList.map(e=>e._id)}addOrder(){this.dialogService.openDialog(E,_.ib.order)}updateOrder(e){this.dialogService.openDialog(E,Object.assign(Object.assign({},_.ib.order),{data:e}))}completeOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){yield this.orderService.updateOrder(e._id,{completed:!0})})}deleteOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){(yield this.dialogService.openDialog(Pt.z,Object.assign(Object.assign({},_.ib.confirmationDialog),{data:{type:"warning",action:"delete",entity:"order"}})).afterClosed().toPromise())&&(yield this.orderService.deleteOrder(e._id))})}isOrderTimeWarning(e){const i=(new Date).getTime(),n=new Date(e).getTime();return n>=i&&n-i<=18e5}isOrderOverdue(e){const i=(new Date).getTime();return new Date(e).getTime()<=i}isCustomerOccasion(e){if(e){const i=new Date;return i.getDate()===e.day&&i.getMonth()+1===e.month}}getDateString(e){if(e)return`${_.zC.find(i=>i.value===e.month).name}, ${e.day}`}toggleCompletedOrders(){this.isShowCompletedOrders=!this.isShowCompletedOrders,this.updateDataSource()}getNumberOfOrders(e){return e?this.allOrdersList.filter(i=>i.completed).length:this.allOrdersList.filter(i=>!i.completed).length}initDateRange(){const e=this.orderService.getCurrentDateRange();this.orderDateRange=new a.cw({start:new a.NI(e.startDate),end:new a.NI(e.endDate)})}updateDataSource(){if(this.allOrdersList.length){let e=this.allOrdersList.filter(i=>!i.completed);this.isShowCompletedOrders&&(e=[...e,...this.allOrdersList.filter(i=>i.completed)]),this.dataSource.data=e}}updateOrderSummary(){const e=this.allOrdersList.filter(l=>l.completed);let i=0,n=0;for(const l of e){for(const m of l.billItems)i+=m.quantity;n+=l.billAmount}this.totalRevenue=n,this.totalItemsSold=i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k),t.Y36(Lt.x),t.Y36(N.W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-orders"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,5),t.Gf(b.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:74,vars:21,consts:[[1,"order-container","mar-top-16"],[1,"orders","mar-bottom-8"],["appearance","outline","color","accent",1,"mar-right-16"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["mat-button","","matDateRangePickerCancel",""],["mat-raised-button","","color","primary","matDateRangePickerApply",""],["matInput","","placeholder","Ex. Nikola Tesla",3,"keyup"],["input",""],["color","accent",1,"all-orders-toggle",3,"checked","click"],[1,"order-summary","mar-bottom-16"],[1,"mar-right-16","order-info"],[1,"mar-right-16"],["mat-icon-button","","color","accent",3,"click"],["matTooltip","Expand Rows",4,"ngIf"],["matTooltip","Collapse Rows",4,"ngIf"],[1,"orders-table"],["mat-table","","matSort","","multiTemplateDataRows","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customerName"],["mat-cell","","class","order-customer-name",4,"matCellDef"],["matColumnDef","items"],["matColumnDef","billAmount"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","timeCreated"],["matColumnDef","deliveryDate"],["matColumnDef","status"],["matColumnDef","actions"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","order-row",3,"order-expanded-row","order-completed-row","order-time-warning-row","order-overdue-warning-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","order-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["mat-fab","","color","primary",1,"menu-button",3,"click"],["matTooltip","Add New"],["matTooltip","Expand Rows"],["matTooltip","Collapse Rows"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"order-customer-name"],["color","accent","class","order-customer-occasion pad-left-8",4,"ngIf"],["color","accent",1,"order-customer-occasion","pad-left-8"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],[1,"flex"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","",3,"click"],[1,"order-expanded-detail-row"],[1,"customer-card","mar-16"],["mat-card-avatar",""],[1,"customer-card-title"],[1,"customer-card-subtitle"],[1,"item-card","mar-16"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","quantity"],["matColumnDef","total"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["matColumnDef","totalAmount"],["mat-cell","","class","total-table-cell",4,"matCellDef"],["matColumnDef","discount"],["mat-row","",4,"matRowDef","matRowDefColumns"],["target","_blank",1,"direction-icon",3,"href"],["mat-header-row",""],["mat-row",""],["mat-cell","",1,"total-table-cell"],["mat-row","",1,"order-row",3,"click"],["mat-row","",1,"order-detail-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-label"),t._uU(4,"Enter a date range"),t.qZA(),t.TgZ(5,"mat-date-range-input",3),t._UZ(6,"input",4),t._UZ(7,"input",5),t.qZA(),t._UZ(8,"mat-datepicker-toggle",6),t.TgZ(9,"mat-date-range-picker",null,7),t.TgZ(11,"mat-date-range-picker-actions"),t.TgZ(12,"button",8),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",9),t._uU(15," Apply "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",2),t.TgZ(17,"mat-label"),t._uU(18,"Search"),t.qZA(),t.TgZ(19,"input",10,11),t.NdJ("keyup",function(l){return i.applyFilter(l)}),t.qZA(),t.qZA(),t.TgZ(21,"mat-slide-toggle",12),t.NdJ("click",function(){return i.toggleCompletedOrders()}),t._uU(22," Show Completed Orders "),t.qZA(),t.TgZ(23,"div"),t.TgZ(24,"div",13),t.TgZ(25,"span",14),t._uU(26),t.qZA(),t.TgZ(27,"span",15),t._uU(28),t.qZA(),t.TgZ(29,"span",15),t._uU(30),t.qZA(),t.TgZ(31,"span",15),t._uU(32),t.ALo(33,"currency"),t.qZA(),t.qZA(),t.TgZ(34,"button",16),t.NdJ("click",function(){return i.toggleAllRowsExpand()}),t.YNc(35,ge,2,0,"mat-icon",17),t.YNc(36,he,2,0,"mat-icon",18),t.qZA(),t.qZA(),t.TgZ(37,"div",19),t.TgZ(38,"table",20),t.ynx(39,21),t.YNc(40,_e,2,0,"th",22),t.YNc(41,fe,2,1,"td",23),t.BQk(),t.ynx(42,24),t.YNc(43,Ze,2,0,"th",22),t.YNc(44,Ce,3,2,"td",25),t.BQk(),t.ynx(45,26),t.YNc(46,be,2,0,"th",22),t.YNc(47,Oe,4,3,"td",23),t.BQk(),t.ynx(48,27),t.YNc(49,ve,2,0,"th",28),t.YNc(50,ye,3,4,"td",23),t.BQk(),t.ynx(51,29),t.YNc(52,De,2,0,"th",22),t.YNc(53,qe,3,2,"td",23),t.BQk(),t.ynx(54,30),t.YNc(55,Se,2,0,"th",28),t.YNc(56,ke,3,2,"td",23),t.BQk(),t.ynx(57,31),t.YNc(58,Me,2,0,"th",22),t.YNc(59,Fe,2,1,"td",23),t.BQk(),t.ynx(60,32),t.YNc(61,Re,2,0,"th",22),t.YNc(62,Ye,9,1,"td",23),t.BQk(),t.ynx(63,33),t.YNc(64,uo,55,16,"td",23),t.BQk(),t.YNc(65,po,1,0,"tr",34),t.YNc(66,go,1,8,"tr",35),t.YNc(67,ho,1,0,"tr",36),t.YNc(68,_o,3,0,"tr",37),t.qZA(),t._UZ(69,"mat-paginator",38),t.qZA(),t.qZA(),t._UZ(70,"app-order-total-items"),t.qZA(),t.TgZ(71,"button",39),t.NdJ("click",function(){return i.addOrder()}),t.TgZ(72,"mat-icon",40),t._uU(73,"receipt"),t.qZA(),t.qZA()),2&e){const n=t.MAs(10);t.xp6(5),t.Q6J("formGroup",i.orderDateRange)("rangePicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(13),t.Q6J("checked",!0),t.xp6(5),t.hij("Pending Orders: ",i.getNumberOfOrders(!1),""),t.xp6(2),t.hij("Completed Orders: ",i.getNumberOfOrders(!0),""),t.xp6(2),t.hij("Total Items Sold: ",i.totalItemsSold,""),t.xp6(2),t.hij("Total Revenue: ",t.xi3(33,16,i.totalRevenue,"USD"),""),t.xp6(3),t.Q6J("ngIf",!i.expandedOrderRows.length),t.xp6(1),t.Q6J("ngIf",i.expandedOrderRows.length),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(27),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(19,fo)),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(20,Zo))}},directives:[h.KE,h.hX,p.wx,a.JL,a.sg,p.zY,a.Fj,a.JJ,a.u,p.By,p.nW,h.R9,p._g,p.M5,D.lW,p.dp,p.DK,O.Nt,Y,f.O5,d.BZ,b.YE,d.w1,d.fO,d.Dz,d.as,d.nj,d.Ee,A.NW,pe,y.Hw,I.gM,d.ge,d.ev,b.nU,Z.a8,Z.dk,Z.kc,Z.n5,Z.$j,Z.dn,d.XQ,d.Gk],pipes:[f.H9,f.uU],styles:["tr.order-detail-row[_ngcontent-%COMP%]{height:0}tr.order-row[_ngcontent-%COMP%]:not(.order-expanded-row):hover{background:whitesmoke}tr.order-row[_ngcontent-%COMP%]:not(.order-expanded-row):active{background:#efefef}.order-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.order-expanded-detail-row[_ngcontent-%COMP%]{overflow:hidden;display:flex}.order-completed-row[_ngcontent-%COMP%]{background-color:#00ff0040!important}.order-time-warning-row[_ngcontent-%COMP%]{background-color:#ff910040!important}.order-overdue-warning-row[_ngcontent-%COMP%]{background-color:#ff000040!important}.order-customer-name[_ngcontent-%COMP%]{position:relative}.order-customer-name[_ngcontent-%COMP%]   .order-customer-occasion[_ngcontent-%COMP%]{position:absolute;top:10px}.row-expand-toggle[_ngcontent-%COMP%]{float:right;margin-right:16px!important}.customer-card[_ngcontent-%COMP%]{max-width:400px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.customer-card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.customer-card-subtitle[_ngcontent-%COMP%]{font-size:12px}.item-card[_ngcontent-%COMP%]{flex-grow:.5}.total-table-cell[_ngcontent-%COMP%]{border-top:1px solid black;border-bottom:1px solid black}.direction-icon[_ngcontent-%COMP%]{text-decoration:none;color:initial}.all-orders-toggle[_ngcontent-%COMP%]{float:right}.order-info[_ngcontent-%COMP%]{font-weight:500}.order-summary[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-radius:5px;padding:8px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;display:inline-block}"],data:{animation:[(0,C.X$)("detailExpand",[(0,C.SB)("collapsed",(0,C.oB)({height:"0px",minHeight:"0"})),(0,C.SB)("expanded",(0,C.oB)({height:"*"})),(0,C.eR)("expanded <=> collapsed",(0,C.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),o})()},{path:"**",redirectTo:"",pathMatch:"full"}];let Co=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[J.Bz.forChild(To)],J.Bz]}),o})();var bo=s(4992);let xo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,Co,bo.m,a.UX,h.lN,d.p0,y.Ps,A.TU,O.c,D.ot,b.JX,w.Bb,p.FA,Z.QW,F.LD,st,I.AV,T.Is]]}),o})()}}]);