"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[592],{3208:($,_,r)=>{r.d(_,{v:()=>E});var h=r(4762),m=r(8312),v=r(6215),a=r(9067),n=r(9670),l=r(4885),p=r(7716),g=r(1841),L=r(4416),f=r(7001),I=r(7048);let E=(()=>{class c{constructor(s,o,t,e){this.http=s,this.helperService=o,this._snackBar=t,this.dialogService=e,this.customerList$=new v.X(null),this.customerUrl=m.a.customerUrl,this.isDataLoaded=!1}addCustomer(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=this.dialogService.openDialog(l.$g,n.ib.spinner),t=yield this.http.post(this.customerUrl,s,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise();o.close();const e=this.getCustomerListValue();return e.length?(e.splice(this.helperService._alphebaticallocationOf(t,e),0,t),this.customerList$.next(e)):this.customerList$.next([t]),this._snackBar.open("Customer added successfully!",null,n.R$.success),t})}getAllCustomers(){return this.isDataLoaded||this.loadCustomers(),this.customerList$.asObservable()}getCustomer(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=this.getCustomerListValue();for(const i of o)if(i._id===s)return i;const t=this.dialogService.openDialog(l.$g,n.ib.spinner),e=yield this.http.get(`${this.customerUrl}/${s}`,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise();return t.close(),e})}updateCustomer(s,o){return(0,h.mG)(this,void 0,void 0,function*(){const t=this.dialogService.openDialog(l.$g,n.ib.spinner),e=yield this.http.patch(`${this.customerUrl}/${s}`,o,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise();t.close();const i=this.getCustomerListValue(),d=i.findIndex(u=>u._id===s);-1!==d&&(i.splice(d,1)[0].name.toLocaleLowerCase()===e.name.toLocaleLowerCase()?i.splice(d,0,e):i.length?i.splice(this.helperService._alphebaticallocationOf(e,i),0,e):i.push(e),this.customerList$.next(i),this._snackBar.open("Customer updated successfully!",null,n.R$.success))})}removeCustomer(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=m.a.removeCustomerUrl,t=this.dialogService.openDialog(l.$g,n.ib.spinner);yield this.http.patch(`${o}/${s}`,null,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise(),t.close();const e=this.customerList$.getValue(),i=e.findIndex(d=>d._id===s);-1!==i&&(e.splice(i,1),this.customerList$.next(e)),this._snackBar.open("Customer removed successfully!",null,n.R$.success)})}deleteCustomer(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=this.dialogService.openDialog(l.$g,n.ib.spinner);yield this.http.delete(`${this.customerUrl}/${s}`,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise(),o.close();const t=this.customerList$.getValue(),e=t.findIndex(i=>i._id===s);-1!==e&&(t.splice(e,1),this.customerList$.next(t)),this._snackBar.open("Customer deleted successfully!",null,n.R$.success)})}loadCustomers(){const s=this.dialogService.openDialog(l.$g,n.ib.spinner);this.http.get(m.a.allCustomersUrl,{params:{shopId:a.cQ.storageHelper.shopId}}).subscribe(o=>{this.customerList$.next(o),this.isDataLoaded=!0,s.close()})}getCustomerListValue(){return this.customerList$.getValue()}}return c.\u0275fac=function(s){return new(s||c)(p.LFG(g.eN),p.LFG(L.W),p.LFG(f.ux),p.LFG(I.x))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},7672:($,_,r)=>{r.d(_,{e:()=>E});var h=r(4762),m=r(8312),v=r(6215),a=r(9067),n=r(9670),l=r(4885),p=r(7716),g=r(1841),L=r(4416),f=r(7001),I=r(7048);let E=(()=>{class c{constructor(s,o,t,e){this.http=s,this.helperService=o,this._snackBar=t,this.dialogService=e,this.itemList$=new v.X(null),this.itemUrl=m.a.itemUrl,this.isDataLoaded=!1}addItem(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=this.dialogService.openDialog(l.$g,n.ib.spinner),t=yield this.http.post(this.itemUrl,s,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise();o.close();const e=this.getItemListValue();return e.length?(e.splice(this.helperService._alphebaticallocationOf(t,e),0,t),this.itemList$.next(e)):this.itemList$.next([t]),this._snackBar.open("Item added successfully!",null,n.R$.success),t})}getAllItems(){return this.isDataLoaded||this.loadItems(),this.itemList$.asObservable()}getItem(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=this.getItemListValue();for(const i of o)if(i._id===s)return i;const t=this.dialogService.openDialog(l.$g,n.ib.spinner),e=yield this.http.get(`${this.itemUrl}/${s}`,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise();return t.close(),e})}updateItem(s,o){return(0,h.mG)(this,void 0,void 0,function*(){const t=this.dialogService.openDialog(l.$g,n.ib.spinner),e=yield this.http.patch(`${this.itemUrl}/${s}`,o,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise();t.close();const i=this.getItemListValue(),d=i.findIndex(u=>u._id===s);-1!==d&&(i.splice(d,1)[0].name.toLocaleLowerCase()===e.name.toLocaleLowerCase()?i.splice(d,0,e):i.splice(this.helperService._alphebaticallocationOf(e,i),0,e),this.itemList$.next(i),this._snackBar.open("Item updated successfully!",null,n.R$.success))})}removeItem(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=m.a.removeItemUrl,t=this.dialogService.openDialog(l.$g,n.ib.spinner);yield this.http.patch(`${o}/${s}`,null,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise(),t.close();const e=this.itemList$.getValue(),i=e.findIndex(d=>d._id===s);-1!==i&&(e.splice(i,1),this.itemList$.next(e)),this._snackBar.open("Item removed successfully!",null,n.R$.success)})}deleteItem(s){return(0,h.mG)(this,void 0,void 0,function*(){const o=this.dialogService.openDialog(l.$g,n.ib.spinner);yield this.http.delete(`${this.itemUrl}/${s}`,{params:{shopId:a.cQ.storageHelper.shopId}}).toPromise(),o.close();const t=this.itemList$.getValue(),e=t.findIndex(i=>i._id===s);-1!==e&&(t.splice(e,1),this.itemList$.next(t)),this._snackBar.open("Item deleted successfully!",null,n.R$.success)})}loadItems(){const s=this.dialogService.openDialog(l.$g,n.ib.spinner);this.http.get(m.a.allItemsUrl,{params:{shopId:a.cQ.storageHelper.shopId}}).subscribe(o=>{this.itemList$.next(o),this.isDataLoaded=!0,s.close()})}getItemListValue(){return this.itemList$.getValue()}}return c.\u0275fac=function(s){return new(s||c)(p.LFG(g.eN),p.LFG(L.W),p.LFG(f.ux),p.LFG(I.x))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);