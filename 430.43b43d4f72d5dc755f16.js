"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[430],{8430:(Or,P,d)=>{d.r(P),d.d(P,{OrdersModule:()=>Tr});var Z=d(8583),s=d(3679),f=d(8295),m=d(2789),b=d(6627),A=d(9692),v=d(9983),w=d(1095),O=d(1494),I=d(5781),g=d(3220),T=d(3738),Y=d(7441),Q=d(5396),q=d(1436),C=d(2238),B=d(4655),p=d(4762),_=d(7238),H=d(9765),S=d(5319),U=d(739),y=d(9761),$=d(8002),E=d(3342),N=d(7165),u=d(9670),t=d(7716),F=d(4416),G=d(3208),z=d(7672),R=d(8312),x=d(9067),V=d(6215),D=d(4885),J=d(1841);let W=(()=>{class r{constructor(e){this.http=e}generateReceiptForOrder(e){return(0,p.mG)(this,void 0,void 0,function*(){yield this.http.post(`${R.a.receiptForOrderUrl}/${e}`,null,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise()})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(J.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var X=d(2266),K=d(7001),M=d(7048);let k=(()=>{class r{constructor(e,o,n,a,l,c){this.http=e,this.receiptService=o,this.helperService=n,this.reportService=a,this._snackBar=l,this.dialogService=c,this.orderList$=new V.X(null),this.orderUrl=R.a.orderUrl,this.isDataLoaded=!1,this.initDate()}initDate(){const e=this.helperService._getDateRange(new Date);this.startOfRange=e.startOfRange,this.endOfRange=e.endOfRange}getOrders(){return this.isDataLoaded||this.loadOrders(),this.orderList$.asObservable()}getCurrentDateRange(){return{startDate:this.startOfRange,endDate:this.endDate}}updateOrderDateRange(e,o){const n=this.helperService._getDateRange(e,o);this.startOfRange=n.startOfRange,this.endOfRange=n.endOfRange,o&&(this.endDate=o),this.getOrdersFromCache()||this.loadOrders()}addOrder(e){return(0,p.mG)(this,void 0,void 0,function*(){const o=this.dialogService.openDialog(D.$g,u.ib.spinner),n=yield this.http.post(this.orderUrl,e,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise();if(o.close(),this.orderCache.startOfRange<=new Date(n.deliveryDate)&&this.orderCache.endOfRange>=new Date(n.deliveryDate)&&this.orderCache.orders.push(n),this.isOrderInRange(n.deliveryDate)){const a=this.getOrderListValue();a.length?(a.splice(this.helperService._deliveryDateLocationOf(n,a),0,n),this.orderList$.next(a)):this.orderList$.next([n])}return this._snackBar.open("Order added successfully!",null,u.R$.success),n})}updateOrder(e,o){return(0,p.mG)(this,void 0,void 0,function*(){const n=this.dialogService.openDialog(D.$g,u.ib.spinner),a=yield this.http.patch(`${this.orderUrl}/${e}`,o,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise();if(n.close(),this.orderCache){const h=this.orderCache.orders.findIndex(Cr=>Cr._id===e);-1!==h&&(this.orderCache.orders[h]=this.helperService._clone(a))}const l=this.getOrderListValue(),c=l.findIndex(h=>h._id===e);-1!==c&&(l.splice(c,1)[0].deliveryDate===a.deliveryDate?l.splice(c,0,a):this.isOrderInRange(a.deliveryDate)&&(l.length?l.splice(this.helperService._deliveryDateLocationOf(a,l),0,a):l.push(a)),this.orderList$.next(l),this._snackBar.open("Order updated successfully!",null,u.R$.success)),a.paymentCompleted&&a.completed&&(yield this.receiptService.generateReceiptForOrder(e)),this.reportService.refreshData()})}deleteOrder(e){return(0,p.mG)(this,void 0,void 0,function*(){const o=this.dialogService.openDialog(D.$g,u.ib.spinner);yield this.http.delete(`${this.orderUrl}/${e}`,{params:{shopId:x.cQ.storageHelper.shopId}}).toPromise(),o.close();const n=this.orderList$.getValue();if(this.orderCache){const l=this.orderCache.orders.findIndex(c=>c._id===e);-1!==l&&this.orderCache.orders.splice(l,1)}const a=n.findIndex(l=>l._id===e);-1!==a&&(n.splice(a,1),this.orderList$.next(n)),this._snackBar.open("Order deleted successfully!",null,u.R$.success),this.reportService.refreshData()})}clearOrdersCache(){this.orderCache=null}addOrdersToCache(e){const o=this.helperService._clone(e);if(this.orderCache){let n=!1;this.startOfRange<=this.orderCache.startOfRange&&this.endOfRange>=this.orderCache.startOfRange&&(this.orderCache.startOfRange=this.startOfRange,n=!0),this.endOfRange>=this.orderCache.endOfRange&&this.startOfRange<=this.orderCache.endOfRange&&(this.orderCache.endOfRange=this.endOfRange,n=!0),n&&(this.orderCache.orders.length?o.forEach(a=>{const l=this.orderCache.orders.findIndex(c=>c._id===a._id);-1!==l?this.orderCache.orders[l]=a:this.orderCache.orders.push(a)}):this.orderCache.orders=o)}else this.orderCache={startOfRange:this.startOfRange,endOfRange:this.endOfRange,orders:this.helperService._clone(o)}}loadOrders(){const e={shopId:x.cQ.storageHelper.shopId,startDate:this.startOfRange.toISOString(),endDate:this.endOfRange.toISOString()},o=this.dialogService.openDialog(D.$g,u.ib.spinner);this.http.get(R.a.allOrdersUrl,{params:e}).subscribe(n=>{this.orderList$.next(n),this.addOrdersToCache(n),this.isDataLoaded=!0,o.close()})}getOrdersFromCache(){if(this.orderCache&&this.orderCache.startOfRange<=this.startOfRange&&this.orderCache.endOfRange>=this.endOfRange){const e=this.orderCache.orders.filter(o=>new Date(o.deliveryDate)>=this.startOfRange&&new Date(o.deliveryDate)<=this.endOfRange);return this.orderList$.next(e),!0}return!1}getOrderListValue(){return this.orderList$.getValue()}isOrderInRange(e){let o=e;return"string"==typeof e&&(o=new Date(e)),o>=this.startOfRange&&o<this.endOfRange}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(J.eN),t.LFG(W),t.LFG(F.W),t.LFG(X.r),t.LFG(K.ux),t.LFG(M.x))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var tt=d(2458);function et(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-option",62),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().autoFillCustomerForm(a)}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._uU(3," | "),t.TgZ(4,"small"),t._uU(5),t.qZA(),t.qZA()}if(2&r){const e=i.$implicit;t.Q6J("value",e.name),t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij("Mob. No: ",e.mobile,"")}}function rt(r,i){if(1&r&&(t.TgZ(0,"mat-option",63),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function ot(r,i){if(1&r&&(t.TgZ(0,"mat-option",63),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function it(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-option",62),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().selectItem(a)}),t._uU(1),t.qZA()}if(2&r){const e=i.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function nt(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"No."),t.qZA())}function at(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&r){const e=i.index;t.xp6(1),t.hij(" ",e+1," ")}}function st(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Name"),t.qZA())}function lt(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.Oqu(e.item.name)}}function dt(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Price"),t.qZA())}function mt(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.itemPrice,"USD")," ")}}function ct(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Quantity"),t.qZA())}function ut(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.Oqu(e.quantity)}}function pt(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Total Cost"),t.qZA())}function ht(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.quantity*e.itemPrice,"USD")," ")}}function gt(r,i){1&r&&t._UZ(0,"th",64)}function _t(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"td",65),t.TgZ(1,"button",66),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().removeItemFromBill(a)}),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA(),t.qZA(),t.qZA()}}function ft(r,i){1&r&&t._UZ(0,"tr",67)}function Zt(r,i){1&r&&t._UZ(0,"tr",68),2&r&&t.ekj("grey",i.even)}function Tt(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Total Amount"),t.qZA())}function Ct(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.totalAmount,"USD")," ")}}function Ot(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Discount"),t.qZA())}function yt(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.Oqu(e.discount)}}function xt(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Delivery"),t.qZA())}function At(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" +",t.xi3(2,1,e.deliveryCharges,"USD")," ")}}function vt(r,i){1&r&&(t.TgZ(0,"th",64),t._uU(1,"Advance"),t.qZA())}function Dt(r,i){if(1&r&&(t.TgZ(0,"td",65),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" -",t.xi3(2,1,e.advancePayment,"USD")," ")}}function bt(r,i){1&r&&(t.TgZ(0,"th",69),t._uU(1," Net Bill Amount "),t.qZA())}function wt(r,i){if(1&r&&(t.TgZ(0,"td",70),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount-e.advancePayment,"USD")," ")}}function It(r,i){1&r&&t._UZ(0,"tr",67)}function qt(r,i){1&r&&t._UZ(0,"tr",68)}let L=(()=>{class r{constructor(e,o,n,a,l,c){this.dialogRef=e,this.helperService=o,this.customerService=n,this.itemService=a,this.orderService=l,this.orderData=c,this.MONTHS=u.zC,this.viewBillItems=[],this.enableItemAddButton=!1,this.iemRemovedFromBill$=new H.xQ,this.displayedColumns=["id","name","price","quantity","total","actions"],this.billDisplayedColumns=["totalAmount","discount","deliveryCharges","advancePayment","billAmount"],this.subscriptions=new S.w}ngOnInit(){this.orderData?(this.formType="Update",this.selectedCustomerId=this.orderData.customer._id):this.formType="Add",this.initCustomerForm(),this.initItemForm(),this.initBillItemTable(),this.calculateBillData(),this.customerList$=(0,U.aj)([this.customerService.getAllCustomers(),this.orderCustomerForm.get("name").valueChanges.pipe((0,y.O)(""))]).pipe((0,$.U)(([o,n])=>{if(o)return this._customerListFilter(o,n)})),this.itemList$=(0,U.aj)([this.itemService.getAllItems(),this.orderItemForm.get("name").valueChanges.pipe((0,y.O)(""))]).pipe((0,E.b)(()=>{this.enableItemAddButton=!1,this.selectedItem=null}),(0,$.U)(([o,n])=>{if(o)return this._itemListFilter(o,n)}));const e=(0,U.aj)([this.orderItemForm.get("discount").valueChanges.pipe((0,y.O)(0)),this.orderItemForm.get("advancePayment").valueChanges.pipe((0,y.O)(0)),this.orderItemForm.get("deliveryCharges").valueChanges.pipe((0,y.O)(0))]).subscribe(()=>{this.calculateBillData()});this.subscriptions.add(e)}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}executeAction(){"Add"===this.formType?this.addNewOrder():this.updateOrder()}calculateBillData(){if(this.billData=[],this.viewBillItems.length){const e=this.viewBillItems.map(c=>c.itemPrice*c.quantity).reduce((c,h)=>c+h,0);let o=this.orderItemForm.get("discount").value;o=o||0;let n=this.orderItemForm.get("advancePayment").value;n=n||0;let a=this.orderItemForm.get("deliveryCharges").value;a=a||0;const l=e-o/100*e+a;this.orderItemForm.get("advancePayment").setValidators(s.kI.max(l)),this.orderItemForm.get("advancePayment").updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this.billData.push({totalAmount:e,discount:`-$${o/100*e} (${o}%)`,billAmount:l,advancePayment:n,deliveryCharges:a})}}updateBillTable(){this.calculateBillData(),this.billTable.renderRows()}autoFillCustomerForm(e){this.orderCustomerForm.patchValue({name:e.name,mobile:e.mobile,address:e.address,email:e.email}),e.birthday&&this.orderCustomerForm.patchValue({birthday:{day:e.birthday.day,month:e.birthday.month}}),e.anniversary&&this.orderCustomerForm.patchValue({anniversary:{day:e.anniversary.day,month:e.anniversary.month}}),this.selectedCustomerId=e._id,this.orderCustomerForm.disable(),this.orderCustomerForm.get("name").enable()}resetCustomerForm(){this.orderCustomerForm.enable(),this.orderCustomerForm.reset(),this.selectedCustomerId=null}selectItem(e){this.selectedItem=this.helperService._clone(e),this.enableItemAddButton=!0}addItemToBill(){const e={item:this.selectedItem,itemPrice:this.selectedItem.price,quantity:this.getItemQuantityFromForm()};this.viewBillItems.push(e),this.updateBillTable(),this.enableItemAddButton=!1,this.selectedItem=null,this.orderItemForm.get("name").reset(),this.orderItemForm.get("quantity").reset(),this.itemTable.renderRows()}removeItemFromBill(e){this.viewBillItems=this.viewBillItems.filter(o=>o.item._id!==e.item._id),this.itemTable.renderRows(),this.updateBillTable(),this.orderItemForm.get("name").updateValueAndValidity()}resetItemForm(){this.orderItemForm.reset({discount:0,advancePayment:0,deliveryCharges:0,deliveryDate:this._getBrowserDateTimeString()}),this.selectedItem=null,this.enableItemAddButton=!1,this.viewBillItems=[],this.billData=[]}clearItemSelection(){this.orderItemForm.get("name").reset(),this.orderItemForm.get("quantity").reset(),this.enableItemAddButton=!1}enableAction(){return this.orderCustomerForm.valid&&(this.orderCustomerForm.dirty||this.orderItemForm.dirty||this.viewBillItems.length!==this.orderData.billItems.length)&&this.viewBillItems.length&&this.billData.length&&!this.enableItemAddButton&&this.orderItemForm.valid}generateNewOrderObject(){return(0,p.mG)(this,void 0,void 0,function*(){const e=this.viewBillItems.map(n=>({item:n.item._id,itemPrice:n.itemPrice,quantity:n.quantity}));return this.selectedCustomerId||(yield this.addNewCustomer()),{customer:this.selectedCustomerId,billItems:e,billAmount:this.billData[0].billAmount,discount:this.orderItemForm.get("discount").value,advancePayment:this.orderItemForm.get("advancePayment").value,deliveryCharges:this.orderItemForm.get("deliveryCharges").value,deliveryDate:new Date(this.orderItemForm.get("deliveryDate").value).toISOString(),paymentCompleted:this.billData[0].advancePayment===this.billData[0].billAmount}})}addNewOrder(){return(0,p.mG)(this,void 0,void 0,function*(){const e=yield this.generateNewOrderObject();yield this.orderService.addOrder(e),this.closeDialog()})}updateOrder(){return(0,p.mG)(this,void 0,void 0,function*(){const e=yield this.generateNewOrderObject();yield this.orderService.updateOrder(this.orderData._id,e),this.closeDialog()})}initCustomerForm(){"Add"===this.formType?this.orderCustomerForm=new s.cw({name:new s.NI(null,[s.kI.required.bind(this),N.F]),mobile:new s.NI(null,s.kI.required.bind(this)),address:new s.NI(null),email:new s.NI(null,s.kI.email.bind(this)),birthday:new s.cw({day:new s.NI(null,[s.kI.min(1),s.kI.max(31)]),month:new s.NI(null,[s.kI.min(1),s.kI.max(12)])}),anniversary:new s.cw({day:new s.NI(null,[s.kI.min(1),s.kI.max(31)]),month:new s.NI(null,[s.kI.min(1),s.kI.max(12)])})}):(this.orderCustomerForm=new s.cw({name:new s.NI(this.orderData.customer.name,[s.kI.required.bind(this),N.F]),mobile:new s.NI(this.orderData.customer.mobile,s.kI.required.bind(this)),address:new s.NI(this.orderData.customer.address),email:new s.NI(this.orderData.customer.email,s.kI.email.bind(this)),birthday:new s.cw({day:new s.NI(this.orderData.customer.birthday?this.orderData.customer.birthday.day:null,[s.kI.min(1),s.kI.max(31)]),month:new s.NI(this.orderData.customer.birthday?this.orderData.customer.birthday.month:null,[s.kI.min(1),s.kI.max(12)])}),anniversary:new s.cw({day:new s.NI(this.orderData.customer.anniversary?this.orderData.customer.anniversary.day:null,[s.kI.min(1),s.kI.max(31)]),month:new s.NI(this.orderData.customer.anniversary?this.orderData.customer.anniversary.month:null,[s.kI.min(1),s.kI.max(12)])})}),this.orderCustomerForm.disable(),this.orderCustomerForm.get("name").enable())}getOrderCustomerFormData(){return this.helperService._clone(this.orderCustomerForm.value)}_customerListFilter(e,o){return o=o||"",e.filter(n=>n.name.toLowerCase().includes(o.toLowerCase()))}addNewCustomer(){return(0,p.mG)(this,void 0,void 0,function*(){const e=this.getOrderCustomerFormData(),o=yield this.customerService.addCustomer(e);this.selectedCustomerId=o._id})}initItemForm(){this.orderItemForm=new s.cw({name:new s.NI(null,N.F),quantity:new s.NI(null,s.kI.min(1))}),this.orderItemForm.addControl("discount",new s.NI(this.orderData?this.orderData.discount:0,[s.kI.min(0),s.kI.max(100)])),this.orderItemForm.addControl("advancePayment",new s.NI(this.orderData?this.orderData.advancePayment:0,s.kI.min(0))),this.orderItemForm.addControl("deliveryCharges",new s.NI(this.orderData?this.orderData.deliveryCharges:0,s.kI.min(0)));const a=this.orderData?this._getBrowserDateTimeString(this.orderData.deliveryDate):this._getBrowserDateTimeString();this.orderItemForm.addControl("deliveryDate",new s.NI(a,s.kI.required.bind(this)))}initBillItemTable(){this.orderData&&this.orderData.billItems.forEach(e=>{this.viewBillItems.push({item:e.item,itemPrice:e.itemPrice,quantity:e.quantity})})}getItemQuantityFromForm(){return this.orderItemForm.get("quantity").value}_itemListFilter(e,o){return o=o||"",e.filter(n=>n.name.toLowerCase().includes(o.toLowerCase())&&-1===this.viewBillItems.findIndex(a=>a.item._id===n._id))}_getBrowserDateTimeString(e){let o=new Date;return"string"==typeof e&&(o=new Date(e)),`${o.getFullYear()}-${o.getMonth()+1<10?`0${o.getMonth()+1}`:`${o.getMonth()+1}`}-${o.getDate()<10?`0${o.getDate()}`:`${o.getDate()}`}T${o.getHours()<10?`0${o.getHours()}`:`${o.getHours()}`}:${o.getMinutes()<10?`0${o.getMinutes()}`:`${o.getMinutes()}`}`}closeDialog(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(C.so),t.Y36(F.W),t.Y36(G.v),t.Y36(z.e),t.Y36(k),t.Y36(C.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-form"]],viewQuery:function(e,o){if(1&e&&(t.Gf(m.BZ,5),t.Gf(m.BZ,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.itemTable=n.first),t.iGM(n=t.CRH())&&(o.billTable=n.first)}},decls:153,vars:24,consts:[["mat-dialog-title",""],[1,"flex","order-form-container"],[1,"customer-form-container"],[1,"sub-form-heading"],["mat-icon-button","","color","warn",1,"reset-button",3,"click"],["matTooltip","Reset Customer Form"],[3,"formGroup"],[1,"mar-vr-16"],["appearance","fill",1,"full-width"],["type","text","matInput","","placeholder","Ex: Nikola Tesla","formControlName","name","required","",3,"matAutocomplete"],["autoSuggestCustomers","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","type","number","formControlName","mobile","required",""],["matInput","","formControlName","address","placeholder","Ex: #1 Tesla Road, Nikola City"],["matInput","","type","email","placeholder","Ex. nikola@tesla.com","formControlName","email"],[1,"flex-col"],["formGroupName","birthday",1,"occasion-container","mar-right-16"],["appearance","fill",1,"occasion-input"],["matInput","","type","number","formControlName","day"],[1,"input-separator"],["formControlName","month"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","anniversary",1,"occasion-container"],[1,"separator"],[1,"items-form-container"],["matTooltip","Reset Item Form"],[1,"mar-right-8"],["mat-button","","color","warn","matTooltip","Clear Selected Item",3,"disabled","click"],["appearance","fill",1,"mar-right-16"],["type","text","matInput","","placeholder","Ex: Nikola Tesla","formControlName","name",3,"matAutocomplete"],["autoSuggestItems","matAutocomplete"],["type","number","matInput","","placeholder","Ex: 1","formControlName","quantity"],["mat-raised-button","","color","primary","matTooltip","Add Item To Order",3,"disabled","click"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","quantity"],["matColumnDef","total"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],[1,"mar-top-32"],["type","number","matInput","","placeholder","Ex: 1","formControlName","discount"],["type","datetime-local","matInput","","formControlName","deliveryDate"],[1,"mar-top-16"],["type","number","matInput","","placeholder","Ex: 1","formControlName","deliveryCharges"],["type","number","matInput","","placeholder","Ex: 1","formControlName","advancePayment"],["matColumnDef","totalAmount"],["matColumnDef","discount"],["matColumnDef","deliveryCharges"],["matColumnDef","advancePayment"],["matColumnDef","billAmount"],["mat-header-cell","","class","net-bill-column",4,"matHeaderCellDef"],["mat-cell","","class","net-bill-column",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value","click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],["mat-header-cell","",1,"net-bill-column"],["mat-cell","",1,"net-bill-column"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"h4",3),t._uU(6,"Customer Details"),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return o.resetCustomerForm()}),t.TgZ(8,"mat-icon",5),t._uU(9,"restart_alt"),t.qZA(),t.qZA(),t.TgZ(10,"form",6),t.TgZ(11,"div",7),t.TgZ(12,"mat-form-field",8),t.TgZ(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",9),t.TgZ(16,"mat-autocomplete",null,10),t.YNc(18,et,6,3,"mat-option",11),t.ALo(19,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"mat-form-field",12),t.TgZ(22,"mat-label"),t._uU(23,"Mobile"),t.qZA(),t._UZ(24,"input",13),t.qZA(),t.qZA(),t.TgZ(25,"div",7),t.TgZ(26,"mat-form-field",8),t.TgZ(27,"mat-label"),t._uU(28,"Address"),t.qZA(),t._UZ(29,"textarea",14),t.qZA(),t.qZA(),t.TgZ(30,"div",7),t.TgZ(31,"mat-form-field",8),t.TgZ(32,"mat-label"),t._uU(33,"Email"),t.qZA(),t._UZ(34,"input",15),t.qZA(),t.qZA(),t.TgZ(35,"div",16),t.TgZ(36,"div",17),t.TgZ(37,"h4"),t._uU(38,"Birthday"),t.qZA(),t.TgZ(39,"mat-form-field",18),t.TgZ(40,"mat-label"),t._uU(41,"Day"),t.qZA(),t._UZ(42,"input",19),t.qZA(),t._UZ(43,"div",20),t.TgZ(44,"mat-form-field",18),t.TgZ(45,"mat-label"),t._uU(46,"Month"),t.qZA(),t.TgZ(47,"mat-select",21),t.YNc(48,rt,2,2,"mat-option",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",23),t.TgZ(50,"h4"),t._uU(51,"Anniversary"),t.qZA(),t.TgZ(52,"mat-form-field",18),t.TgZ(53,"mat-label"),t._uU(54,"Day"),t.qZA(),t._UZ(55,"input",19),t.qZA(),t._UZ(56,"div",20),t.TgZ(57,"mat-form-field",18),t.TgZ(58,"mat-label"),t._uU(59,"Month"),t.qZA(),t.TgZ(60,"mat-select",21),t.YNc(61,ot,2,2,"mat-option",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(62,"div",24),t.TgZ(63,"div",25),t.TgZ(64,"h4",3),t._uU(65,"Items Details"),t.qZA(),t.TgZ(66,"button",4),t.NdJ("click",function(){return o.resetItemForm()}),t.TgZ(67,"mat-icon",26),t._uU(68,"restart_alt"),t.qZA(),t.qZA(),t.TgZ(69,"div"),t.TgZ(70,"span",27),t._uU(71,"Choose Item"),t.qZA(),t.TgZ(72,"button",28),t.NdJ("click",function(){return o.clearItemSelection()}),t._uU(73," Clear "),t.qZA(),t.qZA(),t.TgZ(74,"form",6),t.TgZ(75,"div",7),t.TgZ(76,"mat-form-field",29),t.TgZ(77,"mat-label"),t._uU(78,"Item Name"),t.qZA(),t._UZ(79,"input",30),t.TgZ(80,"mat-autocomplete",null,31),t.YNc(82,it,2,2,"mat-option",11),t.ALo(83,"async"),t.qZA(),t.qZA(),t.TgZ(84,"mat-form-field",29),t.TgZ(85,"mat-label"),t._uU(86,"Quantity"),t.qZA(),t._UZ(87,"input",32),t.qZA(),t.TgZ(88,"button",33),t.NdJ("click",function(){return o.addItemToBill()}),t._uU(89," Add "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(90,"table",34),t.ynx(91,35),t.YNc(92,nt,2,0,"th",36),t.YNc(93,at,2,1,"td",37),t.BQk(),t.ynx(94,38),t.YNc(95,st,2,0,"th",36),t.YNc(96,lt,2,1,"td",37),t.BQk(),t.ynx(97,39),t.YNc(98,dt,2,0,"th",36),t.YNc(99,mt,3,4,"td",37),t.BQk(),t.ynx(100,40),t.YNc(101,ct,2,0,"th",36),t.YNc(102,ut,2,1,"td",37),t.BQk(),t.ynx(103,41),t.YNc(104,pt,2,0,"th",36),t.YNc(105,ht,3,4,"td",37),t.BQk(),t.ynx(106,42),t.YNc(107,gt,1,0,"th",36),t.YNc(108,_t,4,0,"td",37),t.BQk(),t.YNc(109,ft,1,0,"tr",43),t.YNc(110,Zt,1,2,"tr",44),t.qZA(),t.TgZ(111,"form",6),t.TgZ(112,"div",45),t.TgZ(113,"mat-form-field",29),t.TgZ(114,"mat-label"),t._uU(115,"Discount %"),t.qZA(),t._UZ(116,"input",46),t.qZA(),t.TgZ(117,"mat-form-field",12),t.TgZ(118,"mat-label"),t._uU(119,"Delivery Date & Time"),t.qZA(),t._UZ(120,"input",47),t.qZA(),t.qZA(),t.TgZ(121,"div",48),t.TgZ(122,"mat-form-field",29),t.TgZ(123,"mat-label"),t._uU(124,"Delivery Charges"),t.qZA(),t._UZ(125,"input",49),t.qZA(),t.TgZ(126,"mat-form-field",29),t.TgZ(127,"mat-label"),t._uU(128,"Advance Payment"),t.qZA(),t._UZ(129,"input",50),t.qZA(),t.qZA(),t.qZA(),t.TgZ(130,"table",34),t.ynx(131,51),t.YNc(132,Tt,2,0,"th",36),t.YNc(133,Ct,3,4,"td",37),t.BQk(),t.ynx(134,52),t.YNc(135,Ot,2,0,"th",36),t.YNc(136,yt,2,1,"td",37),t.BQk(),t.ynx(137,53),t.YNc(138,xt,2,0,"th",36),t.YNc(139,At,3,4,"td",37),t.BQk(),t.ynx(140,54),t.YNc(141,vt,2,0,"th",36),t.YNc(142,Dt,3,4,"td",37),t.BQk(),t.ynx(143,55),t.YNc(144,bt,2,0,"th",56),t.YNc(145,wt,3,4,"td",57),t.BQk(),t.YNc(146,It,1,0,"tr",43),t.YNc(147,qt,1,0,"tr",58),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(148,"mat-dialog-actions",59),t.TgZ(149,"button",60),t._uU(150,"Cancel"),t.qZA(),t.TgZ(151,"button",61),t.NdJ("click",function(){return o.executeAction()}),t._uU(152),t.qZA(),t.qZA()),2&e){const n=t.MAs(17),a=t.MAs(81);t.xp6(1),t.hij("",o.formType," Order"),t.xp6(9),t.Q6J("formGroup",o.orderCustomerForm),t.xp6(5),t.Q6J("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",t.lcZ(19,20,o.customerList$)),t.xp6(30),t.Q6J("ngForOf",o.MONTHS),t.xp6(13),t.Q6J("ngForOf",o.MONTHS),t.xp6(11),t.Q6J("disabled",!o.enableItemAddButton||!(null!=o.orderItemForm&&o.orderItemForm.valid)),t.xp6(2),t.Q6J("formGroup",o.orderItemForm),t.xp6(5),t.Q6J("matAutocomplete",a),t.xp6(3),t.Q6J("ngForOf",t.lcZ(83,22,o.itemList$)),t.xp6(6),t.Q6J("disabled",!o.enableItemAddButton||!(null!=o.orderItemForm&&o.orderItemForm.valid)),t.xp6(2),t.Q6J("dataSource",o.viewBillItems),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("formGroup",o.orderItemForm),t.xp6(19),t.Q6J("dataSource",o.billData),t.xp6(16),t.Q6J("matHeaderRowDef",o.billDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.billDisplayedColumns),t.xp6(4),t.Q6J("disabled",!o.enableAction()),t.xp6(1),t.hij(" ",o.formType," ")}},directives:[C.uh,C.xY,w.lW,b.Hw,q.gM,s._Y,s.JL,s.sg,f.KE,f.hX,v.Nt,s.Fj,I.ZL,s.JJ,s.u,s.Q7,I.XC,Z.sg,s.wV,s.x0,Y.gD,m.BZ,m.w1,m.fO,m.Dz,m.as,m.nj,C.H8,C.ZT,tt.ey,m.ge,m.ev,m.XQ,m.Gk],pipes:[Z.Ov,Z.H9],styles:[".customer-form-container[_ngcontent-%COMP%]{flex:.25 1 auto}.items-form-container[_ngcontent-%COMP%]{flex:1}.sub-form-heading[_ngcontent-%COMP%]{display:inline-block}.reset-button[_ngcontent-%COMP%]{float:right}.occasion-input[_ngcontent-%COMP%]{width:100px}.occasion-container[_ngcontent-%COMP%]{position:relative}.input-separator[_ngcontent-%COMP%]{width:0px;border-right:1px solid rgba(0,0,0,.26);display:inline-block;height:35px;position:absolute;margin-top:8px}.item-description[_ngcontent-%COMP%]{font-size:10px;color:#f5f5f5}.net-bill-column[_ngcontent-%COMP%]{font-weight:500!important;color:#000!important}"]}),r})();var St=d(7176),Ut=d(7519),Nt=d(13);const Ft=["pendingPaginator"],Rt=["pendingSort"],kt=["soldPaginator"],Pt=["soldSort"];function Yt(r,i){1&r&&(t.TgZ(0,"th",25),t._uU(1,"No."),t.qZA())}function Qt(r,i){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const e=i.index;t.oxw();const o=t.MAs(25);t.xp6(1),t.hij(" ",e+1+(null==o?null:o.pageIndex)*(null==o?null:o.pageSize)," ")}}function Bt(r,i){1&r&&(t.TgZ(0,"th",27),t._uU(1,"Name"),t.qZA())}function $t(r,i){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Jt(r,i){1&r&&(t.TgZ(0,"th",25),t._uU(1,"Total Quantity"),t.qZA())}function Mt(r,i){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function Lt(r,i){1&r&&t._UZ(0,"tr",28)}function jt(r,i){1&r&&t._UZ(0,"tr",29),2&r&&t.ekj("grey",i.even)}function Ht(r,i){1&r&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",31),t._uU(2,"No data found."),t.qZA(),t.qZA())}function Et(r,i){1&r&&(t.TgZ(0,"th",25),t._uU(1,"No."),t.qZA())}function Gt(r,i){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const e=i.index;t.oxw();const o=t.MAs(51);t.xp6(1),t.hij(" ",e+1+(null==o?null:o.pageIndex)*(null==o?null:o.pageSize)," ")}}function zt(r,i){1&r&&(t.TgZ(0,"th",27),t._uU(1,"Name"),t.qZA())}function Vt(r,i){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Wt(r,i){1&r&&(t.TgZ(0,"th",25),t._uU(1,"Total Quantity"),t.qZA())}function Xt(r,i){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function Kt(r,i){1&r&&t._UZ(0,"tr",28)}function te(r,i){1&r&&t._UZ(0,"tr",29),2&r&&t.ekj("grey",i.even)}function ee(r,i){1&r&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",31),t._uU(2,"No data found."),t.qZA(),t.qZA())}const j=function(){return[5,10,25,100]};let re=(()=>{class r{constructor(e){this.orderService=e,this.displayedColumns=["id","name","quantity"],this.pendingDataSource=new m.by([]),this.soldDataSource=new m.by([]),this.subscriptions=new S.w}ngOnInit(){const e=this.orderService.getOrders().subscribe(o=>{o&&(this.pendingDataSource.data=this.setTableDataSource(o.filter(n=>!(n.completed&&n.paymentCompleted))),this.soldDataSource.data=this.setTableDataSource(o.filter(n=>n.completed&&n.paymentCompleted)))});this.subscriptions.add(e)}ngAfterViewInit(){this.pendingDataSource.paginator=this.pendingPaginator,this.pendingDataSource.sort=this.pendingSort,this.soldDataSource.paginator=this.soldPaginator,this.soldDataSource.sort=this.soldSort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilterPending(e){this.pendingDataSource.filter=e.target.value.trim().toLowerCase(),this.pendingDataSource.paginator&&this.pendingDataSource.paginator.firstPage()}applyFilterSold(e){this.soldDataSource.filter=e.target.value.trim().toLowerCase(),this.soldDataSource.paginator&&this.soldDataSource.paginator.firstPage()}setTableDataSource(e){const o=new Map,n=[];for(const a of e)for(const l of a.billItems){const c=o.get(l.item.name);c?(c.quantity+=l.quantity,o.set(l.item.name,c)):o.set(l.item.name,{name:l.item.name,quantity:l.quantity})}return o.forEach(a=>{n.push(a)}),n}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-total-items"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ft,5),t.Gf(Rt,5),t.Gf(kt,5),t.Gf(Pt,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.pendingPaginator=n.first),t.iGM(n=t.CRH())&&(o.pendingSort=n.first),t.iGM(n=t.CRH())&&(o.soldPaginator=n.first),t.iGM(n=t.CRH())&&(o.soldSort=n.first)}},decls:52,vars:12,consts:[[1,"total-items","flex"],[1,"items-table-container"],[1,"title","mar-vr-16"],["appearance","outline","color","accent",1,"mar-right-16"],["matInput","","placeholder","Ex. Samosa",3,"keyup"],["inputPending",""],[1,"pending-items-table"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["pendingSort","matSort"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","quantity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["pendingPaginator",""],[1,"separator"],["inputSold",""],[1,"sold-items-table"],["soldSort","matSort"],["soldPaginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3,"Pending Items"),t.qZA(),t.TgZ(4,"mat-form-field",3),t.TgZ(5,"mat-label"),t._uU(6,"Search"),t.qZA(),t.TgZ(7,"input",4,5),t.NdJ("keyup",function(a){return o.applyFilterPending(a)}),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"table",7,8),t.ynx(12,9),t.YNc(13,Yt,2,0,"th",10),t.YNc(14,Qt,2,1,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,Bt,2,0,"th",13),t.YNc(17,$t,2,1,"td",11),t.BQk(),t.ynx(18,14),t.YNc(19,Jt,2,0,"th",10),t.YNc(20,Mt,2,1,"td",11),t.BQk(),t.YNc(21,Lt,1,0,"tr",15),t.YNc(22,jt,1,2,"tr",16),t.YNc(23,Ht,3,0,"tr",17),t.qZA(),t._UZ(24,"mat-paginator",18,19),t.qZA(),t.qZA(),t._UZ(26,"div",20),t.TgZ(27,"div",1),t.TgZ(28,"div",2),t._uU(29,"Prepared Items"),t.qZA(),t.TgZ(30,"mat-form-field",3),t.TgZ(31,"mat-label"),t._uU(32,"Search"),t.qZA(),t.TgZ(33,"input",4,21),t.NdJ("keyup",function(a){return o.applyFilterSold(a)}),t.qZA(),t.qZA(),t.TgZ(35,"div",22),t.TgZ(36,"table",7,23),t.ynx(38,9),t.YNc(39,Et,2,0,"th",10),t.YNc(40,Gt,2,1,"td",11),t.BQk(),t.ynx(41,12),t.YNc(42,zt,2,0,"th",13),t.YNc(43,Vt,2,1,"td",11),t.BQk(),t.ynx(44,14),t.YNc(45,Wt,2,0,"th",10),t.YNc(46,Xt,2,1,"td",11),t.BQk(),t.YNc(47,Kt,1,0,"tr",15),t.YNc(48,te,1,2,"tr",16),t.YNc(49,ee,3,0,"tr",17),t.qZA(),t._UZ(50,"mat-paginator",18,24),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(10),t.Q6J("dataSource",o.pendingDataSource),t.xp6(11),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(10,j)),t.xp6(12),t.Q6J("dataSource",o.soldDataSource),t.xp6(11),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(11,j)))},directives:[f.KE,f.hX,v.Nt,m.BZ,O.YE,m.w1,m.fO,m.Dz,m.as,m.nj,m.Ee,A.NW,m.ge,m.ev,O.nU,m.XQ,m.Gk],styles:[".title[_ngcontent-%COMP%]{font-weight:500}.items-table-container[_ngcontent-%COMP%]{flex:1}"]}),r})();function oe(r,i){if(1&r&&(t.TgZ(0,"div",15),t.TgZ(1,"span",17),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.TgZ(4,"span",17),t._uU(5),t.ALo(6,"currency"),t.qZA(),t.qZA()),2&r){const e=t.oxw();t.xp6(2),t.hij("Filtered Revenue: ",t.xi3(3,2,e.filteredRevenue,"USD"),""),t.xp6(3),t.hij("Filtered Booking Amount: ",t.xi3(6,5,e.filteredBookingAmount,"USD"),"")}}function ie(r,i){1&r&&(t.TgZ(0,"mat-icon",49),t._uU(1,"unfold_more"),t.qZA())}function ne(r,i){1&r&&(t.TgZ(0,"mat-icon",50),t._uU(1,"unfold_less"),t.qZA())}function ae(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"No."),t.qZA())}function se(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&r){const e=i.dataIndex,o=t.oxw();t.xp6(1),t.hij(" ",e+1+(null==o.paginator?null:o.paginator.pageIndex)*(null==o.paginator?null:o.paginator.pageSize)," ")}}function le(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Customer Name"),t.qZA())}function de(r,i){1&r&&(t.TgZ(0,"mat-icon",55),t._uU(1,"label_important"),t.qZA())}function me(r,i){if(1&r&&(t.TgZ(0,"td",53),t._uU(1),t.YNc(2,de,2,0,"mat-icon",54),t.qZA()),2&r){const e=i.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",e.customer.name," "),t.xp6(1),t.Q6J("ngIf",o.isCustomerOccasion(e.customer.birthday)||o.isCustomerOccasion(e.customer.anniversary))}}function ce(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Items"),t.qZA())}function ue(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"+ 1 other"),t.qZA())}function pe(r,i){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("+ ",e.billItems.length-1," others")}}function he(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.YNc(2,ue,2,0,"span",46),t.YNc(3,pe,2,1,"span",46),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",e.billItems[0].item.name," "),t.xp6(1),t.Q6J("ngIf",2===e.billItems.length),t.xp6(1),t.Q6J("ngIf",e.billItems.length>2)}}function ge(r,i){1&r&&(t.TgZ(0,"th",56),t._uU(1," Net Amount "),t.qZA())}function _e(r,i){if(1&r&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount-e.advancePayment,"USD")," ")}}function fe(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Created At"),t.qZA())}function Ze(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMM d, hh:mm a")," ")}}function Te(r,i){1&r&&(t.TgZ(0,"th",58),t._uU(1,"Delivery By"),t.qZA())}function Ce(r,i){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.deliveryDate,"MMM d, hh:mm a")," ")}}function Oe(r,i){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.deliveryDate,"shortTime")," ")}}function ye(r,i){if(1&r&&(t.TgZ(0,"td",52),t.YNc(1,Ce,3,4,"span",46),t.YNc(2,Oe,3,4,"span",46),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderDateRange.value.end),t.xp6(1),t.Q6J("ngIf",!e.orderDateRange.value.end)}}function xe(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Status"),t.qZA())}function Ae(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"Finished"),t.qZA())}function ve(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"Payment Pending"),t.qZA())}function De(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"Preperation Pending"),t.qZA())}function be(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"Pending"),t.qZA())}function we(r,i){if(1&r&&(t.TgZ(0,"td",52),t.YNc(1,Ae,2,0,"span",46),t.YNc(2,ve,2,0,"span",46),t.YNc(3,De,2,0,"span",46),t.YNc(4,be,2,0,"span",46),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.completed&&e.paymentCompleted),t.xp6(1),t.Q6J("ngIf",e.completed&&!e.paymentCompleted),t.xp6(1),t.Q6J("ngIf",!e.completed&&e.paymentCompleted),t.xp6(1),t.Q6J("ngIf",!e.completed&&!e.paymentCompleted)}}function Ie(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Actions"),t.qZA())}function qe(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(n){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().completeOrder(a),n.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"playlist_add_check"),t.qZA(),t.qZA()}}function Se(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(n){t.CHM(e);const a=t.oxw().$implicit;return t.oxw().paymentCompleteOrder(a),n.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"price_check"),t.qZA(),t.qZA()}}function Ue(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"td",52),t.TgZ(1,"div",59),t.YNc(2,qe,3,0,"button",60),t.YNc(3,Se,3,0,"button",61),t.TgZ(4,"button",62),t.NdJ("click",function(n){const l=t.CHM(e).$implicit;return t.oxw().updateOrder(l),n.stopPropagation()}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA(),t.qZA(),t.TgZ(7,"button",63),t.NdJ("click",function(n){const l=t.CHM(e).$implicit;return t.oxw().deleteOrder(l),n.stopPropagation()}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=i.$implicit;t.xp6(2),t.Q6J("ngIf",!e.completed),t.xp6(1),t.Q6J("ngIf",!e.paymentCompleted)}}function Ne(r,i){if(1&r&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",68),t.TgZ(2,"a",86),t.TgZ(3,"mat-icon"),t._uU(4,"location_on"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"mat-card-title",69),t._uU(6),t.qZA(),t.TgZ(7,"mat-card-subtitle",70),t._uU(8,"Address"),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("href","https://www.google.com/maps/place/"+e.customer.address,t.LSH),t.xp6(4),t.hij("",e.customer.address," ")}}function Fe(r,i){if(1&r&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",68),t.TgZ(2,"mat-icon"),t._uU(3,"alternate_email"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",69),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",70),t._uU(7,"Email"),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(5),t.hij("",e.customer.email," ")}}function Re(r,i){if(1&r&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",68),t.TgZ(2,"mat-icon"),t._uU(3,"cake"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",69),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",70),t._uU(7,"Birthday"),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit,o=t.oxw();t.xp6(5),t.hij("",o.getDateString(e.customer.birthday)," ")}}function ke(r,i){if(1&r&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",68),t.TgZ(2,"mat-icon"),t._uU(3,"celebration"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",69),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",70),t._uU(7,"Anniversary"),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit,o=t.oxw();t.xp6(5),t.hij("",o.getDateString(e.customer.anniversary)," ")}}function Pe(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"No."),t.qZA())}function Ye(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&r){const e=i.index;t.xp6(1),t.hij(" ",e+1," ")}}function Qe(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Name"),t.qZA())}function Be(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",e.item.name," ")}}function $e(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Price"),t.qZA())}function Je(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.itemPrice,"USD")," ")}}function Me(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Quantity"),t.qZA())}function Le(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function je(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Total Cost"),t.qZA())}function He(r,i){if(1&r&&(t.TgZ(0,"td",52),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.quantity*e.itemPrice,"USD")," ")}}function Ee(r,i){1&r&&t._UZ(0,"tr",87)}function Ge(r,i){1&r&&t._UZ(0,"tr",88),2&r&&t.ekj("grey",i.even)}function ze(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Total Amount"),t.qZA())}function Ve(r,i){if(1&r&&(t.TgZ(0,"td",89),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,100*(e.billAmount-e.deliveryCharges)/(100-e.discount),"USD")," ")}}function We(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Discount"),t.qZA())}function Xe(r,i){if(1&r&&(t.TgZ(0,"td",89),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" -",t.xi3(2,1,e.discount*(e.billAmount-e.deliveryCharges)/(100-e.discount),"USD")," ")}}function Ke(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Delivery"),t.qZA())}function tr(r,i){if(1&r&&(t.TgZ(0,"td",89),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" +",t.xi3(2,1,e.deliveryCharges,"USD")," ")}}function er(r,i){1&r&&(t.TgZ(0,"th",51),t._uU(1,"Advance"),t.qZA())}function rr(r,i){if(1&r&&(t.TgZ(0,"td",89),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" -",t.xi3(2,1,e.advancePayment,"USD")," ")}}function or(r,i){1&r&&(t.TgZ(0,"th",90),t._uU(1," Net Bill Amount "),t.qZA())}function ir(r,i){if(1&r&&(t.TgZ(0,"td",91),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&r){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount-e.advancePayment,"USD")," ")}}function nr(r,i){1&r&&t._UZ(0,"tr",87)}function ar(r,i){1&r&&t._UZ(0,"tr",88)}const sr=function(r){return[r]};function lr(r,i){if(1&r&&(t.TgZ(0,"td",52),t.TgZ(1,"div",66),t.TgZ(2,"mat-card",67),t.TgZ(3,"mat-card-header"),t.TgZ(4,"div",68),t.TgZ(5,"mat-icon"),t._uU(6,"face"),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-title",69),t._uU(8),t.qZA(),t.TgZ(9,"mat-card-subtitle",70),t._uU(10,"Name"),t.qZA(),t.qZA(),t.YNc(11,Ne,9,2,"mat-card-header",46),t.TgZ(12,"mat-card-header"),t.TgZ(13,"div",68),t.TgZ(14,"mat-icon"),t._uU(15,"smartphone"),t.qZA(),t.qZA(),t.TgZ(16,"mat-card-title",69),t._uU(17),t.qZA(),t.TgZ(18,"mat-card-subtitle",70),t._uU(19,"Mobile"),t.qZA(),t.qZA(),t.YNc(20,Fe,8,1,"mat-card-header",46),t.YNc(21,Re,8,1,"mat-card-header",46),t.YNc(22,ke,8,1,"mat-card-header",46),t.qZA(),t.TgZ(23,"mat-card",71),t.TgZ(24,"mat-card-content"),t.TgZ(25,"table",72),t.ynx(26,26),t.YNc(27,Pe,2,0,"th",27),t.YNc(28,Ye,2,1,"td",28),t.BQk(),t.ynx(29,73),t.YNc(30,Qe,2,0,"th",27),t.YNc(31,Be,2,1,"td",28),t.BQk(),t.ynx(32,74),t.YNc(33,$e,2,0,"th",27),t.YNc(34,Je,3,4,"td",28),t.BQk(),t.ynx(35,75),t.YNc(36,Me,2,0,"th",27),t.YNc(37,Le,2,1,"td",28),t.BQk(),t.ynx(38,76),t.YNc(39,je,2,0,"th",27),t.YNc(40,He,3,4,"td",28),t.BQk(),t.YNc(41,Ee,1,0,"tr",41),t.YNc(42,Ge,1,2,"tr",77),t.qZA(),t.TgZ(43,"table",72),t.ynx(44,78),t.YNc(45,ze,2,0,"th",27),t.YNc(46,Ve,3,4,"td",79),t.BQk(),t.ynx(47,80),t.YNc(48,We,2,0,"th",27),t.YNc(49,Xe,3,4,"td",79),t.BQk(),t.ynx(50,81),t.YNc(51,Ke,2,0,"th",27),t.YNc(52,tr,3,4,"td",79),t.BQk(),t.ynx(53,82),t.YNc(54,er,2,0,"th",27),t.YNc(55,rr,3,4,"td",79),t.BQk(),t.ynx(56,32),t.YNc(57,or,2,0,"th",83),t.YNc(58,ir,3,4,"td",84),t.BQk(),t.YNc(59,nr,1,0,"tr",41),t.YNc(60,ar,1,0,"tr",85),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r){const e=i.$implicit,o=t.oxw();t.uIk("colspan",o.displayedColumns.length),t.xp6(1),t.Q6J("@detailExpand",o.checkExpanded(e._id)?"expanded":"collapsed"),t.xp6(7),t.hij("",e.customer.name," "),t.xp6(3),t.Q6J("ngIf",e.customer.address),t.xp6(6),t.hij("",e.customer.mobile," "),t.xp6(3),t.Q6J("ngIf",e.customer.email),t.xp6(1),t.Q6J("ngIf",e.customer.birthday),t.xp6(1),t.Q6J("ngIf",e.customer.anniversary),t.xp6(3),t.Q6J("dataSource",e.billItems),t.xp6(16),t.Q6J("matHeaderRowDef",o.itemDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.itemDisplayedColumns),t.xp6(1),t.Q6J("dataSource",t.VKq(14,sr,e)),t.xp6(16),t.Q6J("matHeaderRowDef",o.billDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.billDisplayedColumns)}}function dr(r,i){1&r&&t._UZ(0,"tr",87)}function mr(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"tr",92),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().toggleRowExpand(a._id)}),t.qZA()}if(2&r){const e=i.$implicit,o=t.oxw();t.ekj("order-expanded-row",o.checkExpanded(e._id))("order-completed-row",e.completed&&e.paymentCompleted)("order-time-warning-row",!(e.completed&&e.paymentCompleted)&&o.isOrderTimeWarning(e.deliveryDate))("order-overdue-warning-row",!(e.completed&&e.paymentCompleted)&&o.isOrderOverdue(e.deliveryDate))}}function cr(r,i){1&r&&t._UZ(0,"tr",93)}function ur(r,i){1&r&&(t.TgZ(0,"tr",94),t.TgZ(1,"td",95),t._uU(2,"No data found."),t.qZA(),t.qZA())}function pr(r,i){1&r&&t._UZ(0,"app-order-total-items")}const hr=function(){return["expandedDetail"]},gr=function(){return[5,10,25,100]},_r=[{path:"",component:(()=>{class r{constructor(e,o,n){this.orderService=e,this.dialogService=o,this.helperService=n,this.displayedColumns=["id","customerName","items","billAmount","timeCreated","deliveryDate","status","actions"],this.itemDisplayedColumns=["id","name","price","quantity","total"],this.billDisplayedColumns=["totalAmount","discount","deliveryCharges","advancePayment","billAmount"],this.dataSource=new m.by([]),this.expandedOrderRows=[],this.allOrdersList=[],this.isShowPaidOrders=!0,this.isShowPreparedOrders=!0,this.isShowFinishedOrders=!0,this.totalRevenue=0,this.totalItemsSold=0,this.totalBookingAmount=0,this.filteredRevenue=0,this.filteredBookingAmount=0,this.showFilterSummary=!1,this.subscriptions=new S.w}ngOnInit(){this.setDataSourceFilter();const e=this.orderService.getOrders().subscribe(n=>{n&&(this.allOrdersList=this.helperService._clone(n),this.updateDataSource(),this.updateOrderSummary())});this.initDateRange();const o=this.orderDateRange.valueChanges.pipe((0,Ut.x)(this.isDateSame.bind(this)),(0,Nt.e)(1e3)).subscribe(n=>{n.end&&n.start.getTime()!==n.end.getTime()?this.orderService.updateOrderDateRange(n.start,n.end):this.orderService.updateOrderDateRange(n.start)});this.subscriptions.add(e),this.subscriptions.add(o)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilter(e){const o=e.target.value;this.dataSource.filter=o.trim().toLowerCase(),""!==o.trim()?(this.updateFilterSummary(),this.showFilterSummary=!0):this.showFilterSummary=!1,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}checkExpanded(e){return this.expandedOrderRows.includes(e)}toggleRowExpand(e){const o=this.expandedOrderRows.indexOf(e);-1===o?this.expandedOrderRows.push(e):this.expandedOrderRows.splice(o,1)}toggleAllRowsExpand(){this.expandedOrderRows=this.expandedOrderRows.length?[]:this.allOrdersList.map(e=>e._id)}addOrder(){this.dialogService.openDialog(L,u.ib.order)}updateOrder(e){this.dialogService.openDialog(L,Object.assign(Object.assign({},u.ib.order),{data:e}))}completeOrder(e){return(0,p.mG)(this,void 0,void 0,function*(){yield this.orderService.updateOrder(e._id,{completed:!0})})}paymentCompleteOrder(e){return(0,p.mG)(this,void 0,void 0,function*(){yield this.orderService.updateOrder(e._id,{paymentCompleted:!0})})}deleteOrder(e){return(0,p.mG)(this,void 0,void 0,function*(){(yield this.dialogService.openDialog(St.z,Object.assign(Object.assign({},u.ib.confirmationDialog),{data:{type:"warning",action:"delete",entity:"order"}})).afterClosed().toPromise())&&(yield this.orderService.deleteOrder(e._id))})}isOrderTimeWarning(e){const o=(new Date).getTime(),n=new Date(e).getTime();return n>=o&&n-o<=18e5}isOrderOverdue(e){const o=(new Date).getTime();return new Date(e).getTime()<=o}isCustomerOccasion(e){if(e){const o=new Date;return o.getDate()===e.day&&o.getMonth()+1===e.month}}getDateString(e){if(e)return`${u.zC.find(o=>o.value===e.month).name}, ${e.day}`}togglePaidOrders(){this.isShowPaidOrders=!this.isShowPaidOrders,this.updateDataSource()}togglePreparedOrders(){this.isShowPreparedOrders=!this.isShowPreparedOrders,this.updateDataSource()}toggleFinishedOrders(){this.isShowFinishedOrders=!this.isShowFinishedOrders,this.updateDataSource()}getNumberOfOrders(e){return e?this.allOrdersList.filter(o=>o.completed&&o.paymentCompleted).length:this.allOrdersList.filter(o=>!(o.completed&&o.paymentCompleted)).length}gotToAdjacentDay(e){const o=this.orderDateRange.get("start").value;let n;"next"===e?(n=new Date(o.getTime()),n.setDate(n.getDate()+1)):(n=new Date(o.getTime()),n.setDate(n.getDate()-1)),this.orderDateRange.get("start").patchValue(n)}initDateRange(){const e=this.orderService.getCurrentDateRange();this.orderDateRange=new s.cw({start:new s.NI(e.startDate),end:new s.NI(e.endDate)})}updateDataSource(){if(this.allOrdersList.length){let e;!this.isShowPaidOrders&&this.isShowPreparedOrders?e=this.allOrdersList.filter(o=>!o.paymentCompleted):this.isShowPaidOrders&&!this.isShowPreparedOrders?e=this.allOrdersList.filter(o=>!o.completed):this.isShowPaidOrders||this.isShowPreparedOrders?this.isShowPaidOrders&&this.isShowPreparedOrders&&(e=this.isShowFinishedOrders?this.helperService._clone(this.allOrdersList):this.allOrdersList.filter(o=>!(o.completed&&o.paymentCompleted))):e=this.allOrdersList.filter(o=>!o.completed&&!o.paymentCompleted),this.dataSource.data=e}else this.dataSource.data=[]}setDataSourceFilter(){this.dataSource.filterPredicate=(e,o)=>{const n=o.toLowerCase(),a=e.billItems.map(c=>c.item.name).join(" ").toLowerCase();return`${e.customer.name.toLowerCase()} ${a}`.includes(n)}}updateOrderSummary(){const e=this.allOrdersList.filter(a=>a.completed&&a.paymentCompleted);let o=0,n=0;for(const a of e){for(const l of a.billItems)o+=l.quantity;n+=a.billAmount}this.totalRevenue=n,this.totalItemsSold=o,this.totalBookingAmount=this.allOrdersList.filter(a=>!(a.completed&&a.paymentCompleted)).reduce((a,l)=>a+l.billAmount,0)}updateFilterSummary(){this.filteredRevenue=this.dataSource.filteredData.filter(e=>e.completed&&e.paymentCompleted).reduce((e,o)=>e+o.billAmount,0),this.filteredBookingAmount=this.dataSource.filteredData.filter(e=>!(e.completed&&e.paymentCompleted)).reduce((e,o)=>e+o.billAmount,0)}isDateSame(e,o){return e.start===o.start&&e.end===o.end}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(k),t.Y36(M.x),t.Y36(F.W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders"]],viewQuery:function(e,o){if(1&e&&(t.Gf(A.NW,5),t.Gf(O.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},decls:88,vars:31,consts:[[1,"order-container","mar-top-16"],[1,"orders","mar-bottom-8"],["appearance","outline","color","accent",1,"mar-right-16"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["mat-button","","matDateRangePickerCancel",""],["mat-raised-button","","color","primary","matDateRangePickerApply",""],["matInput","","placeholder","Ex. Nikola Tesla",3,"keyup"],["input",""],["class","order-summary mar-bottom-16",4,"ngIf"],["color","accent",1,"orders-toggle",3,"checked","click"],["color","accent",1,"orders-toggle","mar-right-16",3,"checked","click"],[1,"order-summary","mar-bottom-16"],[1,"mar-right-16","order-info"],[1,"mar-right-16"],["mat-icon-button","","color","accent",3,"click"],["matTooltip","Expand Rows",4,"ngIf"],["matTooltip","Collapse Rows",4,"ngIf"],["mat-icon-button","","color","accent",3,"disabled","click"],["matTooltip","Previous Day",1,"day-switch-icons"],["matTooltip","Next Day",1,"day-switch-icons"],[1,"orders-table"],["mat-table","","matSort","","multiTemplateDataRows","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customerName"],["mat-cell","","class","order-customer-name",4,"matCellDef"],["matColumnDef","items"],["matColumnDef","billAmount"],["mat-header-cell","","mat-sort-header","","class","net-bill-column",4,"matHeaderCellDef"],["mat-cell","","class","net-bill-column",4,"matCellDef"],["matColumnDef","timeCreated"],["matColumnDef","deliveryDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","status"],["matColumnDef","actions"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","order-row",3,"order-expanded-row","order-completed-row","order-time-warning-row","order-overdue-warning-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","order-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],[4,"ngIf"],["mat-fab","","color","primary",1,"menu-button",3,"click"],["matTooltip","Add New"],["matTooltip","Expand Rows"],["matTooltip","Collapse Rows"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"order-customer-name"],["color","accent","class","order-customer-occasion pad-left-8",4,"ngIf"],["color","accent",1,"order-customer-occasion","pad-left-8"],["mat-header-cell","","mat-sort-header","",1,"net-bill-column"],["mat-cell","",1,"net-bill-column"],["mat-header-cell","","mat-sort-header",""],[1,"flex"],["mat-icon-button","","matTooltip","Complete Preperation",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Complete Payment",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-icon-button","","matTooltip","Complete Preperation",3,"click"],["mat-icon-button","","color","accent","matTooltip","Complete Payment",3,"click"],[1,"order-expanded-detail-row"],[1,"customer-card","mar-16"],["mat-card-avatar",""],[1,"customer-card-title"],[1,"customer-card-subtitle"],[1,"item-card","mar-16"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","quantity"],["matColumnDef","total"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["matColumnDef","totalAmount"],["mat-cell","","class","total-table-cell",4,"matCellDef"],["matColumnDef","discount"],["matColumnDef","deliveryCharges"],["matColumnDef","advancePayment"],["mat-header-cell","","class","net-bill-column",4,"matHeaderCellDef"],["mat-cell","","class","total-table-cell net-bill-column",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["target","_blank",1,"direction-icon",3,"href"],["mat-header-row",""],["mat-row",""],["mat-cell","",1,"total-table-cell"],["mat-header-cell","",1,"net-bill-column"],["mat-cell","",1,"total-table-cell","net-bill-column"],["mat-row","",1,"order-row",3,"click"],["mat-row","",1,"order-detail-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-label"),t._uU(4,"Enter a date range"),t.qZA(),t.TgZ(5,"mat-date-range-input",3),t._UZ(6,"input",4),t._UZ(7,"input",5),t.qZA(),t._UZ(8,"mat-datepicker-toggle",6),t.TgZ(9,"mat-date-range-picker",null,7),t.TgZ(11,"mat-date-range-picker-actions"),t.TgZ(12,"button",8),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",9),t._uU(15," Apply "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",2),t.TgZ(17,"mat-label"),t._uU(18,"Search"),t.qZA(),t.TgZ(19,"input",10,11),t.NdJ("keyup",function(a){return o.applyFilter(a)}),t.qZA(),t.qZA(),t.YNc(21,oe,7,8,"div",12),t.TgZ(22,"mat-slide-toggle",13),t.NdJ("click",function(){return o.toggleFinishedOrders()}),t._uU(23," Show Finished Orders "),t.qZA(),t.TgZ(24,"mat-slide-toggle",14),t.NdJ("click",function(){return o.togglePreparedOrders()}),t._uU(25," Show Prepared Orders "),t.qZA(),t.TgZ(26,"mat-slide-toggle",14),t.NdJ("click",function(){return o.togglePaidOrders()}),t._uU(27," Show Paid Orders "),t.qZA(),t.TgZ(28,"div"),t.TgZ(29,"div",15),t.TgZ(30,"span",16),t._uU(31),t.qZA(),t.TgZ(32,"span",17),t._uU(33),t.qZA(),t.TgZ(34,"span",17),t._uU(35),t.qZA(),t.TgZ(36,"span",17),t._uU(37),t.ALo(38,"currency"),t.qZA(),t.TgZ(39,"span",17),t._uU(40),t.ALo(41,"currency"),t.qZA(),t.qZA(),t.TgZ(42,"button",18),t.NdJ("click",function(){return o.toggleAllRowsExpand()}),t.YNc(43,ie,2,0,"mat-icon",19),t.YNc(44,ne,2,0,"mat-icon",20),t.qZA(),t.TgZ(45,"button",21),t.NdJ("click",function(){return o.gotToAdjacentDay("previous")}),t.TgZ(46,"mat-icon",22),t._uU(47,"arrow_left"),t.qZA(),t.qZA(),t.TgZ(48,"button",21),t.NdJ("click",function(){return o.gotToAdjacentDay("next")}),t.TgZ(49,"mat-icon",23),t._uU(50,"arrow_right"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",24),t.TgZ(52,"table",25),t.ynx(53,26),t.YNc(54,ae,2,0,"th",27),t.YNc(55,se,2,1,"td",28),t.BQk(),t.ynx(56,29),t.YNc(57,le,2,0,"th",27),t.YNc(58,me,3,2,"td",30),t.BQk(),t.ynx(59,31),t.YNc(60,ce,2,0,"th",27),t.YNc(61,he,4,3,"td",28),t.BQk(),t.ynx(62,32),t.YNc(63,ge,2,0,"th",33),t.YNc(64,_e,3,4,"td",34),t.BQk(),t.ynx(65,35),t.YNc(66,fe,2,0,"th",27),t.YNc(67,Ze,3,4,"td",28),t.BQk(),t.ynx(68,36),t.YNc(69,Te,2,0,"th",37),t.YNc(70,ye,3,2,"td",28),t.BQk(),t.ynx(71,38),t.YNc(72,xe,2,0,"th",27),t.YNc(73,we,5,4,"td",28),t.BQk(),t.ynx(74,39),t.YNc(75,Ie,2,0,"th",27),t.YNc(76,Ue,10,2,"td",28),t.BQk(),t.ynx(77,40),t.YNc(78,lr,61,16,"td",28),t.BQk(),t.YNc(79,dr,1,0,"tr",41),t.YNc(80,mr,1,8,"tr",42),t.YNc(81,cr,1,0,"tr",43),t.YNc(82,ur,3,0,"tr",44),t.qZA(),t._UZ(83,"mat-paginator",45),t.qZA(),t.qZA(),t.YNc(84,pr,1,0,"app-order-total-items",46),t.qZA(),t.TgZ(85,"button",47),t.NdJ("click",function(){return o.addOrder()}),t.TgZ(86,"mat-icon",48),t._uU(87,"receipt"),t.qZA(),t.qZA()),2&e){const n=t.MAs(10);t.xp6(5),t.Q6J("formGroup",o.orderDateRange)("rangePicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(13),t.Q6J("ngIf",o.showFilterSummary),t.xp6(1),t.Q6J("checked",!0),t.xp6(2),t.Q6J("checked",!0),t.xp6(2),t.Q6J("checked",!0),t.xp6(5),t.hij("Pending Orders: ",o.getNumberOfOrders(!1),""),t.xp6(2),t.hij("Completed Orders: ",o.getNumberOfOrders(!0),""),t.xp6(2),t.hij("Total Items Sold: ",o.totalItemsSold,""),t.xp6(2),t.hij("Total Revenue: ",t.xi3(38,23,o.totalRevenue,"USD"),""),t.xp6(3),t.hij("Total Booking Amount: ",t.xi3(41,26,o.totalBookingAmount,"USD"),""),t.xp6(3),t.Q6J("ngIf",!o.expandedOrderRows.length),t.xp6(1),t.Q6J("ngIf",o.expandedOrderRows.length),t.xp6(1),t.Q6J("disabled",o.orderDateRange.value.end),t.xp6(3),t.Q6J("disabled",o.orderDateRange.value.end),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(27),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(29,hr)),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(30,gr)),t.xp6(1),t.Q6J("ngIf",o.allOrdersList.length)}},directives:[f.KE,f.hX,g.wx,s.JL,s.sg,g.zY,s.Fj,s.JJ,s.u,g.By,g.nW,f.R9,g._g,g.M5,w.lW,g.dp,g.DK,v.Nt,Z.O5,Q.Rr,b.Hw,q.gM,m.BZ,O.YE,m.w1,m.fO,m.Dz,m.as,m.nj,m.Ee,A.NW,m.ge,m.ev,O.nU,T.a8,T.dk,T.kc,T.n5,T.$j,T.dn,m.XQ,m.Gk,re],pipes:[Z.H9,Z.uU],styles:["tr.order-detail-row[_ngcontent-%COMP%]{height:0}tr.order-row[_ngcontent-%COMP%]:not(.order-expanded-row):hover{background:whitesmoke}tr.order-row[_ngcontent-%COMP%]:not(.order-expanded-row):active{background:#efefef}.order-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.order-expanded-detail-row[_ngcontent-%COMP%]{overflow:hidden;display:flex}.order-completed-row[_ngcontent-%COMP%]{background-color:#00ff0040!important}.order-time-warning-row[_ngcontent-%COMP%]{background-color:#ff910040!important}.order-overdue-warning-row[_ngcontent-%COMP%]{background-color:#ff000040!important}.order-customer-name[_ngcontent-%COMP%]{position:relative}.order-customer-name[_ngcontent-%COMP%]   .order-customer-occasion[_ngcontent-%COMP%]{position:absolute;top:10px}.row-expand-toggle[_ngcontent-%COMP%]{float:right;margin-right:16px!important}.customer-card[_ngcontent-%COMP%]{max-width:400px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.customer-card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.customer-card-subtitle[_ngcontent-%COMP%]{font-size:12px}.item-card[_ngcontent-%COMP%]{flex-grow:.5}.total-table-cell[_ngcontent-%COMP%]{border-top:1px solid black;border-bottom:1px solid black}.direction-icon[_ngcontent-%COMP%]{text-decoration:none;color:initial}.orders-toggle[_ngcontent-%COMP%]{float:right}.order-info[_ngcontent-%COMP%]{font-weight:500}.order-summary[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-radius:5px;padding:8px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;display:inline-block}.net-bill-column[_ngcontent-%COMP%]{font-weight:500!important;color:#000!important}.day-switch-icons[_ngcontent-%COMP%]{font-size:48px}"],data:{animation:[(0,_.X$)("detailExpand",[(0,_.SB)("collapsed, void",(0,_.oB)({height:"0px",minHeight:"0"})),(0,_.SB)("expanded",(0,_.oB)({height:"*"})),(0,_.eR)("expanded <=> collapsed",(0,_.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)")),(0,_.eR)("expanded <=> void",(0,_.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),r})()},{path:"**",redirectTo:"",pathMatch:"full"}];let fr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[B.Bz.forChild(_r)],B.Bz]}),r})();var Zr=d(4992);let Tr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[Z.ez,fr,Zr.m,s.UX,f.lN,m.p0,b.Ps,A.TU,v.c,w.ot,O.JX,I.Bb,g.FA,T.QW,Y.LD,Q.rP,q.AV,C.Is]]}),r})()}}]);