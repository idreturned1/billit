"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[546],{9546:(co,M,s)=>{s.r(M),s.d(M,{OrdersModule:()=>so});var f=s(8583),a=s(3679),h=s(8295),d=s(2789),y=s(6627),O=s(9692),v=s(9983),D=s(1095),Z=s(1494),w=s(5781),p=s(3220),T=s(3738),F=s(7441),R=s(8553),t=s(7716),g=s(2458),Q=s(9490),G=s(6237),H=s(9238);const V=["thumbContainer"],z=["toggleBar"],W=["input"],X=function(o){return{enterDuration:o}},K=["*"],tt=new t.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let et=0;const ot={provide:a.JU,useExisting:(0,t.Gpc)(()=>Y),multi:!0};class rt{constructor(i,e){this.source=i,this.checked=e}}const it=(0,g.sb)((0,g.pj)((0,g.Kr)((0,g.Id)(class{constructor(o){this._elementRef=o}}))));let Y=(()=>{class o extends it{constructor(e,r,n,l,m,c){super(e),this._focusMonitor=r,this._changeDetectorRef=n,this.defaults=m,this._onChange=x=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++et,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new t.vpe,this.toggleChange=new t.vpe,this.tabIndex=parseInt(l)||0,this.color=this.defaultColor=m.color||"accent",this._noopAnimations="NoopAnimations"===c}get required(){return this._required}set required(e){this._required=(0,Q.Ig)(e)}get checked(){return this._checked}set checked(e){this._checked=(0,Q.Ig)(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._inputElement.nativeElement.focus():e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e,r){r?this._focusMonitor.focusVia(this._inputElement,r,e):this._inputElement.nativeElement.focus(e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new rt(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(H.tE),t.Y36(t.sBO),t.$8M("tabindex"),t.Y36(tt),t.Y36(G.Qb,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-slide-toggle"]],viewQuery:function(e,r){if(1&e&&(t.Gf(V,5),t.Gf(z,5),t.Gf(W,5)),2&e){let n;t.iGM(n=t.CRH())&&(r._thumbEl=n.first),t.iGM(n=t.CRH())&&(r._thumbBarEl=n.first),t.iGM(n=t.CRH())&&(r._inputElement=n.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,r){2&e&&(t.Ikx("id",r.id),t.uIk("tabindex",r.disabled?null:-1)("aria-label",null)("aria-labelledby",null),t.ekj("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked",ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[t._Bn([ot]),t.qOj],ngContentSelectors:K,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,r){if(1&e&&(t.F$t(),t.TgZ(0,"label",0,1),t.TgZ(2,"div",2,3),t.TgZ(4,"input",4,5),t.NdJ("change",function(l){return r._onChangeEvent(l)})("click",function(l){return r._onInputClick(l)}),t.qZA(),t.TgZ(6,"div",6,7),t._UZ(8,"div",8),t.TgZ(9,"div",9),t._UZ(10,"div",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"span",11,12),t.NdJ("cdkObserveContent",function(){return r._onLabelTextChange()}),t.TgZ(13,"span",13),t._uU(14,"\xa0"),t.qZA(),t.Hsn(15),t.qZA(),t.qZA()),2&e){const n=t.MAs(1),l=t.MAs(12);t.uIk("for",r.inputId),t.xp6(2),t.ekj("mat-slide-toggle-bar-no-side-margin",!l.textContent||!l.textContent.trim()),t.xp6(2),t.Q6J("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),t.uIk("name",r.name)("aria-checked",r.checked.toString())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),t.xp6(5),t.Q6J("matRippleTrigger",n)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",t.VKq(18,X,r._noopAnimations?0:150))}},directives:[g.wG,R.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),o})(),B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})(),lt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[B,g.si,g.BQ,R.Q8],B,g.BQ]}),o})();var I=s(1436),C=s(2238),$=s(4655),u=s(4762),b=s(7238),st=s(9765),q=s(5319),J=s(739),L=s(9761),P=s(8002),dt=s(3342),N=s(7165),_=s(9670),U=s(4416),mt=s(3208),ct=s(7672),S=s(8312),A=s(9067),ut=s(6215),j=s(1841);let pt=(()=>{class o{constructor(e){this.http=e}generateReceiptForOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){yield this.http.post(`${S.a.receiptForOrderUrl}/${e}`,null,{params:{shopId:A.cQ.storageHelper.shopId}}).toPromise()})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(j.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var gt=s(2266),ht=s(7001);let k=(()=>{class o{constructor(e,r,n,l,m){this.http=e,this.receiptService=r,this.helperService=n,this.reportService=l,this._snackBar=m,this.orderList$=new ut.X(null),this.orderUrl=S.a.orderUrl,this.startDate=new Date,this.isDataLoaded=!1}getOrders(){return this.isDataLoaded||this.loadOrders(),this.orderList$.asObservable()}getCurrentDateRange(){return{startDate:this.startDate,endDate:this.endDate}}updateOrderDateRange(e,r){this.startDate=e,r&&(this.endDate=r),this.loadOrders()}addOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){const r=yield this.http.post(this.orderUrl,e,{params:{shopId:A.cQ.storageHelper.shopId}}).toPromise();if(this.isOrderInRange(r.deliveryDate)){const n=this.getOrderListValue();n.length?(n.splice(this.helperService._deliveryDateLocationOf(r,n),0,r),this.orderList$.next(n)):this.orderList$.next([r])}return this._snackBar.open("Order added successfully!",null,_.R$.success),r})}updateOrder(e,r){return(0,u.mG)(this,void 0,void 0,function*(){const n=yield this.http.patch(`${this.orderUrl}/${e}`,r,{params:{shopId:A.cQ.storageHelper.shopId}}).toPromise(),l=this.getOrderListValue(),m=l.findIndex(c=>c._id===e);-1!==m&&(l.splice(m,1)[0].deliveryDate===n.deliveryDate?l.splice(m,0,n):this.isOrderInRange(n.deliveryDate)&&(l.length?l.splice(this.helperService._deliveryDateLocationOf(n,l),0,n):l.push(n)),this.orderList$.next(l),this._snackBar.open("Order updated successfully!",null,_.R$.success)),yield this.receiptService.generateReceiptForOrder(e),this.reportService.refreshData()})}deleteOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){yield this.http.delete(`${this.orderUrl}/${e}`,{params:{shopId:A.cQ.storageHelper.shopId}}).toPromise();const r=this.orderList$.getValue(),n=r.findIndex(l=>l._id===e);-1!==n&&(r.splice(n,1),this.orderList$.next(r)),this._snackBar.open("Order deleted successfully!",null,_.R$.success),this.reportService.refreshData()})}loadOrders(){const e={shopId:A.cQ.storageHelper.shopId,startDate:this.startDate.toISOString()};this.endDate&&(e.endDate=this.endDate.toISOString()),this.http.get(S.a.allOrdersUrl,{params:e}).subscribe(r=>{this.orderList$.next(r),this.isDataLoaded=!0})}getOrderListValue(){return this.orderList$.getValue()}isOrderInRange(e){let r=e;"string"==typeof e&&(r=new Date(e));const n=new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());let l;return l=this.endDate?new Date(this.endDate.getFullYear(),this.endDate.getMonth(),this.endDate.getDate()+1):new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate()+1),r>=n&&r<l}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(j.eN),t.LFG(pt),t.LFG(U.W),t.LFG(gt.r),t.LFG(ht.ux))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function _t(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().autoFillCustomerForm(l)}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._uU(3," | "),t.TgZ(4,"small"),t._uU(5),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.Q6J("value",e.name),t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij("Mob. No: ",e.mobile,"")}}function ft(o,i){if(1&o&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Zt(o,i){if(1&o&&(t.TgZ(0,"mat-option",55),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function Tt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().selectItem(l)}),t._uU(1),t.qZA()}if(2&o){const e=i.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function Ct(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"No."),t.qZA())}function bt(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=i.index;t.xp6(1),t.hij(" ",e+1," ")}}function xt(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Name"),t.qZA())}function Ot(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.item.name)}}function At(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Price"),t.qZA())}function vt(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.itemPrice,"USD")," ")}}function yt(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Quantity"),t.qZA())}function Dt(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.quantity)}}function wt(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Total Cost"),t.qZA())}function It(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.quantity*e.itemPrice,"USD")," ")}}function qt(o,i){1&o&&t._UZ(0,"th",56)}function Nt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",57),t.TgZ(1,"button",58),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().removeItemFromBill(l)}),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA(),t.qZA(),t.qZA()}}function Ut(o,i){1&o&&t._UZ(0,"tr",59)}function St(o,i){1&o&&t._UZ(0,"tr",60),2&o&&t.ekj("grey",i.even)}function kt(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Total Amount"),t.qZA())}function Mt(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.totalAmount,"USD")," ")}}function Ft(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Discount"),t.qZA())}function Rt(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.discount)}}function Qt(o,i){1&o&&(t.TgZ(0,"th",56),t._uU(1,"Net Bill Amount"),t.qZA())}function Yt(o,i){if(1&o&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount,"USD")," ")}}function Bt(o,i){1&o&&t._UZ(0,"tr",59)}function $t(o,i){1&o&&t._UZ(0,"tr",60)}let E=(()=>{class o{constructor(e,r,n,l,m,c){this.dialogRef=e,this.helperService=r,this.customerService=n,this.itemService=l,this.orderService=m,this.orderData=c,this.MONTHS=_.zC,this.viewBillItems=[],this.enableItemAddButton=!1,this.iemRemovedFromBill$=new st.xQ,this.displayedColumns=["id","name","price","quantity","total","actions"],this.billDisplayedColumns=["totalAmount","discount","billAmount"],this.subscriptions=new q.w}ngOnInit(){this.orderData?(this.formType="Update",this.selectedCustomerId=this.orderData.customer._id):this.formType="Add",this.initCustomerForm(),this.initItemForm(),this.initBillItemTable(),this.calculateBillData(),this.customerList$=(0,J.aj)([this.customerService.getAllCustomers(),this.orderCustomerForm.get("name").valueChanges.pipe((0,L.O)(""))]).pipe((0,P.U)(([r,n])=>{if(r)return this._customerListFilter(r,n)})),this.itemList$=(0,J.aj)([this.itemService.getAllItems(),this.orderItemForm.get("name").valueChanges.pipe((0,L.O)(""))]).pipe((0,dt.b)(()=>{this.enableItemAddButton=!1,this.selectedItem=null}),(0,P.U)(([r,n])=>{if(r)return this._itemListFilter(r,n)}));const e=this.orderItemForm.get("discount").valueChanges.subscribe(()=>{this.calculateBillData()});this.subscriptions.add(e)}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}executeAction(){"Add"===this.formType?this.addNewOrder():this.updateOrder()}calculateBillData(){if(this.billData=[],this.viewBillItems.length){const e=this.viewBillItems.map(l=>l.itemPrice*l.quantity).reduce((l,m)=>l+m,0);let r=this.orderItemForm.get("discount").value;r=r||0,this.billData.push({totalAmount:e,discount:`-$${r/100*e} (${r}%)`,billAmount:e-r/100*e})}}updateBillTable(){this.calculateBillData(),this.billTable.renderRows()}addNewOrder(){return(0,u.mG)(this,void 0,void 0,function*(){const e=yield this.generateNewOrderObject();yield this.orderService.addOrder(e),this.closeDialog()})}updateOrder(){return(0,u.mG)(this,void 0,void 0,function*(){const e=yield this.generateNewOrderObject();yield this.orderService.updateOrder(this.orderData._id,e),this.closeDialog()})}autoFillCustomerForm(e){this.orderCustomerForm.patchValue({name:e.name,mobile:e.mobile,address:e.address,email:e.email}),this.selectedCustomerId=e._id,this.orderCustomerForm.disable(),this.orderCustomerForm.get("name").enable()}addNewCustomer(){return(0,u.mG)(this,void 0,void 0,function*(){const e=this.getOrderCustomerFormData(),r=yield this.customerService.addCustomer(e);this.selectedCustomerId=r._id})}resetCustomerForm(){this.orderCustomerForm.enable(),this.orderCustomerForm.reset(),this.selectedCustomerId=null}selectItem(e){this.selectedItem=this.helperService._clone(e),this.enableItemAddButton=!0}addItemToBill(){const e={item:this.selectedItem,itemPrice:this.selectedItem.price,quantity:this.getItemQuantityFromForm()};this.viewBillItems.push(e),this.updateBillTable(),this.enableItemAddButton=!1,this.selectedItem=null,this.orderItemForm.get("name").reset(),this.orderItemForm.get("quantity").reset(),this.itemTable.renderRows()}removeItemFromBill(e){this.viewBillItems=this.viewBillItems.filter(r=>r.item._id!==e.item._id),this.itemTable.renderRows(),this.updateBillTable(),this.orderItemForm.get("name").updateValueAndValidity()}resetItemForm(){this.orderItemForm.reset({discount:0,deliveryDate:this._getBrowserDateTimeString()}),this.selectedItem=null,this.enableItemAddButton=!1,this.viewBillItems=[],this.billData=[]}clearItemSelection(){this.orderItemForm.get("name").reset(),this.orderItemForm.get("quantity").reset(),this.enableItemAddButton=!1}closeDialog(){this.dialogRef.close()}enableAction(){return this.orderCustomerForm.valid&&(this.orderCustomerForm.dirty||this.orderItemForm.dirty||this.viewBillItems.length!==this.orderData.billItems.length)&&this.viewBillItems.length&&this.billData.length&&!this.enableItemAddButton}generateNewOrderObject(){return(0,u.mG)(this,void 0,void 0,function*(){const e=this.viewBillItems.map(n=>({item:n.item._id,itemPrice:n.itemPrice,quantity:n.quantity}));return this.selectedCustomerId||(yield this.addNewCustomer()),{customer:this.selectedCustomerId,billItems:e,billAmount:this.billData[0].billAmount,discount:this.orderItemForm.get("discount").value,deliveryDate:new Date(this.orderItemForm.get("deliveryDate").value).toISOString()}})}initCustomerForm(){"Add"===this.formType?this.orderCustomerForm=new a.cw({name:new a.NI(null,[a.kI.required.bind(this),N.F]),mobile:new a.NI(null,a.kI.required.bind(this)),address:new a.NI(null),email:new a.NI(null,a.kI.email.bind(this)),birthday:new a.cw({day:new a.NI(null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(null,[a.kI.min(1),a.kI.max(12)])}),anniversary:new a.cw({day:new a.NI(null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(null,[a.kI.min(1),a.kI.max(12)])})}):(this.orderCustomerForm=new a.cw({name:new a.NI(this.orderData.customer.name,[a.kI.required.bind(this),N.F]),mobile:new a.NI(this.orderData.customer.mobile,a.kI.required.bind(this)),address:new a.NI(this.orderData.customer.address),email:new a.NI(this.orderData.customer.email,a.kI.email.bind(this)),birthday:new a.cw({day:new a.NI(this.orderData.customer.birthday?this.orderData.customer.birthday.day:null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(this.orderData.customer.birthday?this.orderData.customer.birthday.month:null,[a.kI.min(1),a.kI.max(12)])}),anniversary:new a.cw({day:new a.NI(this.orderData.customer.anniversary?this.orderData.customer.anniversary.day:null,[a.kI.min(1),a.kI.max(31)]),month:new a.NI(this.orderData.customer.anniversary?this.orderData.customer.anniversary.month:null,[a.kI.min(1),a.kI.max(12)])})}),this.orderCustomerForm.disable(),this.orderCustomerForm.get("name").enable())}getOrderCustomerFormData(){return this.helperService._clone(this.orderCustomerForm.value)}_customerListFilter(e,r){return r=r||"",e.filter(n=>n.name.toLowerCase().includes(r.toLowerCase()))}initItemForm(){this.orderItemForm=new a.cw({name:new a.NI(null,[a.kI.required.bind(this),N.F]),quantity:new a.NI(null,a.kI.required.bind(this))}),this.orderItemForm.addControl("discount",new a.NI(this.orderData?this.orderData.discount:0));const r=this.orderData?this._getBrowserDateTimeString(this.orderData.deliveryDate):this._getBrowserDateTimeString();this.orderItemForm.addControl("deliveryDate",new a.NI(r,a.kI.required.bind(this)))}initBillItemTable(){this.orderData&&this.orderData.billItems.forEach(e=>{this.viewBillItems.push({item:e.item,itemPrice:e.itemPrice,quantity:e.quantity})})}getItemQuantityFromForm(){return this.orderItemForm.get("quantity").value}_itemListFilter(e,r){return r=r||"",e.filter(n=>n.name.toLowerCase().includes(r.toLowerCase())&&-1===this.viewBillItems.findIndex(l=>l.item._id===n._id))}_getBrowserDateTimeString(e){let r=new Date;return"string"==typeof e&&(r=new Date(e)),`${r.getFullYear()}-${r.getMonth()+1<10?`0${r.getMonth()+1}`:`${r.getMonth()+1}`}-${r.getDate()<10?`0${r.getDate()}`:`${r.getDate()}`}T${r.getHours()<10?`0${r.getHours()}`:`${r.getHours()}`}:${r.getMinutes()<10?`0${r.getMinutes()}`:`${r.getMinutes()}`}`}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.so),t.Y36(U.W),t.Y36(mt.v),t.Y36(ct.e),t.Y36(k),t.Y36(C.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order-form"]],viewQuery:function(e,r){if(1&e&&(t.Gf(d.BZ,5),t.Gf(d.BZ,5)),2&e){let n;t.iGM(n=t.CRH())&&(r.itemTable=n.first),t.iGM(n=t.CRH())&&(r.billTable=n.first)}},decls:138,vars:24,consts:[["mat-dialog-title",""],[1,"flex","order-form-container"],[1,"customer-form-container"],[1,"sub-form-heading"],["mat-icon-button","","color","warn",1,"reset-button",3,"click"],["matTooltip","Reset Customer Form"],[3,"formGroup"],[1,"mar-vr-16"],["appearance","fill",1,"full-width"],["type","text","matInput","","placeholder","Ex: Nikola Tesla","formControlName","name","required","",3,"matAutocomplete"],["autoSuggestCustomers","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","type","number","formControlName","mobile","required",""],["matInput","","formControlName","address","placeholder","Ex: #1 Tesla Road, Nikola City"],["matInput","","type","email","placeholder","Ex. nikola@tesla.com","formControlName","email"],[1,"flex-col"],["formGroupName","birthday",1,"occasion-container","mar-right-16"],["appearance","fill",1,"occasion-input"],["matInput","","type","number","formControlName","day"],[1,"input-separator"],["formControlName","month"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","anniversary",1,"occasion-container"],[1,"separator"],[1,"items-form-container"],["matTooltip","Reset Item Form"],[1,"mar-right-8"],["mat-button","","color","warn","matTooltip","Clear Selected Item",3,"disabled","click"],["appearance","fill",1,"mar-right-16"],["autoSuggestItems","matAutocomplete"],["type","number","matInput","","placeholder","Ex: 1","formControlName","quantity","required",""],["mat-raised-button","","color","primary","matTooltip","Add Item To Order",3,"disabled","click"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","quantity"],["matColumnDef","total"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],[1,"mar-top-32"],["type","number","matInput","","placeholder","Ex: 1","formControlName","discount"],["type","datetime-local","matInput","","formControlName","deliveryDate"],["matColumnDef","totalAmount"],["matColumnDef","discount"],["matColumnDef","billAmount"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value","click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,r){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"h4",3),t._uU(6,"Customer Details"),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return r.resetCustomerForm()}),t.TgZ(8,"mat-icon",5),t._uU(9,"restart_alt"),t.qZA(),t.qZA(),t.TgZ(10,"form",6),t.TgZ(11,"div",7),t.TgZ(12,"mat-form-field",8),t.TgZ(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",9),t.TgZ(16,"mat-autocomplete",null,10),t.YNc(18,_t,6,3,"mat-option",11),t.ALo(19,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"mat-form-field",12),t.TgZ(22,"mat-label"),t._uU(23,"Mobile"),t.qZA(),t._UZ(24,"input",13),t.qZA(),t.qZA(),t.TgZ(25,"div",7),t.TgZ(26,"mat-form-field",8),t.TgZ(27,"mat-label"),t._uU(28,"Address"),t.qZA(),t._UZ(29,"textarea",14),t.qZA(),t.qZA(),t.TgZ(30,"div",7),t.TgZ(31,"mat-form-field",8),t.TgZ(32,"mat-label"),t._uU(33,"Email"),t.qZA(),t._UZ(34,"input",15),t.qZA(),t.qZA(),t.TgZ(35,"div",16),t.TgZ(36,"div",17),t.TgZ(37,"h4"),t._uU(38,"Birthday"),t.qZA(),t.TgZ(39,"mat-form-field",18),t.TgZ(40,"mat-label"),t._uU(41,"Day"),t.qZA(),t._UZ(42,"input",19),t.qZA(),t._UZ(43,"div",20),t.TgZ(44,"mat-form-field",18),t.TgZ(45,"mat-label"),t._uU(46,"Month"),t.qZA(),t.TgZ(47,"mat-select",21),t.YNc(48,ft,2,2,"mat-option",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",23),t.TgZ(50,"h4"),t._uU(51,"Anniversary"),t.qZA(),t.TgZ(52,"mat-form-field",18),t.TgZ(53,"mat-label"),t._uU(54,"Day"),t.qZA(),t._UZ(55,"input",19),t.qZA(),t._UZ(56,"div",20),t.TgZ(57,"mat-form-field",18),t.TgZ(58,"mat-label"),t._uU(59,"Month"),t.qZA(),t.TgZ(60,"mat-select",21),t.YNc(61,Zt,2,2,"mat-option",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(62,"div",24),t.TgZ(63,"div",25),t.TgZ(64,"h4",3),t._uU(65,"Items Details"),t.qZA(),t.TgZ(66,"button",4),t.NdJ("click",function(){return r.resetItemForm()}),t.TgZ(67,"mat-icon",26),t._uU(68,"restart_alt"),t.qZA(),t.qZA(),t.TgZ(69,"div"),t.TgZ(70,"span",27),t._uU(71,"Choose Item"),t.qZA(),t.TgZ(72,"button",28),t.NdJ("click",function(){return r.clearItemSelection()}),t._uU(73," Clear "),t.qZA(),t.qZA(),t.TgZ(74,"form",6),t.TgZ(75,"div",7),t.TgZ(76,"mat-form-field",29),t.TgZ(77,"mat-label"),t._uU(78,"Item Name"),t.qZA(),t._UZ(79,"input",9),t.TgZ(80,"mat-autocomplete",null,30),t.YNc(82,Tt,2,2,"mat-option",11),t.ALo(83,"async"),t.qZA(),t.qZA(),t.TgZ(84,"mat-form-field",29),t.TgZ(85,"mat-label"),t._uU(86,"Quantity"),t.qZA(),t._UZ(87,"input",31),t.qZA(),t.TgZ(88,"button",32),t.NdJ("click",function(){return r.addItemToBill()}),t._uU(89," Add "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(90,"table",33),t.ynx(91,34),t.YNc(92,Ct,2,0,"th",35),t.YNc(93,bt,2,1,"td",36),t.BQk(),t.ynx(94,37),t.YNc(95,xt,2,0,"th",35),t.YNc(96,Ot,2,1,"td",36),t.BQk(),t.ynx(97,38),t.YNc(98,At,2,0,"th",35),t.YNc(99,vt,3,4,"td",36),t.BQk(),t.ynx(100,39),t.YNc(101,yt,2,0,"th",35),t.YNc(102,Dt,2,1,"td",36),t.BQk(),t.ynx(103,40),t.YNc(104,wt,2,0,"th",35),t.YNc(105,It,3,4,"td",36),t.BQk(),t.ynx(106,41),t.YNc(107,qt,1,0,"th",35),t.YNc(108,Nt,4,0,"td",36),t.BQk(),t.YNc(109,Ut,1,0,"tr",42),t.YNc(110,St,1,2,"tr",43),t.qZA(),t.TgZ(111,"form",6),t.TgZ(112,"div",44),t.TgZ(113,"mat-form-field",29),t.TgZ(114,"mat-label"),t._uU(115,"Discount %"),t.qZA(),t._UZ(116,"input",45),t.qZA(),t.TgZ(117,"mat-form-field",12),t.TgZ(118,"mat-label"),t._uU(119,"Delivery Date & Time"),t.qZA(),t._UZ(120,"input",46),t.qZA(),t.qZA(),t.qZA(),t.TgZ(121,"table",33),t.ynx(122,47),t.YNc(123,kt,2,0,"th",35),t.YNc(124,Mt,3,4,"td",36),t.BQk(),t.ynx(125,48),t.YNc(126,Ft,2,0,"th",35),t.YNc(127,Rt,2,1,"td",36),t.BQk(),t.ynx(128,49),t.YNc(129,Qt,2,0,"th",35),t.YNc(130,Yt,3,4,"td",36),t.BQk(),t.YNc(131,Bt,1,0,"tr",42),t.YNc(132,$t,1,0,"tr",50),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(133,"mat-dialog-actions",51),t.TgZ(134,"button",52),t._uU(135,"Cancel"),t.qZA(),t.TgZ(136,"button",53),t.NdJ("click",function(){return r.executeAction()}),t._uU(137),t.qZA(),t.qZA()),2&e){const n=t.MAs(17),l=t.MAs(81);t.xp6(1),t.hij("",r.formType," Order"),t.xp6(9),t.Q6J("formGroup",r.orderCustomerForm),t.xp6(5),t.Q6J("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",t.lcZ(19,20,r.customerList$)),t.xp6(30),t.Q6J("ngForOf",r.MONTHS),t.xp6(13),t.Q6J("ngForOf",r.MONTHS),t.xp6(11),t.Q6J("disabled",!r.enableItemAddButton||!(null!=r.orderItemForm&&r.orderItemForm.valid)),t.xp6(2),t.Q6J("formGroup",r.orderItemForm),t.xp6(5),t.Q6J("matAutocomplete",l),t.xp6(3),t.Q6J("ngForOf",t.lcZ(83,22,r.itemList$)),t.xp6(6),t.Q6J("disabled",!r.enableItemAddButton||!(null!=r.orderItemForm&&r.orderItemForm.valid)),t.xp6(2),t.Q6J("dataSource",r.viewBillItems),t.xp6(19),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("formGroup",r.orderItemForm),t.xp6(10),t.Q6J("dataSource",r.billData),t.xp6(10),t.Q6J("matHeaderRowDef",r.billDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.billDisplayedColumns),t.xp6(4),t.Q6J("disabled",!r.enableAction()),t.xp6(1),t.hij(" ",r.formType," ")}},directives:[C.uh,C.xY,D.lW,y.Hw,I.gM,a._Y,a.JL,a.sg,h.KE,h.hX,v.Nt,a.Fj,w.ZL,a.JJ,a.u,a.Q7,w.XC,f.sg,a.wV,a.x0,F.gD,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,C.H8,C.ZT,g.ey,d.ge,d.ev,d.XQ,d.Gk],pipes:[f.Ov,f.H9],styles:[".order-form-container[_ngcontent-%COMP%]   .customer-form-container[_ngcontent-%COMP%]{flex:.25 1 auto}.order-form-container[_ngcontent-%COMP%]   .items-form-container[_ngcontent-%COMP%]{flex:1}.order-form-container[_ngcontent-%COMP%]   .sub-form-heading[_ngcontent-%COMP%]{display:inline-block}.order-form-container[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{float:right}.order-form-container[_ngcontent-%COMP%]   .occasion-input[_ngcontent-%COMP%]{width:100px}.order-form-container[_ngcontent-%COMP%]   .occasion-container[_ngcontent-%COMP%]{position:relative}.order-form-container[_ngcontent-%COMP%]   .input-separator[_ngcontent-%COMP%]{width:0px;border-right:1px solid rgba(0,0,0,.26);display:inline-block;height:35px;position:absolute;margin-top:8px}"]}),o})();var Jt=s(7176),Lt=s(7048);function Pt(o,i){1&o&&(t.TgZ(0,"th",17),t._uU(1,"No."),t.qZA())}function jt(o,i){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const e=i.dataIndex,r=t.oxw();t.xp6(1),t.hij(" ",e+1+(null==r.paginator?null:r.paginator.pageIndex)*(null==r.paginator?null:r.paginator.pageSize)," ")}}function Et(o,i){1&o&&(t.TgZ(0,"th",19),t._uU(1,"Name"),t.qZA())}function Gt(o,i){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.name)}}function Ht(o,i){1&o&&(t.TgZ(0,"th",17),t._uU(1,"Total Quantity"),t.qZA())}function Vt(o,i){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.quantity)}}function zt(o,i){1&o&&t._UZ(0,"tr",20)}function Wt(o,i){1&o&&t._UZ(0,"tr",21),2&o&&t.ekj("grey",i.even)}function Xt(o,i){1&o&&(t.TgZ(0,"tr",22),t.TgZ(1,"td",23),t._uU(2,"No data found."),t.qZA(),t.qZA())}const Kt=function(){return[5,10,25,100]};let te=(()=>{class o{constructor(e){this.orderService=e,this.displayedColumns=["id","name","quantity"],this.dataSource=new d.by([]),this.subscriptions=new q.w}ngOnInit(){const e=this.orderService.getOrders().subscribe(r=>{r&&r&&this.setTableDataSource(r)});this.subscriptions.add(e)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}setTableDataSource(e){const r=e.filter(m=>!m.completed),n=new Map,l=[];for(const m of r)for(const c of m.billItems){const x=n.get(c.item.name);x?(x.quantity+=c.quantity,n.set(c.item.name,x)):n.set(c.item.name,{name:c.item.name,quantity:c.quantity})}n.forEach(m=>{l.push(m)}),this.dataSource.data=l}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-order-total-items"]],viewQuery:function(e,r){if(1&e&&(t.Gf(O.NW,5),t.Gf(Z.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(r.paginator=n.first),t.iGM(n=t.CRH())&&(r.sort=n.first)}},decls:23,vars:6,consts:[[1,"total-items"],[1,"title","mar-vr-16"],["appearance","outline","color","accent",1,"mar-right-16"],["matInput","","placeholder","Ex. Samosa",3,"keyup"],["input",""],[1,"total-items-table"],["mat-table","","matSort","","multiTemplateDataRows","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","quantity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._uU(2,"Total Items For Today"),t.qZA(),t.TgZ(3,"mat-form-field",2),t.TgZ(4,"mat-label"),t._uU(5,"Search"),t.qZA(),t.TgZ(6,"input",3,4),t.NdJ("keyup",function(l){return r.applyFilter(l)}),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"table",6),t.ynx(10,7),t.YNc(11,Pt,2,0,"th",8),t.YNc(12,jt,2,1,"td",9),t.BQk(),t.ynx(13,10),t.YNc(14,Et,2,0,"th",11),t.YNc(15,Gt,2,1,"td",9),t.BQk(),t.ynx(16,12),t.YNc(17,Ht,2,0,"th",8),t.YNc(18,Vt,2,1,"td",9),t.BQk(),t.YNc(19,zt,1,0,"tr",13),t.YNc(20,Wt,1,2,"tr",14),t.YNc(21,Xt,3,0,"tr",15),t.qZA(),t._UZ(22,"mat-paginator",16),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("dataSource",r.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(5,Kt)))},directives:[h.KE,h.hX,v.Nt,d.BZ,Z.YE,d.w1,d.fO,d.Dz,d.as,d.nj,d.Ee,O.NW,d.ge,d.ev,Z.nU,d.XQ,d.Gk],styles:[".title[_ngcontent-%COMP%]{font-weight:500}"]}),o})();function ee(o,i){1&o&&(t.TgZ(0,"mat-icon",40),t._uU(1,"unfold_more"),t.qZA())}function oe(o,i){1&o&&(t.TgZ(0,"mat-icon",41),t._uU(1,"unfold_less"),t.qZA())}function re(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"No."),t.qZA())}function ie(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&o){const e=i.dataIndex,r=t.oxw();t.xp6(1),t.hij(" ",e+1+(null==r.paginator?null:r.paginator.pageIndex)*(null==r.paginator?null:r.paginator.pageSize)," ")}}function ne(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Customer Name"),t.qZA())}function ae(o,i){1&o&&(t.TgZ(0,"mat-icon",46),t._uU(1,"label_important"),t.qZA())}function le(o,i){if(1&o&&(t.TgZ(0,"td",44),t._uU(1),t.YNc(2,ae,2,0,"mat-icon",45),t.qZA()),2&o){const e=i.$implicit,r=t.oxw();t.xp6(1),t.hij(" ",e.customer.name," "),t.xp6(1),t.Q6J("ngIf",r.isCustomerOccasion(e.customer.birthday)||r.isCustomerOccasion(e.customer.anniversary))}}function se(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Items"),t.qZA())}function de(o,i){1&o&&(t.TgZ(0,"span"),t._uU(1,"+ 1 other"),t.qZA())}function me(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("+ ",e.billItems.length-1," others")}}function ce(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.YNc(2,de,2,0,"span",47),t.YNc(3,me,2,1,"span",47),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.billItems[0].item.name," "),t.xp6(1),t.Q6J("ngIf",2===e.billItems.length),t.xp6(1),t.Q6J("ngIf",e.billItems.length>2)}}function ue(o,i){1&o&&(t.TgZ(0,"th",48),t._uU(1,"Net Amount"),t.qZA())}function pe(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount,"USD")," ")}}function ge(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Created At"),t.qZA())}function he(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"MMM d, hh:mm a")," ")}}function _e(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"shortTime")," ")}}function fe(o,i){if(1&o&&(t.TgZ(0,"td",43),t.YNc(1,he,3,4,"span",47),t.YNc(2,_e,3,4,"span",47),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderDateRange.value.end),t.xp6(1),t.Q6J("ngIf",!e.orderDateRange.value.end)}}function Ze(o,i){1&o&&(t.TgZ(0,"th",48),t._uU(1," Delivery Date "),t.qZA())}function Te(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.deliveryDate,"MMM d, hh:mm a")," ")}}function Ce(o,i){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.deliveryDate,"shortTime")," ")}}function be(o,i){if(1&o&&(t.TgZ(0,"td",43),t.YNc(1,Te,3,4,"span",47),t.YNc(2,Ce,3,4,"span",47),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderDateRange.value.end),t.xp6(1),t.Q6J("ngIf",!e.orderDateRange.value.end)}}function xe(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Status"),t.qZA())}function Oe(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.completed?"Done":"Pending"," ")}}function Ae(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Actions"),t.qZA())}function ve(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(n){t.CHM(e);const l=t.oxw().$implicit;return t.oxw().completeOrder(l),n.stopPropagation()}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA(),t.qZA()}}function ye(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",43),t.TgZ(1,"div",49),t.YNc(2,ve,3,0,"button",50),t.TgZ(3,"button",51),t.NdJ("click",function(n){const m=t.CHM(e).$implicit;return t.oxw().updateOrder(m),n.stopPropagation()}),t.TgZ(4,"mat-icon"),t._uU(5,"edit"),t.qZA(),t.qZA(),t.TgZ(6,"button",52),t.NdJ("click",function(n){const m=t.CHM(e).$implicit;return t.oxw().deleteOrder(m),n.stopPropagation()}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(2),t.Q6J("ngIf",!e.completed)}}function De(o,i){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",56),t.TgZ(2,"a",70),t.TgZ(3,"mat-icon"),t._uU(4,"location_on"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"mat-card-title",57),t._uU(6),t.qZA(),t.TgZ(7,"mat-card-subtitle",58),t._uU(8,"Address"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("href","https://www.google.com/maps/place/"+e.customer.address,t.LSH),t.xp6(4),t.hij("",e.customer.address," ")}}function we(o,i){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",56),t.TgZ(2,"mat-icon"),t._uU(3,"alternate_email"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",57),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",58),t._uU(7,"Email"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(5),t.hij("",e.customer.email," ")}}function Ie(o,i){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",56),t.TgZ(2,"mat-icon"),t._uU(3,"cake"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",57),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",58),t._uU(7,"Birthday"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit,r=t.oxw();t.xp6(5),t.hij("",r.getDateString(e.customer.birthday)," ")}}function qe(o,i){if(1&o&&(t.TgZ(0,"mat-card-header"),t.TgZ(1,"div",56),t.TgZ(2,"mat-icon"),t._uU(3,"celebration"),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-title",57),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle",58),t._uU(7,"Anniversary"),t.qZA(),t.qZA()),2&o){const e=t.oxw().$implicit,r=t.oxw();t.xp6(5),t.hij("",r.getDateString(e.customer.anniversary)," ")}}function Ne(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"No."),t.qZA())}function Ue(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&o){const e=i.index;t.xp6(1),t.hij(" ",e+1," ")}}function Se(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Name"),t.qZA())}function ke(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.item.name," ")}}function Me(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Price"),t.qZA())}function Fe(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.itemPrice,"USD")," ")}}function Re(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Quantity"),t.qZA())}function Qe(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.quantity," ")}}function Ye(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Total Cost"),t.qZA())}function Be(o,i){if(1&o&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.quantity*e.itemPrice,"USD")," ")}}function $e(o,i){1&o&&t._UZ(0,"tr",71)}function Je(o,i){1&o&&t._UZ(0,"tr",72),2&o&&t.ekj("grey",i.even)}function Le(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Total Amount"),t.qZA())}function Pe(o,i){if(1&o&&(t.TgZ(0,"td",73),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,100*e.billAmount/(100-e.discount),"USD")," ")}}function je(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Discount"),t.qZA())}function Ee(o,i){if(1&o&&(t.TgZ(0,"td",73),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.discount,"USD")," ")}}function Ge(o,i){1&o&&(t.TgZ(0,"th",42),t._uU(1,"Net Bill Amount"),t.qZA())}function He(o,i){if(1&o&&(t.TgZ(0,"td",73),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.billAmount,"USD")," ")}}function Ve(o,i){1&o&&t._UZ(0,"tr",71)}function ze(o,i){1&o&&t._UZ(0,"tr",72)}const We=function(o){return[o]};function Xe(o,i){if(1&o&&(t.TgZ(0,"td",43),t.TgZ(1,"div",54),t.TgZ(2,"mat-card",55),t.TgZ(3,"mat-card-header"),t.TgZ(4,"div",56),t.TgZ(5,"mat-icon"),t._uU(6,"face"),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-title",57),t._uU(8),t.qZA(),t.TgZ(9,"mat-card-subtitle",58),t._uU(10,"Name"),t.qZA(),t.qZA(),t.YNc(11,De,9,2,"mat-card-header",47),t.TgZ(12,"mat-card-header"),t.TgZ(13,"div",56),t.TgZ(14,"mat-icon"),t._uU(15,"smartphone"),t.qZA(),t.qZA(),t.TgZ(16,"mat-card-title",57),t._uU(17),t.qZA(),t.TgZ(18,"mat-card-subtitle",58),t._uU(19,"Mobile"),t.qZA(),t.qZA(),t.YNc(20,we,8,1,"mat-card-header",47),t.YNc(21,Ie,8,1,"mat-card-header",47),t.YNc(22,qe,8,1,"mat-card-header",47),t.qZA(),t.TgZ(23,"mat-card",59),t.TgZ(24,"mat-card-content"),t.TgZ(25,"table",60),t.ynx(26,20),t.YNc(27,Ne,2,0,"th",21),t.YNc(28,Ue,2,1,"td",22),t.BQk(),t.ynx(29,61),t.YNc(30,Se,2,0,"th",21),t.YNc(31,ke,2,1,"td",22),t.BQk(),t.ynx(32,62),t.YNc(33,Me,2,0,"th",21),t.YNc(34,Fe,3,4,"td",22),t.BQk(),t.ynx(35,63),t.YNc(36,Re,2,0,"th",21),t.YNc(37,Qe,2,1,"td",22),t.BQk(),t.ynx(38,64),t.YNc(39,Ye,2,0,"th",21),t.YNc(40,Be,3,4,"td",22),t.BQk(),t.YNc(41,$e,1,0,"tr",33),t.YNc(42,Je,1,2,"tr",65),t.qZA(),t.TgZ(43,"table",60),t.ynx(44,66),t.YNc(45,Le,2,0,"th",21),t.YNc(46,Pe,3,4,"td",67),t.BQk(),t.ynx(47,68),t.YNc(48,je,2,0,"th",21),t.YNc(49,Ee,3,4,"td",67),t.BQk(),t.ynx(50,26),t.YNc(51,Ge,2,0,"th",21),t.YNc(52,He,3,4,"td",67),t.BQk(),t.YNc(53,Ve,1,0,"tr",33),t.YNc(54,ze,1,0,"tr",69),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=i.$implicit,r=t.oxw();t.uIk("colspan",r.displayedColumns.length),t.xp6(1),t.Q6J("@detailExpand",r.checkExpanded(e._id)?"expanded":"collapsed"),t.xp6(7),t.hij("",e.customer.name," "),t.xp6(3),t.Q6J("ngIf",e.customer.address),t.xp6(6),t.hij("",e.customer.mobile," "),t.xp6(3),t.Q6J("ngIf",e.customer.email),t.xp6(1),t.Q6J("ngIf",e.customer.birthday),t.xp6(1),t.Q6J("ngIf",e.customer.anniversary),t.xp6(3),t.Q6J("dataSource",e.billItems),t.xp6(16),t.Q6J("matHeaderRowDef",r.itemDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.itemDisplayedColumns),t.xp6(1),t.Q6J("dataSource",t.VKq(14,We,e)),t.xp6(10),t.Q6J("matHeaderRowDef",r.billDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.billDisplayedColumns)}}function Ke(o,i){1&o&&t._UZ(0,"tr",71)}function to(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr",74),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().toggleRowExpand(l._id)}),t.qZA()}if(2&o){const e=i.$implicit,r=t.oxw();t.ekj("order-expanded-row",r.checkExpanded(e._id))("order-completed-row",e.completed)("order-time-warning-row",!e.completed&&r.isOrderTimeWarning(e.deliveryDate))("order-overdue-warning-row",!e.completed&&r.isOrderOverdue(e.deliveryDate))}}function eo(o,i){1&o&&t._UZ(0,"tr",75)}function oo(o,i){1&o&&(t.TgZ(0,"tr",76),t.TgZ(1,"td",77),t._uU(2,"No data found."),t.qZA(),t.qZA())}const ro=function(){return["expandedDetail"]},io=function(){return[5,10,25,100]},no=[{path:"",component:(()=>{class o{constructor(e,r,n){this.orderService=e,this.dialogService=r,this.helperService=n,this.displayedColumns=["id","customerName","items","billAmount","timeCreated","deliveryDate","status","actions"],this.itemDisplayedColumns=["id","name","price","quantity","total"],this.billDisplayedColumns=["totalAmount","discount","billAmount"],this.dataSource=new d.by([]),this.expandedOrderRows=[],this.allOrdersList=[],this.isShowCompletedOrders=!0,this.subscriptions=new q.w}ngOnInit(){const e=this.orderService.getOrders().subscribe(n=>{n&&n.length&&(this.allOrdersList=this.helperService._clone(n),this.updateDataSource())});this.initDateRange();const r=this.orderDateRange.valueChanges.subscribe(n=>{this.orderService.updateOrderDateRange(n.start,n.end)});this.subscriptions.add(e),this.subscriptions.add(r)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}checkExpanded(e){return this.expandedOrderRows.includes(e)}toggleRowExpand(e){const r=this.expandedOrderRows.indexOf(e);-1===r?this.expandedOrderRows.push(e):this.expandedOrderRows.splice(r,1)}toggleAllRowsExpand(){this.expandedOrderRows=this.expandedOrderRows.length?[]:this.allOrdersList.map(e=>e._id)}addOrder(){this.dialogService.openDialog(E,_.ib.order)}updateOrder(e){this.dialogService.openDialog(E,Object.assign(Object.assign({},_.ib.order),{data:e}))}completeOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){yield this.orderService.updateOrder(e._id,{completed:!0})})}deleteOrder(e){return(0,u.mG)(this,void 0,void 0,function*(){(yield this.dialogService.openDialog(Jt.z,Object.assign(Object.assign({},_.ib.confirmationDialog),{data:{type:"warning",action:"delete",entity:"order"}})).afterClosed().toPromise())&&(yield this.orderService.deleteOrder(e._id))})}isOrderTimeWarning(e){const r=(new Date).getTime(),n=new Date(e).getTime();return n>=r&&n-r<=18e5}isOrderOverdue(e){const r=(new Date).getTime();return new Date(e).getTime()<=r}isCustomerOccasion(e){if(e){const r=new Date;return r.getDate()===e.day&&r.getMonth()+1===e.month}}getDateString(e){if(e)return`${_.zC.find(r=>r.value===e.month).name}, ${e.day}`}toggleCompletedOrders(){this.isShowCompletedOrders=!this.isShowCompletedOrders,this.updateDataSource()}getNumberOfOrders(e){return e?this.allOrdersList.filter(r=>r.completed).length:this.allOrdersList.filter(r=>!r.completed).length}initDateRange(){const e=this.orderService.getCurrentDateRange();this.orderDateRange=new a.cw({start:new a.NI(e.startDate),end:new a.NI(e.endDate)})}updateDataSource(){if(this.allOrdersList.length){let e=this.allOrdersList.filter(r=>!r.completed);this.isShowCompletedOrders&&(e=[...e,...this.allOrdersList.filter(r=>r.completed)]),this.dataSource.data=e}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k),t.Y36(Lt.x),t.Y36(U.W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-orders"]],viewQuery:function(e,r){if(1&e&&(t.Gf(O.NW,5),t.Gf(Z.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(r.paginator=n.first),t.iGM(n=t.CRH())&&(r.sort=n.first)}},decls:68,vars:16,consts:[[1,"order-container","mar-top-16"],[1,"orders","mar-bottom-8"],["appearance","outline","color","accent",1,"mar-right-16"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["mat-button","","matDateRangePickerCancel",""],["mat-raised-button","","color","primary","matDateRangePickerApply",""],["matInput","","placeholder","Ex. Nikola Tesla",3,"keyup"],["input",""],["color","accent",1,"all-orders-toggle",3,"checked","click"],[1,"mar-right-16","order-info"],[1,"mar-right-16"],["mat-icon-button","","color","accent",3,"click"],["matTooltip","Expand Rows",4,"ngIf"],["matTooltip","Collapse Rows",4,"ngIf"],[1,"orders-table"],["mat-table","","matSort","","multiTemplateDataRows","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customerName"],["mat-cell","","class","order-customer-name",4,"matCellDef"],["matColumnDef","items"],["matColumnDef","billAmount"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","timeCreated"],["matColumnDef","deliveryDate"],["matColumnDef","status"],["matColumnDef","actions"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","order-row",3,"order-expanded-row","order-completed-row","order-time-warning-row","order-overdue-warning-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","order-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["mat-fab","","color","primary",1,"menu-button",3,"click"],["matTooltip","Add New"],["matTooltip","Expand Rows"],["matTooltip","Collapse Rows"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"order-customer-name"],["color","accent","class","order-customer-occasion pad-left-8",4,"ngIf"],["color","accent",1,"order-customer-occasion","pad-left-8"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],[1,"flex"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","",3,"click"],[1,"order-expanded-detail-row"],[1,"customer-card","mar-16"],["mat-card-avatar",""],[1,"customer-card-title"],[1,"customer-card-subtitle"],[1,"item-card","mar-16"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","quantity"],["matColumnDef","total"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["matColumnDef","totalAmount"],["mat-cell","","class","total-table-cell",4,"matCellDef"],["matColumnDef","discount"],["mat-row","",4,"matRowDef","matRowDefColumns"],["target","_blank",1,"direction-icon",3,"href"],["mat-header-row",""],["mat-row",""],["mat-cell","",1,"total-table-cell"],["mat-row","",1,"order-row",3,"click"],["mat-row","",1,"order-detail-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-label"),t._uU(4,"Enter a date range"),t.qZA(),t.TgZ(5,"mat-date-range-input",3),t._UZ(6,"input",4),t._UZ(7,"input",5),t.qZA(),t._UZ(8,"mat-datepicker-toggle",6),t.TgZ(9,"mat-date-range-picker",null,7),t.TgZ(11,"mat-date-range-picker-actions"),t.TgZ(12,"button",8),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",9),t._uU(15," Apply "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"mat-form-field",2),t.TgZ(17,"mat-label"),t._uU(18,"Search"),t.qZA(),t.TgZ(19,"input",10,11),t.NdJ("keyup",function(l){return r.applyFilter(l)}),t.qZA(),t.qZA(),t.TgZ(21,"mat-slide-toggle",12),t.NdJ("click",function(){return r.toggleCompletedOrders()}),t._uU(22," Show Completed Orders "),t.qZA(),t.TgZ(23,"div"),t.TgZ(24,"span",13),t._uU(25),t.qZA(),t.TgZ(26,"span",14),t._uU(27),t.qZA(),t.TgZ(28,"button",15),t.NdJ("click",function(){return r.toggleAllRowsExpand()}),t.YNc(29,ee,2,0,"mat-icon",16),t.YNc(30,oe,2,0,"mat-icon",17),t.qZA(),t.qZA(),t.TgZ(31,"div",18),t.TgZ(32,"table",19),t.ynx(33,20),t.YNc(34,re,2,0,"th",21),t.YNc(35,ie,2,1,"td",22),t.BQk(),t.ynx(36,23),t.YNc(37,ne,2,0,"th",21),t.YNc(38,le,3,2,"td",24),t.BQk(),t.ynx(39,25),t.YNc(40,se,2,0,"th",21),t.YNc(41,ce,4,3,"td",22),t.BQk(),t.ynx(42,26),t.YNc(43,ue,2,0,"th",27),t.YNc(44,pe,3,4,"td",22),t.BQk(),t.ynx(45,28),t.YNc(46,ge,2,0,"th",21),t.YNc(47,fe,3,2,"td",22),t.BQk(),t.ynx(48,29),t.YNc(49,Ze,2,0,"th",27),t.YNc(50,be,3,2,"td",22),t.BQk(),t.ynx(51,30),t.YNc(52,xe,2,0,"th",21),t.YNc(53,Oe,2,1,"td",22),t.BQk(),t.ynx(54,31),t.YNc(55,Ae,2,0,"th",21),t.YNc(56,ye,9,1,"td",22),t.BQk(),t.ynx(57,32),t.YNc(58,Xe,55,16,"td",22),t.BQk(),t.YNc(59,Ke,1,0,"tr",33),t.YNc(60,to,1,8,"tr",34),t.YNc(61,eo,1,0,"tr",35),t.YNc(62,oo,3,0,"tr",36),t.qZA(),t._UZ(63,"mat-paginator",37),t.qZA(),t.qZA(),t._UZ(64,"app-order-total-items"),t.qZA(),t.TgZ(65,"button",38),t.NdJ("click",function(){return r.addOrder()}),t.TgZ(66,"mat-icon",39),t._uU(67,"receipt"),t.qZA(),t.qZA()),2&e){const n=t.MAs(10);t.xp6(5),t.Q6J("formGroup",r.orderDateRange)("rangePicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(13),t.Q6J("checked",!0),t.xp6(4),t.hij("Pending Orders: ",r.getNumberOfOrders(!1),""),t.xp6(2),t.hij("Completed Orders: ",r.getNumberOfOrders(!0),""),t.xp6(2),t.Q6J("ngIf",!r.expandedOrderRows.length),t.xp6(1),t.Q6J("ngIf",r.expandedOrderRows.length),t.xp6(2),t.Q6J("dataSource",r.dataSource),t.xp6(27),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(14,ro)),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(15,io))}},directives:[h.KE,h.hX,p.wx,a.JL,a.sg,p.zY,a.Fj,a.JJ,a.u,p.By,p.nW,h.R9,p._g,p.M5,D.lW,p.dp,p.DK,v.Nt,Y,f.O5,d.BZ,Z.YE,d.w1,d.fO,d.Dz,d.as,d.nj,d.Ee,O.NW,te,y.Hw,I.gM,d.ge,d.ev,Z.nU,T.a8,T.dk,T.kc,T.n5,T.$j,T.dn,d.XQ,d.Gk],pipes:[f.H9,f.uU],styles:["tr.order-detail-row[_ngcontent-%COMP%]{height:0}tr.order-row[_ngcontent-%COMP%]:not(.order-expanded-row):hover{background:whitesmoke}tr.order-row[_ngcontent-%COMP%]:not(.order-expanded-row):active{background:#efefef}.order-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.order-expanded-detail-row[_ngcontent-%COMP%]{overflow:hidden;display:flex}.order-completed-row[_ngcontent-%COMP%]{background-color:#00ff0040!important}.order-time-warning-row[_ngcontent-%COMP%]{background-color:#ff910040!important}.order-overdue-warning-row[_ngcontent-%COMP%]{background-color:#ff000040!important}.order-customer-name[_ngcontent-%COMP%]{position:relative}.order-customer-name[_ngcontent-%COMP%]   .order-customer-occasion[_ngcontent-%COMP%]{position:absolute;top:10px}.row-expand-toggle[_ngcontent-%COMP%]{float:right;margin-right:16px!important}.customer-card[_ngcontent-%COMP%]{max-width:400px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.customer-card-title[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.customer-card-subtitle[_ngcontent-%COMP%]{font-size:12px}.item-card[_ngcontent-%COMP%]{flex-grow:.5}.total-table-cell[_ngcontent-%COMP%]{border-top:1px solid black;border-bottom:1px solid black}.direction-icon[_ngcontent-%COMP%]{text-decoration:none;color:initial}.all-orders-toggle[_ngcontent-%COMP%]{float:right}.order-info[_ngcontent-%COMP%]{font-weight:500}"],data:{animation:[(0,b.X$)("detailExpand",[(0,b.SB)("collapsed",(0,b.oB)({height:"0px",minHeight:"0"})),(0,b.SB)("expanded",(0,b.oB)({height:"*"})),(0,b.eR)("expanded <=> collapsed",(0,b.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),o})()},{path:"**",redirectTo:"",pathMatch:"full"}];let ao=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[$.Bz.forChild(no)],$.Bz]}),o})();var lo=s(4992);let so=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,ao,lo.m,a.UX,h.lN,d.p0,y.Ps,O.TU,v.c,D.ot,Z.JX,w.Bb,p.FA,T.QW,F.LD,lt,I.AV,C.Is]]}),o})()}}]);