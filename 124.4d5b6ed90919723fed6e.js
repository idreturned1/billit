"use strict";(self.webpackChunkbillit=self.webpackChunkbillit||[]).push([[124],{8124:($,T,a)=>{a.r(T),a.d(T,{ItemsModule:()=>X});var I=a(8583),m=a(3679),d=a(8295),r=a(2789),C=a(6627),f=a(9692),h=a(9983),g=a(1095),p=a(1494),c=a(2238),A=a(1436),y=a(4655),Z=a(4762),u=a(7165),t=a(7716),D=a(4416),N=a(7672);let x=(()=>{class e{constructor(i,o,s,l){this.dialogRef=i,this.helperService=o,this.itemService=s,this.itemData=l}ngOnInit(){this.formType=this.itemData?"Update":"Add",this.initForm()}enableAction(){return this.itemForm.valid&&this.itemForm.dirty}executeAction(){"Add"===this.formType?this.addNewItem():this.updateItem()}initForm(){this.itemForm=new m.cw("Add"===this.formType?{name:new m.NI(null,[m.kI.required.bind(this),u.F]),description:new m.NI(null,u.F),price:new m.NI(null,m.kI.required.bind(this))}:{name:new m.NI(this.itemData.name,[m.kI.required.bind(this),u.F]),description:new m.NI(this.itemData.description,u.F),price:new m.NI(this.itemData.price,m.kI.required.bind(this))})}addNewItem(){return(0,Z.mG)(this,void 0,void 0,function*(){const i=this.getFormData();this.helperService._removeEmptyKeys(i),yield this.itemService.addItem(i),this.closeDialog()})}updateItem(){return(0,Z.mG)(this,void 0,void 0,function*(){const i=this.helperService._removeNonUpdatedData(this.itemData,this.getFormData());this.helperService._removeEmptyKeys(i),Object.keys(i).length&&(yield this.itemService.updateItem(this.itemData._id,i)),this.closeDialog()})}getFormData(){return this.helperService._clone(this.itemForm.value)}closeDialog(){this.dialogRef.close()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(c.so),t.Y36(D.W),t.Y36(N.e),t.Y36(c.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-item-form"]],decls:24,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"mar-vr-16"],["appearance","fill",1,"full-width"],["matInput","","placeholder","Ex: Samosa","formControlName","name","required",""],["matInput","","formControlName","description","placeholder","An exotic spicy potato filled crispy snack"],["appearance","fill"],["matInput","","type","number","placeholder","0","formControlName","price","required",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(i,o){1&i&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"form",1),t.TgZ(4,"div",2),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"mat-label"),t._uU(7,"Name"),t.qZA(),t._UZ(8,"input",4),t.qZA(),t.qZA(),t.TgZ(9,"div",2),t.TgZ(10,"mat-form-field",3),t.TgZ(11,"mat-label"),t._uU(12,"Description"),t.qZA(),t._UZ(13,"textarea",5),t.qZA(),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"mat-form-field",6),t.TgZ(16,"mat-label"),t._uU(17,"Price"),t.qZA(),t._UZ(18,"input",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"mat-dialog-actions",8),t.TgZ(20,"button",9),t._uU(21,"Cancel"),t.qZA(),t.TgZ(22,"button",10),t.NdJ("click",function(){return o.executeAction()}),t._uU(23),t.qZA(),t.qZA()),2&i&&(t.xp6(1),t.hij("",o.formType," Item"),t.xp6(2),t.Q6J("formGroup",o.itemForm),t.xp6(19),t.Q6J("disabled",!o.enableAction()),t.xp6(1),t.hij(" ",o.formType," "))},directives:[c.uh,c.xY,m._Y,m.JL,m.sg,d.KE,d.hX,h.Nt,m.Fj,m.JJ,m.u,m.Q7,m.wV,c.H8,g.lW,c.ZT],styles:[""]}),e})();var v=a(9670),S=a(7176),b=a(5319),U=a(7048);function F(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1,"No."),t.qZA())}function q(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const i=n.index,o=t.oxw();t.xp6(1),t.hij(" ",i+1+(null==o.paginator?null:o.paginator.pageIndex)*(null==o.paginator?null:o.paginator.pageSize)," ")}}function w(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Name"),t.qZA())}function Y(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.name)}}function _(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Description"),t.qZA())}function J(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.description)}}function R(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Price"),t.qZA())}function Q(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,i.price,"USD")," ")}}function j(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Actions"),t.qZA())}function M(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"td",22),t.TgZ(1,"div",24),t.TgZ(2,"button",25),t.NdJ("click",function(){const l=t.CHM(i).$implicit;return t.oxw().updateItem(l)}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA(),t.qZA(),t.TgZ(5,"button",26),t.NdJ("click",function(){const l=t.CHM(i).$implicit;return t.oxw().removeItem(l)}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function O(e,n){1&e&&t._UZ(0,"tr",27)}function E(e,n){1&e&&t._UZ(0,"tr",28),2&e&&t.ekj("grey",n.even)}function H(e,n){1&e&&(t.TgZ(0,"tr",29),t.TgZ(1,"td",30),t._uU(2,"No data found."),t.qZA(),t.qZA())}const z=function(){return[5,10,25,100]},B=[{path:"",component:(()=>{class e{constructor(i,o){this.itemSerice=i,this.dialogService=o,this.displayedColumns=["id","name","description","price","actions"],this.dataSource=new r.by([]),this.subscriptions=new b.w}ngOnInit(){const i=this.itemSerice.getAllItems().subscribe(o=>{o&&o.length&&(this.dataSource.data=o)});this.subscriptions.add(i)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}applyFilter(i){this.dataSource.filter=i.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}addItem(){this.dialogService.openDialog(x,v.ib.item)}updateItem(i){this.dialogService.openDialog(x,Object.assign(Object.assign({},v.ib.item),{data:i}))}removeItem(i){return(0,Z.mG)(this,void 0,void 0,function*(){(yield this.dialogService.openDialog(S.z,Object.assign(Object.assign({},v.ib.confirmationDialog),{data:{type:"warning",action:"remove",entity:"item"}})).afterClosed().toPromise())&&(yield this.itemSerice.removeItem(i._id))})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(N.e),t.Y36(U.x))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-items"]],viewQuery:function(i,o){if(1&i&&(t.Gf(f.NW,5),t.Gf(p.YE,5)),2&i){let s;t.iGM(s=t.CRH())&&(o.paginator=s.first),t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:31,vars:6,consts:[[1,"items-container","mar-top-16"],[1,"items"],["appearance","outline"],["matInput","","placeholder","Ex. Samosa",3,"keyup"],["input",""],[1,"items-table"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","description"],["matColumnDef","price"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"grey",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSize","pageSizeOptions"],["mat-fab","","color","primary",1,"menu-button",3,"click"],["matTooltip","Add New"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"flex"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-label"),t._uU(4,"Search"),t.qZA(),t.TgZ(5,"input",3,4),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"table",6),t.ynx(9,7),t.YNc(10,F,2,0,"th",8),t.YNc(11,q,2,1,"td",9),t.BQk(),t.ynx(12,10),t.YNc(13,w,2,0,"th",11),t.YNc(14,Y,2,1,"td",9),t.BQk(),t.ynx(15,12),t.YNc(16,_,2,0,"th",8),t.YNc(17,J,2,1,"td",9),t.BQk(),t.ynx(18,13),t.YNc(19,R,2,0,"th",11),t.YNc(20,Q,3,4,"td",9),t.BQk(),t.ynx(21,14),t.YNc(22,j,2,0,"th",11),t.YNc(23,M,8,0,"td",9),t.BQk(),t.YNc(24,O,1,0,"tr",15),t.YNc(25,E,1,2,"tr",16),t.YNc(26,H,3,0,"tr",17),t.qZA(),t._UZ(27,"mat-paginator",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"button",19),t.NdJ("click",function(){return o.addItem()}),t.TgZ(29,"mat-icon",20),t._uU(30,"category"),t.qZA(),t.qZA()),2&i&&(t.xp6(8),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSize",10)("pageSizeOptions",t.DdM(5,z)))},directives:[d.KE,d.hX,h.Nt,r.BZ,p.YE,r.w1,r.fO,r.Dz,r.as,r.nj,r.Ee,f.NW,g.lW,C.Hw,A.gM,r.ge,r.ev,p.nU,r.XQ,r.Gk],pipes:[I.H9],styles:[""]}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}];let G=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[y.Bz.forChild(B)],y.Bz]}),e})();var k=a(4992);let X=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[I.ez,G,k.m,m.UX,d.lN,r.p0,C.Ps,f.TU,h.c,g.ot,p.JX,c.Is,A.AV]]}),e})()}}]);